{"ast":null,"code":"import { BaseLLMOutputParser } from \"../schema/output_parser.js\";\n/**\n * Class for parsing the output of an LLM. Can be configured to return\n * only the arguments of the function call in the output.\n */\nexport class OutputFunctionsParser extends BaseLLMOutputParser {\n  static lc_name() {\n    return \"OutputFunctionsParser\";\n  }\n  constructor(config) {\n    super();\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain\", \"chains\", \"openai_functions\"]\n    });\n    Object.defineProperty(this, \"lc_serializable\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, \"argsOnly\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    this.argsOnly = config?.argsOnly ?? this.argsOnly;\n  }\n  /**\n   * Parses the output and returns a string representation of the function\n   * call or its arguments.\n   * @param generations The output of the LLM to parse.\n   * @returns A string representation of the function call or its arguments.\n   */\n  async parseResult(generations) {\n    if (\"message\" in generations[0]) {\n      const gen = generations[0];\n      const functionCall = gen.message.additional_kwargs.function_call;\n      if (!functionCall) {\n        throw new Error(`No function_call in message ${JSON.stringify(generations)}`);\n      }\n      if (!functionCall.arguments) {\n        throw new Error(`No arguments in function_call ${JSON.stringify(generations)}`);\n      }\n      if (this.argsOnly) {\n        return functionCall.arguments;\n      }\n      return JSON.stringify(functionCall);\n    } else {\n      throw new Error(`No message in generations ${JSON.stringify(generations)}`);\n    }\n  }\n}\n/**\n * Class for parsing the output of an LLM into a JSON object. Uses an\n * instance of `OutputFunctionsParser` to parse the output.\n */\nexport class JsonOutputFunctionsParser extends BaseLLMOutputParser {\n  static lc_name() {\n    return \"JsonOutputFunctionsParser\";\n  }\n  constructor(config) {\n    super();\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain\", \"chains\", \"openai_functions\"]\n    });\n    Object.defineProperty(this, \"lc_serializable\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, \"outputParser\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"argsOnly\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    this.argsOnly = config?.argsOnly ?? this.argsOnly;\n    this.outputParser = new OutputFunctionsParser(config);\n  }\n  /**\n   * Parses the output and returns a JSON object. If `argsOnly` is true,\n   * only the arguments of the function call are returned.\n   * @param generations The output of the LLM to parse.\n   * @returns A JSON object representation of the function call or its arguments.\n   */\n  async parseResult(generations) {\n    const result = await this.outputParser.parseResult(generations);\n    if (!result) {\n      throw new Error(`No result from \"OutputFunctionsParser\" ${JSON.stringify(generations)}`);\n    }\n    const parsedResult = JSON.parse(result);\n    if (this.argsOnly) {\n      return parsedResult;\n    }\n    parsedResult.arguments = JSON.parse(parsedResult.arguments);\n    return parsedResult;\n  }\n}\n/**\n * Class for parsing the output of an LLM into a JSON object and returning\n * a specific attribute. Uses an instance of `JsonOutputFunctionsParser`\n * to parse the output.\n */\nexport class JsonKeyOutputFunctionsParser extends BaseLLMOutputParser {\n  static lc_name() {\n    return \"JsonKeyOutputFunctionsParser\";\n  }\n  constructor(fields) {\n    super(fields);\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain\", \"chains\", \"openai_functions\"]\n    });\n    Object.defineProperty(this, \"lc_serializable\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, \"outputParser\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new JsonOutputFunctionsParser()\n    });\n    Object.defineProperty(this, \"attrName\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.attrName = fields.attrName;\n  }\n  /**\n   * Parses the output and returns a specific attribute of the parsed JSON\n   * object.\n   * @param generations The output of the LLM to parse.\n   * @returns The value of a specific attribute of the parsed JSON object.\n   */\n  async parseResult(generations) {\n    const result = await this.outputParser.parseResult(generations);\n    return result[this.attrName];\n  }\n}","map":{"version":3,"names":["BaseLLMOutputParser","OutputFunctionsParser","lc_name","constructor","config","Object","defineProperty","enumerable","configurable","writable","value","argsOnly","parseResult","generations","gen","functionCall","message","additional_kwargs","function_call","Error","JSON","stringify","arguments","JsonOutputFunctionsParser","outputParser","result","parsedResult","parse","JsonKeyOutputFunctionsParser","fields","attrName"],"sources":["/Users/mayamagavi/instalily/case-study/node_modules/langchain/dist/output_parsers/openai_functions.js"],"sourcesContent":["import { BaseLLMOutputParser } from \"../schema/output_parser.js\";\n/**\n * Class for parsing the output of an LLM. Can be configured to return\n * only the arguments of the function call in the output.\n */\nexport class OutputFunctionsParser extends BaseLLMOutputParser {\n    static lc_name() {\n        return \"OutputFunctionsParser\";\n    }\n    constructor(config) {\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"chains\", \"openai_functions\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"argsOnly\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.argsOnly = config?.argsOnly ?? this.argsOnly;\n    }\n    /**\n     * Parses the output and returns a string representation of the function\n     * call or its arguments.\n     * @param generations The output of the LLM to parse.\n     * @returns A string representation of the function call or its arguments.\n     */\n    async parseResult(generations) {\n        if (\"message\" in generations[0]) {\n            const gen = generations[0];\n            const functionCall = gen.message.additional_kwargs.function_call;\n            if (!functionCall) {\n                throw new Error(`No function_call in message ${JSON.stringify(generations)}`);\n            }\n            if (!functionCall.arguments) {\n                throw new Error(`No arguments in function_call ${JSON.stringify(generations)}`);\n            }\n            if (this.argsOnly) {\n                return functionCall.arguments;\n            }\n            return JSON.stringify(functionCall);\n        }\n        else {\n            throw new Error(`No message in generations ${JSON.stringify(generations)}`);\n        }\n    }\n}\n/**\n * Class for parsing the output of an LLM into a JSON object. Uses an\n * instance of `OutputFunctionsParser` to parse the output.\n */\nexport class JsonOutputFunctionsParser extends BaseLLMOutputParser {\n    static lc_name() {\n        return \"JsonOutputFunctionsParser\";\n    }\n    constructor(config) {\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"chains\", \"openai_functions\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argsOnly\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.argsOnly = config?.argsOnly ?? this.argsOnly;\n        this.outputParser = new OutputFunctionsParser(config);\n    }\n    /**\n     * Parses the output and returns a JSON object. If `argsOnly` is true,\n     * only the arguments of the function call are returned.\n     * @param generations The output of the LLM to parse.\n     * @returns A JSON object representation of the function call or its arguments.\n     */\n    async parseResult(generations) {\n        const result = await this.outputParser.parseResult(generations);\n        if (!result) {\n            throw new Error(`No result from \"OutputFunctionsParser\" ${JSON.stringify(generations)}`);\n        }\n        const parsedResult = JSON.parse(result);\n        if (this.argsOnly) {\n            return parsedResult;\n        }\n        parsedResult.arguments = JSON.parse(parsedResult.arguments);\n        return parsedResult;\n    }\n}\n/**\n * Class for parsing the output of an LLM into a JSON object and returning\n * a specific attribute. Uses an instance of `JsonOutputFunctionsParser`\n * to parse the output.\n */\nexport class JsonKeyOutputFunctionsParser extends BaseLLMOutputParser {\n    static lc_name() {\n        return \"JsonKeyOutputFunctionsParser\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"chains\", \"openai_functions\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new JsonOutputFunctionsParser()\n        });\n        Object.defineProperty(this, \"attrName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.attrName = fields.attrName;\n    }\n    /**\n     * Parses the output and returns a specific attribute of the parsed JSON\n     * object.\n     * @param generations The output of the LLM to parse.\n     * @returns The value of a specific attribute of the parsed JSON object.\n     */\n    async parseResult(generations) {\n        const result = await this.outputParser.parseResult(generations);\n        return result[this.attrName];\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}