{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ProductLauncher_product;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ProductLauncher = void 0;\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst fs_1 = require(\"fs\");\nconst os_1 = __importStar(require(\"os\"));\nconst path_1 = require(\"path\");\nconst browsers_1 = require(\"@puppeteer/browsers\");\nconst Browser_js_1 = require(\"../common/Browser.js\");\nconst Connection_js_1 = require(\"../common/Connection.js\");\nconst Errors_js_1 = require(\"../common/Errors.js\");\nconst NodeWebSocketTransport_js_1 = require(\"../common/NodeWebSocketTransport.js\");\nconst util_js_1 = require(\"../common/util.js\");\nconst PipeTransport_js_1 = require(\"./PipeTransport.js\");\n/**\n * Describes a launcher - a class that is able to create and launch a browser instance.\n *\n * @public\n */\nclass ProductLauncher {\n  /**\n   * @internal\n   */\n  constructor(puppeteer, product) {\n    _ProductLauncher_product.set(this, void 0);\n    this.puppeteer = puppeteer;\n    __classPrivateFieldSet(this, _ProductLauncher_product, product, \"f\");\n  }\n  get product() {\n    return __classPrivateFieldGet(this, _ProductLauncher_product, \"f\");\n  }\n  async launch(options = {}) {\n    const {\n      dumpio = false,\n      env = process.env,\n      handleSIGINT = true,\n      handleSIGTERM = true,\n      handleSIGHUP = true,\n      ignoreHTTPSErrors = false,\n      defaultViewport = {\n        width: 800,\n        height: 600\n      },\n      slowMo = 0,\n      timeout = 30000,\n      waitForInitialPage = true,\n      protocol,\n      protocolTimeout\n    } = options;\n    const launchArgs = await this.computeLaunchArguments(options);\n    const usePipe = launchArgs.args.includes('--remote-debugging-pipe');\n    const onProcessExit = async () => {\n      await this.cleanUserDataDir(launchArgs.userDataDir, {\n        isTemp: launchArgs.isTempUserDataDir\n      });\n    };\n    const browserProcess = (0, browsers_1.launch)({\n      executablePath: launchArgs.executablePath,\n      args: launchArgs.args,\n      handleSIGHUP,\n      handleSIGTERM,\n      handleSIGINT,\n      dumpio,\n      env,\n      pipe: usePipe,\n      onExit: onProcessExit\n    });\n    let browser;\n    let connection;\n    let closing = false;\n    const browserCloseCallback = async () => {\n      if (closing) {\n        return;\n      }\n      closing = true;\n      await this.closeBrowser(browserProcess, connection);\n    };\n    try {\n      if (__classPrivateFieldGet(this, _ProductLauncher_product, \"f\") === 'firefox' && protocol === 'webDriverBiDi') {\n        browser = await this.createBiDiBrowser(browserProcess, browserCloseCallback, {\n          timeout,\n          protocolTimeout,\n          slowMo\n        });\n      } else {\n        if (usePipe) {\n          connection = await this.createCDPPipeConnection(browserProcess, {\n            timeout,\n            protocolTimeout,\n            slowMo\n          });\n        } else {\n          connection = await this.createCDPSocketConnection(browserProcess, {\n            timeout,\n            protocolTimeout,\n            slowMo\n          });\n        }\n        if (protocol === 'webDriverBiDi') {\n          browser = await this.createBiDiOverCDPBrowser(browserProcess, connection, browserCloseCallback);\n        } else {\n          browser = await Browser_js_1.CDPBrowser._create(this.product, connection, [], ignoreHTTPSErrors, defaultViewport, browserProcess.nodeProcess, browserCloseCallback, options.targetFilter);\n        }\n      }\n    } catch (error) {\n      browserCloseCallback();\n      if (error instanceof browsers_1.TimeoutError) {\n        throw new Errors_js_1.TimeoutError(error.message);\n      }\n      throw error;\n    }\n    if (waitForInitialPage && protocol !== 'webDriverBiDi') {\n      await this.waitForPageTarget(browser, timeout);\n    }\n    return browser;\n  }\n  executablePath() {\n    throw new Error('Not implemented');\n  }\n  defaultArgs() {\n    throw new Error('Not implemented');\n  }\n  /**\n   * Set only for Firefox, after the launcher resolves the `latest` revision to\n   * the actual revision.\n   * @internal\n   */\n  getActualBrowserRevision() {\n    return this.actualBrowserRevision;\n  }\n  async computeLaunchArguments() {\n    throw new Error('Not implemented');\n  }\n  async cleanUserDataDir() {\n    throw new Error('Not implemented');\n  }\n  /**\n   * @internal\n   */\n  async closeBrowser(browserProcess, connection) {\n    if (connection) {\n      // Attempt to close the browser gracefully\n      try {\n        await connection.closeBrowser();\n        await browserProcess.hasClosed();\n      } catch (error) {\n        (0, util_js_1.debugError)(error);\n        await browserProcess.close();\n      }\n    } else {\n      await browserProcess.close();\n    }\n  }\n  /**\n   * @internal\n   */\n  async waitForPageTarget(browser, timeout) {\n    try {\n      await browser.waitForTarget(t => {\n        return t.type() === 'page';\n      }, {\n        timeout\n      });\n    } catch (error) {\n      await browser.close();\n      throw error;\n    }\n  }\n  /**\n   * @internal\n   */\n  async createCDPSocketConnection(browserProcess, opts) {\n    const browserWSEndpoint = await browserProcess.waitForLineOutput(browsers_1.CDP_WEBSOCKET_ENDPOINT_REGEX, opts.timeout);\n    const transport = await NodeWebSocketTransport_js_1.NodeWebSocketTransport.create(browserWSEndpoint);\n    return new Connection_js_1.Connection(browserWSEndpoint, transport, opts.slowMo, opts.protocolTimeout);\n  }\n  /**\n   * @internal\n   */\n  async createCDPPipeConnection(browserProcess, opts) {\n    // stdio was assigned during start(), and the 'pipe' option there adds the\n    // 4th and 5th items to stdio array\n    const {\n      3: pipeWrite,\n      4: pipeRead\n    } = browserProcess.nodeProcess.stdio;\n    const transport = new PipeTransport_js_1.PipeTransport(pipeWrite, pipeRead);\n    return new Connection_js_1.Connection('', transport, opts.slowMo, opts.protocolTimeout);\n  }\n  /**\n   * @internal\n   */\n  async createBiDiOverCDPBrowser(browserProcess, connection, closeCallback) {\n    const BiDi = await Promise.resolve().then(() => __importStar(require( /* webpackIgnore: true */'../common/bidi/bidi.js')));\n    const bidiConnection = await BiDi.connectBidiOverCDP(connection);\n    return await BiDi.Browser.create({\n      connection: bidiConnection,\n      closeCallback,\n      process: browserProcess.nodeProcess\n    });\n  }\n  /**\n   * @internal\n   */\n  async createBiDiBrowser(browserProcess, closeCallback, opts) {\n    const browserWSEndpoint = (await browserProcess.waitForLineOutput(browsers_1.WEBDRIVER_BIDI_WEBSOCKET_ENDPOINT_REGEX, opts.timeout)) + '/session';\n    const transport = await NodeWebSocketTransport_js_1.NodeWebSocketTransport.create(browserWSEndpoint);\n    const BiDi = await Promise.resolve().then(() => __importStar(require( /* webpackIgnore: true */'../common/bidi/bidi.js')));\n    const bidiConnection = new BiDi.Connection(transport, opts.slowMo, opts.protocolTimeout);\n    return await BiDi.Browser.create({\n      connection: bidiConnection,\n      closeCallback,\n      process: browserProcess.nodeProcess\n    });\n  }\n  /**\n   * @internal\n   */\n  getProfilePath() {\n    var _a;\n    return (0, path_1.join)((_a = this.puppeteer.configuration.temporaryDirectory) !== null && _a !== void 0 ? _a : (0, os_1.tmpdir)(), `puppeteer_dev_${this.product}_profile-`);\n  }\n  /**\n   * @internal\n   */\n  resolveExecutablePath() {\n    const executablePath = this.puppeteer.configuration.executablePath;\n    if (executablePath) {\n      if (!(0, fs_1.existsSync)(executablePath)) {\n        throw new Error(`Tried to find the browser at the configured path (${executablePath}), but no executable was found.`);\n      }\n      return executablePath;\n    }\n    const ubuntuChromiumPath = '/usr/bin/chromium-browser';\n    if (this.product === 'chrome' && os_1.default.platform() !== 'darwin' && os_1.default.arch() === 'arm64' && (0, fs_1.existsSync)(ubuntuChromiumPath)) {\n      return ubuntuChromiumPath;\n    }\n    const browserFetcher = this.puppeteer.createBrowserFetcher({\n      product: this.product,\n      path: this.puppeteer.defaultDownloadPath\n    });\n    const revisionInfo = browserFetcher.revisionInfo(this.puppeteer.browserRevision);\n    if (!revisionInfo.local) {\n      if (this.puppeteer.configuration.browserRevision) {\n        throw new Error(`Tried to find the browser at the configured path (${revisionInfo.executablePath}) for revision ${this.puppeteer.browserRevision}, but no executable was found.`);\n      }\n      switch (this.product) {\n        case 'chrome':\n          throw new Error(`Could not find Chromium (rev. ${this.puppeteer.browserRevision}). This can occur if either\\n` + ' 1. you did not perform an installation before running the script (e.g. `npm install`) or\\n' + ` 2. your cache path is incorrectly configured (which is: ${this.puppeteer.configuration.cacheDirectory}).\\n` + 'For (2), check out our guide on configuring puppeteer at https://pptr.dev/guides/configuration.');\n        case 'firefox':\n          throw new Error(`Could not find Firefox (rev. ${this.puppeteer.browserRevision}). This can occur if either\\n` + ' 1. you did not perform an installation for Firefox before running the script (e.g. `PUPPETEER_PRODUCT=firefox npm install`) or\\n' + ` 2. your cache path is incorrectly configured (which is: ${this.puppeteer.configuration.cacheDirectory}).\\n` + 'For (2), check out our guide on configuring puppeteer at https://pptr.dev/guides/configuration.');\n      }\n    }\n    return revisionInfo.executablePath;\n  }\n}\nexports.ProductLauncher = ProductLauncher;\n_ProductLauncher_product = new WeakMap();","map":{"version":3,"names":["fs_1","require","os_1","__importStar","path_1","browsers_1","Browser_js_1","Connection_js_1","Errors_js_1","NodeWebSocketTransport_js_1","util_js_1","PipeTransport_js_1","ProductLauncher","constructor","puppeteer","product","_ProductLauncher_product","set","__classPrivateFieldSet","__classPrivateFieldGet","launch","options","dumpio","env","process","handleSIGINT","handleSIGTERM","handleSIGHUP","ignoreHTTPSErrors","defaultViewport","width","height","slowMo","timeout","waitForInitialPage","protocol","protocolTimeout","launchArgs","computeLaunchArguments","usePipe","args","includes","onProcessExit","cleanUserDataDir","userDataDir","isTemp","isTempUserDataDir","browserProcess","executablePath","pipe","onExit","browser","connection","closing","browserCloseCallback","closeBrowser","createBiDiBrowser","createCDPPipeConnection","createCDPSocketConnection","createBiDiOverCDPBrowser","CDPBrowser","_create","nodeProcess","targetFilter","error","TimeoutError","message","waitForPageTarget","Error","defaultArgs","getActualBrowserRevision","actualBrowserRevision","hasClosed","debugError","close","waitForTarget","t","type","opts","browserWSEndpoint","waitForLineOutput","CDP_WEBSOCKET_ENDPOINT_REGEX","transport","NodeWebSocketTransport","create","Connection","pipeWrite","pipeRead","stdio","PipeTransport","closeCallback","BiDi","Promise","resolve","then","bidiConnection","connectBidiOverCDP","Browser","WEBDRIVER_BIDI_WEBSOCKET_ENDPOINT_REGEX","getProfilePath","join","_a","configuration","temporaryDirectory","tmpdir","resolveExecutablePath","existsSync","ubuntuChromiumPath","default","platform","arch","browserFetcher","createBrowserFetcher","path","defaultDownloadPath","revisionInfo","browserRevision","local","cacheDirectory","exports"],"sources":["../../../../src/node/ProductLauncher.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;AAeA,MAAAA,IAAA,GAAAC,OAAA;AACA,MAAAC,IAAA,GAAAC,YAAA,CAAAF,OAAA;AACA,MAAAG,MAAA,GAAAH,OAAA;AAEA,MAAAI,UAAA,GAAAJ,OAAA;AAQA,MAAAK,YAAA,GAAAL,OAAA;AACA,MAAAM,eAAA,GAAAN,OAAA;AACA,MAAAO,WAAA,GAAAP,OAAA;AACA,MAAAQ,2BAAA,GAAAR,OAAA;AAEA,MAAAS,SAAA,GAAAT,OAAA;AAOA,MAAAU,kBAAA,GAAAV,OAAA;AAaA;;;;;AAKA,MAAaW,eAAe;EAa1B;;;EAGAC,YAAYC,SAAwB,EAAEC,OAAgB;IAftDC,wBAAA,CAAAC,GAAA;IAgBE,IAAI,CAACH,SAAS,GAAGA,SAAS;IAC1BI,sBAAA,KAAI,EAAAF,wBAAA,EAAYD,OAAO;EACzB;EAEA,IAAIA,OAAOA,CAAA;IACT,OAAOI,sBAAA,KAAI,EAAAH,wBAAA,MAAS;EACtB;EAEA,MAAMI,MAAMA,CAACC,OAAA,GAAsC,EAAE;IACnD,MAAM;MACJC,MAAM,GAAG,KAAK;MACdC,GAAG,GAAGC,OAAO,CAACD,GAAG;MACjBE,YAAY,GAAG,IAAI;MACnBC,aAAa,GAAG,IAAI;MACpBC,YAAY,GAAG,IAAI;MACnBC,iBAAiB,GAAG,KAAK;MACzBC,eAAe,GAAG;QAACC,KAAK,EAAE,GAAG;QAAEC,MAAM,EAAE;MAAG,CAAC;MAC3CC,MAAM,GAAG,CAAC;MACVC,OAAO,GAAG,KAAK;MACfC,kBAAkB,GAAG,IAAI;MACzBC,QAAQ;MACRC;IAAe,CAChB,GAAGf,OAAO;IAEX,MAAMgB,UAAU,GAAG,MAAM,IAAI,CAACC,sBAAsB,CAACjB,OAAO,CAAC;IAE7D,MAAMkB,OAAO,GAAGF,UAAU,CAACG,IAAI,CAACC,QAAQ,CAAC,yBAAyB,CAAC;IAEnE,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAW;MAC/B,MAAM,IAAI,CAACC,gBAAgB,CAACN,UAAU,CAACO,WAAW,EAAE;QAClDC,MAAM,EAAER,UAAU,CAACS;OACpB,CAAC;IACJ,CAAC;IAED,MAAMC,cAAc,GAAG,IAAA1C,UAAA,CAAAe,MAAM,EAAC;MAC5B4B,cAAc,EAAEX,UAAU,CAACW,cAAc;MACzCR,IAAI,EAAEH,UAAU,CAACG,IAAI;MACrBb,YAAY;MACZD,aAAa;MACbD,YAAY;MACZH,MAAM;MACNC,GAAG;MACH0B,IAAI,EAAEV,OAAO;MACbW,MAAM,EAAER;KACT,CAAC;IAEF,IAAIS,OAAgB;IACpB,IAAIC,UAAsB;IAC1B,IAAIC,OAAO,GAAG,KAAK;IAEnB,MAAMC,oBAAoB,GAAG,MAAAA,CAAA,KAAW;MACtC,IAAID,OAAO,EAAE;QACX;;MAEFA,OAAO,GAAG,IAAI;MACd,MAAM,IAAI,CAACE,YAAY,CAACR,cAAc,EAAEK,UAAU,CAAC;IACrD,CAAC;IAED,IAAI;MACF,IAAIjC,sBAAA,KAAI,EAAAH,wBAAA,MAAS,KAAK,SAAS,IAAImB,QAAQ,KAAK,eAAe,EAAE;QAC/DgB,OAAO,GAAG,MAAM,IAAI,CAACK,iBAAiB,CACpCT,cAAc,EACdO,oBAAoB,EACpB;UACErB,OAAO;UACPG,eAAe;UACfJ;SACD,CACF;OACF,MAAM;QACL,IAAIO,OAAO,EAAE;UACXa,UAAU,GAAG,MAAM,IAAI,CAACK,uBAAuB,CAACV,cAAc,EAAE;YAC9Dd,OAAO;YACPG,eAAe;YACfJ;WACD,CAAC;SACH,MAAM;UACLoB,UAAU,GAAG,MAAM,IAAI,CAACM,yBAAyB,CAACX,cAAc,EAAE;YAChEd,OAAO;YACPG,eAAe;YACfJ;WACD,CAAC;;QAEJ,IAAIG,QAAQ,KAAK,eAAe,EAAE;UAChCgB,OAAO,GAAG,MAAM,IAAI,CAACQ,wBAAwB,CAC3CZ,cAAc,EACdK,UAAU,EACVE,oBAAoB,CACrB;SACF,MAAM;UACLH,OAAO,GAAG,MAAM7C,YAAA,CAAAsD,UAAU,CAACC,OAAO,CAChC,IAAI,CAAC9C,OAAO,EACZqC,UAAU,EACV,EAAE,EACFxB,iBAAiB,EACjBC,eAAe,EACfkB,cAAc,CAACe,WAAW,EAC1BR,oBAAoB,EACpBjC,OAAO,CAAC0C,YAAY,CACrB;;;KAGN,CAAC,OAAOC,KAAK,EAAE;MACdV,oBAAoB,EAAE;MACtB,IAAIU,KAAK,YAAY3D,UAAA,CAAA4D,YAAoB,EAAE;QACzC,MAAM,IAAIzD,WAAA,CAAAyD,YAAY,CAACD,KAAK,CAACE,OAAO,CAAC;;MAEvC,MAAMF,KAAK;;IAGb,IAAI9B,kBAAkB,IAAIC,QAAQ,KAAK,eAAe,EAAE;MACtD,MAAM,IAAI,CAACgC,iBAAiB,CAAChB,OAAO,EAAElB,OAAO,CAAC;;IAGhD,OAAOkB,OAAO;EAChB;EAGAH,cAAcA,CAAA;IACZ,MAAM,IAAIoB,KAAK,CAAC,iBAAiB,CAAC;EACpC;EAGAC,WAAWA,CAAA;IACT,MAAM,IAAID,KAAK,CAAC,iBAAiB,CAAC;EACpC;EAEA;;;;;EAKAE,wBAAwBA,CAAA;IACtB,OAAO,IAAI,CAACC,qBAAqB;EACnC;EAQU,MAAMjC,sBAAsBA,CAAA;IACpC,MAAM,IAAI8B,KAAK,CAAC,iBAAiB,CAAC;EACpC;EASU,MAAMzB,gBAAgBA,CAAA;IAC9B,MAAM,IAAIyB,KAAK,CAAC,iBAAiB,CAAC;EACpC;EAEA;;;EAGU,MAAMb,YAAYA,CAC1BR,cAAyC,EACzCK,UAAuB;IAEvB,IAAIA,UAAU,EAAE;MACd;MACA,IAAI;QACF,MAAMA,UAAU,CAACG,YAAY,EAAE;QAC/B,MAAMR,cAAc,CAACyB,SAAS,EAAE;OACjC,CAAC,OAAOR,KAAK,EAAE;QACd,IAAAtD,SAAA,CAAA+D,UAAU,EAACT,KAAK,CAAC;QACjB,MAAMjB,cAAc,CAAC2B,KAAK,EAAE;;KAE/B,MAAM;MACL,MAAM3B,cAAc,CAAC2B,KAAK,EAAE;;EAEhC;EAEA;;;EAGU,MAAMP,iBAAiBA,CAC/BhB,OAAgB,EAChBlB,OAAe;IAEf,IAAI;MACF,MAAMkB,OAAO,CAACwB,aAAa,CACzBC,CAAC,IAAG;QACF,OAAOA,CAAC,CAACC,IAAI,EAAE,KAAK,MAAM;MAC5B,CAAC,EACD;QAAC5C;MAAO,CAAC,CACV;KACF,CAAC,OAAO+B,KAAK,EAAE;MACd,MAAMb,OAAO,CAACuB,KAAK,EAAE;MACrB,MAAMV,KAAK;;EAEf;EAEA;;;EAGU,MAAMN,yBAAyBA,CACvCX,cAAyC,EACzC+B,IAA4E;IAE5E,MAAMC,iBAAiB,GAAG,MAAMhC,cAAc,CAACiC,iBAAiB,CAC9D3E,UAAA,CAAA4E,4BAA4B,EAC5BH,IAAI,CAAC7C,OAAO,CACb;IACD,MAAMiD,SAAS,GAAG,MAAMzE,2BAAA,CAAA0E,sBAAkB,CAACC,MAAM,CAACL,iBAAiB,CAAC;IACpE,OAAO,IAAIxE,eAAA,CAAA8E,UAAU,CACnBN,iBAAiB,EACjBG,SAAS,EACTJ,IAAI,CAAC9C,MAAM,EACX8C,IAAI,CAAC1C,eAAe,CACrB;EACH;EAEA;;;EAGU,MAAMqB,uBAAuBA,CACrCV,cAAyC,EACzC+B,IAA4E;IAE5E;IACA;IACA,MAAM;MAAC,CAAC,EAAEQ,SAAS;MAAE,CAAC,EAAEC;IAAQ,CAAC,GAAGxC,cAAc,CAACe,WAAW,CAAC0B,KAAK;IACpE,MAAMN,SAAS,GAAG,IAAIvE,kBAAA,CAAA8E,aAAa,CACjCH,SAAkC,EAClCC,QAAiC,CAClC;IACD,OAAO,IAAIhF,eAAA,CAAA8E,UAAU,CAAC,EAAE,EAAEH,SAAS,EAAEJ,IAAI,CAAC9C,MAAM,EAAE8C,IAAI,CAAC1C,eAAe,CAAC;EACzE;EAEA;;;EAGU,MAAMuB,wBAAwBA,CACtCZ,cAAyC,EACzCK,UAAsB,EACtBsC,aAAmC;IAEnC,MAAMC,IAAI,GAAG,MAAAC,OAAA,CAAAC,OAAA,GAAAC,IAAA,OAAA3F,YAAA,CAAAF,OAAA,EACX,yBAA0B,wBAAwB,GACnD;IACD,MAAM8F,cAAc,GAAG,MAAMJ,IAAI,CAACK,kBAAkB,CAAC5C,UAAU,CAAC;IAChE,OAAO,MAAMuC,IAAI,CAACM,OAAO,CAACb,MAAM,CAAC;MAC/BhC,UAAU,EAAE2C,cAAc;MAC1BL,aAAa;MACblE,OAAO,EAAEuB,cAAc,CAACe;KACzB,CAAC;EACJ;EAEA;;;EAGU,MAAMN,iBAAiBA,CAC/BT,cAAyC,EACzC2C,aAAmC,EACnCZ,IAA4E;IAE5E,MAAMC,iBAAiB,GACrB,CAAC,MAAMhC,cAAc,CAACiC,iBAAiB,CACrC3E,UAAA,CAAA6F,uCAAuC,EACvCpB,IAAI,CAAC7C,OAAO,CACb,IAAI,UAAU;IACjB,MAAMiD,SAAS,GAAG,MAAMzE,2BAAA,CAAA0E,sBAAkB,CAACC,MAAM,CAACL,iBAAiB,CAAC;IACpE,MAAMY,IAAI,GAAG,MAAAC,OAAA,CAAAC,OAAA,GAAAC,IAAA,OAAA3F,YAAA,CAAAF,OAAA,EACX,yBAA0B,wBAAwB,GACnD;IACD,MAAM8F,cAAc,GAAG,IAAIJ,IAAI,CAACN,UAAU,CACxCH,SAAS,EACTJ,IAAI,CAAC9C,MAAM,EACX8C,IAAI,CAAC1C,eAAe,CACrB;IACD,OAAO,MAAMuD,IAAI,CAACM,OAAO,CAACb,MAAM,CAAC;MAC/BhC,UAAU,EAAE2C,cAAc;MAC1BL,aAAa;MACblE,OAAO,EAAEuB,cAAc,CAACe;KACzB,CAAC;EACJ;EAEA;;;EAGUqC,cAAcA,CAAA;;IACtB,OAAO,IAAA/F,MAAA,CAAAgG,IAAI,EACT,CAAAC,EAAA,OAAI,CAACvF,SAAS,CAACwF,aAAa,CAACC,kBAAkB,cAAAF,EAAA,cAAAA,EAAA,GAAI,IAAAnG,IAAA,CAAAsG,MAAM,GAAE,EAC3D,iBAAiB,IAAI,CAACzF,OAAO,WAAW,CACzC;EACH;EAEA;;;EAGU0F,qBAAqBA,CAAA;IAC7B,MAAMzD,cAAc,GAAG,IAAI,CAAClC,SAAS,CAACwF,aAAa,CAACtD,cAAc;IAClE,IAAIA,cAAc,EAAE;MAClB,IAAI,CAAC,IAAAhD,IAAA,CAAA0G,UAAU,EAAC1D,cAAc,CAAC,EAAE;QAC/B,MAAM,IAAIoB,KAAK,CACb,qDAAqDpB,cAAc,iCAAiC,CACrG;;MAEH,OAAOA,cAAc;;IAGvB,MAAM2D,kBAAkB,GAAG,2BAA2B;IACtD,IACE,IAAI,CAAC5F,OAAO,KAAK,QAAQ,IACzBb,IAAA,CAAA0G,OAAE,CAACC,QAAQ,EAAE,KAAK,QAAQ,IAC1B3G,IAAA,CAAA0G,OAAE,CAACE,IAAI,EAAE,KAAK,OAAO,IACrB,IAAA9G,IAAA,CAAA0G,UAAU,EAACC,kBAAkB,CAAC,EAC9B;MACA,OAAOA,kBAAkB;;IAG3B,MAAMI,cAAc,GAAG,IAAI,CAACjG,SAAS,CAACkG,oBAAoB,CAAC;MACzDjG,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBkG,IAAI,EAAE,IAAI,CAACnG,SAAS,CAACoG;KACtB,CAAC;IAEF,MAAMC,YAAY,GAAGJ,cAAc,CAACI,YAAY,CAC9C,IAAI,CAACrG,SAAS,CAACsG,eAAe,CAC/B;IACD,IAAI,CAACD,YAAY,CAACE,KAAK,EAAE;MACvB,IAAI,IAAI,CAACvG,SAAS,CAACwF,aAAa,CAACc,eAAe,EAAE;QAChD,MAAM,IAAIhD,KAAK,CACb,qDAAqD+C,YAAY,CAACnE,cAAc,kBAAkB,IAAI,CAAClC,SAAS,CAACsG,eAAe,gCAAgC,CACjK;;MAEH,QAAQ,IAAI,CAACrG,OAAO;QAClB,KAAK,QAAQ;UACX,MAAM,IAAIqD,KAAK,CACb,iCAAiC,IAAI,CAACtD,SAAS,CAACsG,eAAe,+BAA+B,GAC5F,6FAA6F,GAC7F,4DAA4D,IAAI,CAACtG,SAAS,CAACwF,aAAa,CAACgB,cAAc,MAAM,GAC7G,iGAAiG,CACpG;QACH,KAAK,SAAS;UACZ,MAAM,IAAIlD,KAAK,CACb,gCAAgC,IAAI,CAACtD,SAAS,CAACsG,eAAe,+BAA+B,GAC3F,mIAAmI,GACnI,4DAA4D,IAAI,CAACtG,SAAS,CAACwF,aAAa,CAACgB,cAAc,MAAM,GAC7G,iGAAiG,CACpG;;;IAGP,OAAOH,YAAY,CAACnE,cAAc;EACpC;;AA9WFuE,OAAA,CAAA3G,eAAA,GAAAA,eAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}