{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar _FrameManager_instances, _FrameManager_page, _FrameManager_networkManager, _FrameManager_timeoutSettings, _FrameManager_contextIdToContext, _FrameManager_isolatedWorlds, _FrameManager_client, _FrameManager_frameNavigatedReceived, _FrameManager_deviceRequestPromptManagerMap, _FrameManager_onLifecycleEvent, _FrameManager_onFrameStartedLoading, _FrameManager_onFrameStoppedLoading, _FrameManager_handleFrameTree, _FrameManager_onFrameAttached, _FrameManager_onFrameNavigated, _FrameManager_createIsolatedWorld, _FrameManager_onFrameNavigatedWithinDocument, _FrameManager_onFrameDetached, _FrameManager_onExecutionContextCreated, _FrameManager_onExecutionContextDestroyed, _FrameManager_onExecutionContextsCleared, _FrameManager_removeFramesRecursively;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FrameManager = exports.FrameManagerEmittedEvents = void 0;\nconst assert_js_1 = require(\"../util/assert.js\");\nconst ErrorLike_js_1 = require(\"../util/ErrorLike.js\");\nconst Connection_js_1 = require(\"./Connection.js\");\nconst DeviceRequestPrompt_js_1 = require(\"./DeviceRequestPrompt.js\");\nconst EventEmitter_js_1 = require(\"./EventEmitter.js\");\nconst ExecutionContext_js_1 = require(\"./ExecutionContext.js\");\nconst Frame_js_1 = require(\"./Frame.js\");\nconst FrameTree_js_1 = require(\"./FrameTree.js\");\nconst IsolatedWorlds_js_1 = require(\"./IsolatedWorlds.js\");\nconst NetworkManager_js_1 = require(\"./NetworkManager.js\");\nconst util_js_1 = require(\"./util.js\");\nconst UTILITY_WORLD_NAME = '__puppeteer_utility_world__';\n/**\n * We use symbols to prevent external parties listening to these events.\n * They are internal to Puppeteer.\n *\n * @internal\n */\nexports.FrameManagerEmittedEvents = {\n  FrameAttached: Symbol('FrameManager.FrameAttached'),\n  FrameNavigated: Symbol('FrameManager.FrameNavigated'),\n  FrameDetached: Symbol('FrameManager.FrameDetached'),\n  FrameSwapped: Symbol('FrameManager.FrameSwapped'),\n  LifecycleEvent: Symbol('FrameManager.LifecycleEvent'),\n  FrameNavigatedWithinDocument: Symbol('FrameManager.FrameNavigatedWithinDocument'),\n  ExecutionContextCreated: Symbol('FrameManager.ExecutionContextCreated'),\n  ExecutionContextDestroyed: Symbol('FrameManager.ExecutionContextDestroyed')\n};\n/**\n * A frame manager manages the frames for a given {@link Page | page}.\n *\n * @internal\n */\nclass FrameManager extends EventEmitter_js_1.EventEmitter {\n  get timeoutSettings() {\n    return __classPrivateFieldGet(this, _FrameManager_timeoutSettings, \"f\");\n  }\n  get networkManager() {\n    return __classPrivateFieldGet(this, _FrameManager_networkManager, \"f\");\n  }\n  get client() {\n    return __classPrivateFieldGet(this, _FrameManager_client, \"f\");\n  }\n  constructor(client, page, ignoreHTTPSErrors, timeoutSettings) {\n    super();\n    _FrameManager_instances.add(this);\n    _FrameManager_page.set(this, void 0);\n    _FrameManager_networkManager.set(this, void 0);\n    _FrameManager_timeoutSettings.set(this, void 0);\n    _FrameManager_contextIdToContext.set(this, new Map());\n    _FrameManager_isolatedWorlds.set(this, new Set());\n    _FrameManager_client.set(this, void 0);\n    /**\n     * @internal\n     */\n    this._frameTree = new FrameTree_js_1.FrameTree();\n    /**\n     * Set of frame IDs stored to indicate if a frame has received a\n     * frameNavigated event so that frame tree responses could be ignored as the\n     * frameNavigated event usually contains the latest information.\n     */\n    _FrameManager_frameNavigatedReceived.set(this, new Set());\n    _FrameManager_deviceRequestPromptManagerMap.set(this, new WeakMap());\n    __classPrivateFieldSet(this, _FrameManager_client, client, \"f\");\n    __classPrivateFieldSet(this, _FrameManager_page, page, \"f\");\n    __classPrivateFieldSet(this, _FrameManager_networkManager, new NetworkManager_js_1.NetworkManager(client, ignoreHTTPSErrors, this), \"f\");\n    __classPrivateFieldSet(this, _FrameManager_timeoutSettings, timeoutSettings, \"f\");\n    this.setupEventListeners(__classPrivateFieldGet(this, _FrameManager_client, \"f\"));\n  }\n  setupEventListeners(session) {\n    session.on('Page.frameAttached', event => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onFrameAttached).call(this, session, event.frameId, event.parentFrameId);\n    });\n    session.on('Page.frameNavigated', event => {\n      __classPrivateFieldGet(this, _FrameManager_frameNavigatedReceived, \"f\").add(event.frame.id);\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onFrameNavigated).call(this, event.frame);\n    });\n    session.on('Page.navigatedWithinDocument', event => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onFrameNavigatedWithinDocument).call(this, event.frameId, event.url);\n    });\n    session.on('Page.frameDetached', event => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onFrameDetached).call(this, event.frameId, event.reason);\n    });\n    session.on('Page.frameStartedLoading', event => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onFrameStartedLoading).call(this, event.frameId);\n    });\n    session.on('Page.frameStoppedLoading', event => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onFrameStoppedLoading).call(this, event.frameId);\n    });\n    session.on('Runtime.executionContextCreated', event => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onExecutionContextCreated).call(this, event.context, session);\n    });\n    session.on('Runtime.executionContextDestroyed', event => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onExecutionContextDestroyed).call(this, event.executionContextId, session);\n    });\n    session.on('Runtime.executionContextsCleared', () => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onExecutionContextsCleared).call(this, session);\n    });\n    session.on('Page.lifecycleEvent', event => {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onLifecycleEvent).call(this, event);\n    });\n  }\n  async initialize(client = __classPrivateFieldGet(this, _FrameManager_client, \"f\")) {\n    try {\n      const result = await Promise.all([client.send('Page.enable'), client.send('Page.getFrameTree')]);\n      const {\n        frameTree\n      } = result[1];\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_handleFrameTree).call(this, client, frameTree);\n      await Promise.all([client.send('Page.setLifecycleEventsEnabled', {\n        enabled: true\n      }), client.send('Runtime.enable').then(() => {\n        return __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_createIsolatedWorld).call(this, client, UTILITY_WORLD_NAME);\n      }),\n      // TODO: Network manager is not aware of OOP iframes yet.\n      client === __classPrivateFieldGet(this, _FrameManager_client, \"f\") ? __classPrivateFieldGet(this, _FrameManager_networkManager, \"f\").initialize() : Promise.resolve()]);\n    } catch (error) {\n      // The target might have been closed before the initialization finished.\n      if ((0, ErrorLike_js_1.isErrorLike)(error) && (0, Connection_js_1.isTargetClosedError)(error)) {\n        return;\n      }\n      throw error;\n    }\n  }\n  executionContextById(contextId, session = __classPrivateFieldGet(this, _FrameManager_client, \"f\")) {\n    const context = this.getExecutionContextById(contextId, session);\n    (0, assert_js_1.assert)(context, 'INTERNAL ERROR: missing context with id = ' + contextId);\n    return context;\n  }\n  getExecutionContextById(contextId, session = __classPrivateFieldGet(this, _FrameManager_client, \"f\")) {\n    return __classPrivateFieldGet(this, _FrameManager_contextIdToContext, \"f\").get(`${session.id()}:${contextId}`);\n  }\n  page() {\n    return __classPrivateFieldGet(this, _FrameManager_page, \"f\");\n  }\n  mainFrame() {\n    const mainFrame = this._frameTree.getMainFrame();\n    (0, assert_js_1.assert)(mainFrame, 'Requesting main frame too early!');\n    return mainFrame;\n  }\n  frames() {\n    return Array.from(this._frameTree.frames());\n  }\n  frame(frameId) {\n    return this._frameTree.getById(frameId) || null;\n  }\n  onAttachedToTarget(target) {\n    if (target._getTargetInfo().type !== 'iframe') {\n      return;\n    }\n    const frame = this.frame(target._getTargetInfo().targetId);\n    if (frame) {\n      frame.updateClient(target._session());\n    }\n    this.setupEventListeners(target._session());\n    this.initialize(target._session());\n  }\n  /**\n   * @internal\n   */\n  _deviceRequestPromptManager(client) {\n    let manager = __classPrivateFieldGet(this, _FrameManager_deviceRequestPromptManagerMap, \"f\").get(client);\n    if (manager === undefined) {\n      manager = new DeviceRequestPrompt_js_1.DeviceRequestPromptManager(client, __classPrivateFieldGet(this, _FrameManager_timeoutSettings, \"f\"));\n      __classPrivateFieldGet(this, _FrameManager_deviceRequestPromptManagerMap, \"f\").set(client, manager);\n    }\n    return manager;\n  }\n}\nexports.FrameManager = FrameManager;\n_FrameManager_page = new WeakMap(), _FrameManager_networkManager = new WeakMap(), _FrameManager_timeoutSettings = new WeakMap(), _FrameManager_contextIdToContext = new WeakMap(), _FrameManager_isolatedWorlds = new WeakMap(), _FrameManager_client = new WeakMap(), _FrameManager_frameNavigatedReceived = new WeakMap(), _FrameManager_deviceRequestPromptManagerMap = new WeakMap(), _FrameManager_instances = new WeakSet(), _FrameManager_onLifecycleEvent = function _FrameManager_onLifecycleEvent(event) {\n  const frame = this.frame(event.frameId);\n  if (!frame) {\n    return;\n  }\n  frame._onLifecycleEvent(event.loaderId, event.name);\n  this.emit(exports.FrameManagerEmittedEvents.LifecycleEvent, frame);\n}, _FrameManager_onFrameStartedLoading = function _FrameManager_onFrameStartedLoading(frameId) {\n  const frame = this.frame(frameId);\n  if (!frame) {\n    return;\n  }\n  frame._onLoadingStarted();\n}, _FrameManager_onFrameStoppedLoading = function _FrameManager_onFrameStoppedLoading(frameId) {\n  const frame = this.frame(frameId);\n  if (!frame) {\n    return;\n  }\n  frame._onLoadingStopped();\n  this.emit(exports.FrameManagerEmittedEvents.LifecycleEvent, frame);\n}, _FrameManager_handleFrameTree = function _FrameManager_handleFrameTree(session, frameTree) {\n  if (frameTree.frame.parentId) {\n    __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onFrameAttached).call(this, session, frameTree.frame.id, frameTree.frame.parentId);\n  }\n  if (!__classPrivateFieldGet(this, _FrameManager_frameNavigatedReceived, \"f\").has(frameTree.frame.id)) {\n    __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_onFrameNavigated).call(this, frameTree.frame);\n  } else {\n    __classPrivateFieldGet(this, _FrameManager_frameNavigatedReceived, \"f\").delete(frameTree.frame.id);\n  }\n  if (!frameTree.childFrames) {\n    return;\n  }\n  for (const child of frameTree.childFrames) {\n    __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_handleFrameTree).call(this, session, child);\n  }\n}, _FrameManager_onFrameAttached = function _FrameManager_onFrameAttached(session, frameId, parentFrameId) {\n  let frame = this.frame(frameId);\n  if (frame) {\n    if (session && frame.isOOPFrame()) {\n      // If an OOP iframes becomes a normal iframe again\n      // it is first attached to the parent page before\n      // the target is removed.\n      frame.updateClient(session);\n    }\n    return;\n  }\n  frame = new Frame_js_1.Frame(this, frameId, parentFrameId, session);\n  this._frameTree.addFrame(frame);\n  this.emit(exports.FrameManagerEmittedEvents.FrameAttached, frame);\n}, _FrameManager_onFrameNavigated = async function _FrameManager_onFrameNavigated(framePayload) {\n  const frameId = framePayload.id;\n  const isMainFrame = !framePayload.parentId;\n  let frame = this._frameTree.getById(frameId);\n  // Detach all child frames first.\n  if (frame) {\n    for (const child of frame.childFrames()) {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_removeFramesRecursively).call(this, child);\n    }\n  }\n  // Update or create main frame.\n  if (isMainFrame) {\n    if (frame) {\n      // Update frame id to retain frame identity on cross-process navigation.\n      this._frameTree.removeFrame(frame);\n      frame._id = frameId;\n    } else {\n      // Initial main frame navigation.\n      frame = new Frame_js_1.Frame(this, frameId, undefined, __classPrivateFieldGet(this, _FrameManager_client, \"f\"));\n    }\n    this._frameTree.addFrame(frame);\n  }\n  frame = await this._frameTree.waitForFrame(frameId);\n  frame._navigated(framePayload);\n  this.emit(exports.FrameManagerEmittedEvents.FrameNavigated, frame);\n}, _FrameManager_createIsolatedWorld = async function _FrameManager_createIsolatedWorld(session, name) {\n  const key = `${session.id()}:${name}`;\n  if (__classPrivateFieldGet(this, _FrameManager_isolatedWorlds, \"f\").has(key)) {\n    return;\n  }\n  await session.send('Page.addScriptToEvaluateOnNewDocument', {\n    source: `//# sourceURL=${ExecutionContext_js_1.EVALUATION_SCRIPT_URL}`,\n    worldName: name\n  });\n  await Promise.all(this.frames().filter(frame => {\n    return frame._client() === session;\n  }).map(frame => {\n    // Frames might be removed before we send this, so we don't want to\n    // throw an error.\n    return session.send('Page.createIsolatedWorld', {\n      frameId: frame._id,\n      worldName: name,\n      grantUniveralAccess: true\n    }).catch(util_js_1.debugError);\n  }));\n  __classPrivateFieldGet(this, _FrameManager_isolatedWorlds, \"f\").add(key);\n}, _FrameManager_onFrameNavigatedWithinDocument = function _FrameManager_onFrameNavigatedWithinDocument(frameId, url) {\n  const frame = this.frame(frameId);\n  if (!frame) {\n    return;\n  }\n  frame._navigatedWithinDocument(url);\n  this.emit(exports.FrameManagerEmittedEvents.FrameNavigatedWithinDocument, frame);\n  this.emit(exports.FrameManagerEmittedEvents.FrameNavigated, frame);\n}, _FrameManager_onFrameDetached = function _FrameManager_onFrameDetached(frameId, reason) {\n  const frame = this.frame(frameId);\n  if (reason === 'remove') {\n    // Only remove the frame if the reason for the detached event is\n    // an actual removement of the frame.\n    // For frames that become OOP iframes, the reason would be 'swap'.\n    if (frame) {\n      __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_removeFramesRecursively).call(this, frame);\n    }\n  } else if (reason === 'swap') {\n    this.emit(exports.FrameManagerEmittedEvents.FrameSwapped, frame);\n  }\n}, _FrameManager_onExecutionContextCreated = function _FrameManager_onExecutionContextCreated(contextPayload, session) {\n  const auxData = contextPayload.auxData;\n  const frameId = auxData && auxData.frameId;\n  const frame = typeof frameId === 'string' ? this.frame(frameId) : undefined;\n  let world;\n  if (frame) {\n    // Only care about execution contexts created for the current session.\n    if (frame._client() !== session) {\n      return;\n    }\n    if (contextPayload.auxData && contextPayload.auxData['isDefault']) {\n      world = frame.worlds[IsolatedWorlds_js_1.MAIN_WORLD];\n    } else if (contextPayload.name === UTILITY_WORLD_NAME && !frame.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].hasContext()) {\n      // In case of multiple sessions to the same target, there's a race between\n      // connections so we might end up creating multiple isolated worlds.\n      // We can use either.\n      world = frame.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD];\n    }\n  }\n  const context = new ExecutionContext_js_1.ExecutionContext((frame === null || frame === void 0 ? void 0 : frame._client()) || __classPrivateFieldGet(this, _FrameManager_client, \"f\"), contextPayload, world);\n  if (world) {\n    world.setContext(context);\n  }\n  const key = `${session.id()}:${contextPayload.id}`;\n  __classPrivateFieldGet(this, _FrameManager_contextIdToContext, \"f\").set(key, context);\n}, _FrameManager_onExecutionContextDestroyed = function _FrameManager_onExecutionContextDestroyed(executionContextId, session) {\n  const key = `${session.id()}:${executionContextId}`;\n  const context = __classPrivateFieldGet(this, _FrameManager_contextIdToContext, \"f\").get(key);\n  if (!context) {\n    return;\n  }\n  __classPrivateFieldGet(this, _FrameManager_contextIdToContext, \"f\").delete(key);\n  if (context._world) {\n    context._world.clearContext();\n  }\n}, _FrameManager_onExecutionContextsCleared = function _FrameManager_onExecutionContextsCleared(session) {\n  for (const [key, context] of __classPrivateFieldGet(this, _FrameManager_contextIdToContext, \"f\").entries()) {\n    // Make sure to only clear execution contexts that belong\n    // to the current session.\n    if (context._client !== session) {\n      continue;\n    }\n    if (context._world) {\n      context._world.clearContext();\n    }\n    __classPrivateFieldGet(this, _FrameManager_contextIdToContext, \"f\").delete(key);\n  }\n}, _FrameManager_removeFramesRecursively = function _FrameManager_removeFramesRecursively(frame) {\n  for (const child of frame.childFrames()) {\n    __classPrivateFieldGet(this, _FrameManager_instances, \"m\", _FrameManager_removeFramesRecursively).call(this, child);\n  }\n  frame._detach();\n  this._frameTree.removeFrame(frame);\n  this.emit(exports.FrameManagerEmittedEvents.FrameDetached, frame);\n};","map":{"version":3,"names":["assert_js_1","require","ErrorLike_js_1","Connection_js_1","DeviceRequestPrompt_js_1","EventEmitter_js_1","ExecutionContext_js_1","Frame_js_1","FrameTree_js_1","IsolatedWorlds_js_1","NetworkManager_js_1","util_js_1","UTILITY_WORLD_NAME","exports","FrameManagerEmittedEvents","FrameAttached","Symbol","FrameNavigated","FrameDetached","FrameSwapped","LifecycleEvent","FrameNavigatedWithinDocument","ExecutionContextCreated","ExecutionContextDestroyed","FrameManager","EventEmitter","timeoutSettings","__classPrivateFieldGet","_FrameManager_timeoutSettings","networkManager","_FrameManager_networkManager","client","_FrameManager_client","constructor","page","ignoreHTTPSErrors","_FrameManager_page","set","_FrameManager_contextIdToContext","Map","_FrameManager_isolatedWorlds","Set","_frameTree","FrameTree","_FrameManager_frameNavigatedReceived","_FrameManager_deviceRequestPromptManagerMap","WeakMap","__classPrivateFieldSet","NetworkManager","setupEventListeners","session","on","event","_FrameManager_instances","_FrameManager_onFrameAttached","call","frameId","parentFrameId","add","frame","id","_FrameManager_onFrameNavigated","_FrameManager_onFrameNavigatedWithinDocument","url","_FrameManager_onFrameDetached","reason","_FrameManager_onFrameStartedLoading","_FrameManager_onFrameStoppedLoading","_FrameManager_onExecutionContextCreated","context","_FrameManager_onExecutionContextDestroyed","executionContextId","_FrameManager_onExecutionContextsCleared","_FrameManager_onLifecycleEvent","initialize","result","Promise","all","send","frameTree","_FrameManager_handleFrameTree","enabled","then","_FrameManager_createIsolatedWorld","resolve","error","isErrorLike","isTargetClosedError","executionContextById","contextId","getExecutionContextById","assert","get","mainFrame","getMainFrame","frames","Array","from","getById","onAttachedToTarget","target","_getTargetInfo","type","targetId","updateClient","_session","_deviceRequestPromptManager","manager","undefined","DeviceRequestPromptManager","_onLifecycleEvent","loaderId","name","emit","_onLoadingStarted","_onLoadingStopped","parentId","has","delete","childFrames","child","isOOPFrame","Frame","addFrame","framePayload","isMainFrame","_FrameManager_removeFramesRecursively","removeFrame","_id","waitForFrame","_navigated","key","source","EVALUATION_SCRIPT_URL","worldName","filter","_client","map","grantUniveralAccess","catch","debugError","_navigatedWithinDocument","contextPayload","auxData","world","worlds","MAIN_WORLD","PUPPETEER_WORLD","hasContext","ExecutionContext","setContext","_world","clearContext","entries","_detach"],"sources":["../../../../src/common/FrameManager.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}