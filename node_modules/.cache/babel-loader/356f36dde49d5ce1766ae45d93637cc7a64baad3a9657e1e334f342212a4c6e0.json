{"ast":null,"code":"/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar _CDPBrowser_instances, _CDPBrowser_ignoreHTTPSErrors, _CDPBrowser_defaultViewport, _CDPBrowser_process, _CDPBrowser_connection, _CDPBrowser_closeCallback, _CDPBrowser_targetFilterCallback, _CDPBrowser_isPageTargetCallback, _CDPBrowser_defaultContext, _CDPBrowser_contexts, _CDPBrowser_screenshotTaskQueue, _CDPBrowser_targetManager, _CDPBrowser_emitDisconnected, _CDPBrowser_setIsPageTargetCallback, _CDPBrowser_createTarget, _CDPBrowser_onAttachedToTarget, _CDPBrowser_onDetachedFromTarget, _CDPBrowser_onTargetChanged, _CDPBrowser_onTargetDiscovered, _CDPBrowser_getVersion, _CDPBrowserContext_connection, _CDPBrowserContext_browser, _CDPBrowserContext_id;\nimport { Browser as BrowserBase, WEB_PERMISSION_TO_PROTOCOL_PERMISSION } from '../api/Browser.js';\nimport { BrowserContext } from '../api/BrowserContext.js';\nimport { assert } from '../util/assert.js';\nimport { createDeferredPromise } from '../util/DeferredPromise.js';\nimport { ChromeTargetManager } from './ChromeTargetManager.js';\nimport { ConnectionEmittedEvents } from './Connection.js';\nimport { FirefoxTargetManager } from './FirefoxTargetManager.js';\nimport { Target } from './Target.js';\nimport { TaskQueue } from './TaskQueue.js';\nimport { waitWithTimeout } from './util.js';\n/**\n * @internal\n */\nexport class CDPBrowser extends BrowserBase {\n  /**\n   * @internal\n   */\n  static async _create(product, connection, contextIds, ignoreHTTPSErrors, defaultViewport, process, closeCallback, targetFilterCallback, isPageTargetCallback) {\n    const browser = new CDPBrowser(product, connection, contextIds, ignoreHTTPSErrors, defaultViewport, process, closeCallback, targetFilterCallback, isPageTargetCallback);\n    await browser._attach();\n    return browser;\n  }\n  /**\n   * @internal\n   */\n  get _targets() {\n    return __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").getAvailableTargets();\n  }\n  /**\n   * @internal\n   */\n  constructor(product, connection, contextIds, ignoreHTTPSErrors, defaultViewport, process, closeCallback, targetFilterCallback, isPageTargetCallback) {\n    super();\n    _CDPBrowser_instances.add(this);\n    _CDPBrowser_ignoreHTTPSErrors.set(this, void 0);\n    _CDPBrowser_defaultViewport.set(this, void 0);\n    _CDPBrowser_process.set(this, void 0);\n    _CDPBrowser_connection.set(this, void 0);\n    _CDPBrowser_closeCallback.set(this, void 0);\n    _CDPBrowser_targetFilterCallback.set(this, void 0);\n    _CDPBrowser_isPageTargetCallback.set(this, void 0);\n    _CDPBrowser_defaultContext.set(this, void 0);\n    _CDPBrowser_contexts.set(this, void 0);\n    _CDPBrowser_screenshotTaskQueue.set(this, void 0);\n    _CDPBrowser_targetManager.set(this, void 0);\n    _CDPBrowser_emitDisconnected.set(this, () => {\n      this.emit(\"disconnected\" /* BrowserEmittedEvents.Disconnected */);\n    });\n\n    _CDPBrowser_createTarget.set(this, (targetInfo, session) => {\n      var _a;\n      const {\n        browserContextId\n      } = targetInfo;\n      const context = browserContextId && __classPrivateFieldGet(this, _CDPBrowser_contexts, \"f\").has(browserContextId) ? __classPrivateFieldGet(this, _CDPBrowser_contexts, \"f\").get(browserContextId) : __classPrivateFieldGet(this, _CDPBrowser_defaultContext, \"f\");\n      if (!context) {\n        throw new Error('Missing browser context');\n      }\n      return new Target(targetInfo, session, context, __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\"), isAutoAttachEmulated => {\n        return __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\")._createSession(targetInfo, isAutoAttachEmulated);\n      }, __classPrivateFieldGet(this, _CDPBrowser_ignoreHTTPSErrors, \"f\"), (_a = __classPrivateFieldGet(this, _CDPBrowser_defaultViewport, \"f\")) !== null && _a !== void 0 ? _a : null, __classPrivateFieldGet(this, _CDPBrowser_screenshotTaskQueue, \"f\"), __classPrivateFieldGet(this, _CDPBrowser_isPageTargetCallback, \"f\"));\n    });\n    _CDPBrowser_onAttachedToTarget.set(this, async target => {\n      if (await target._initializedPromise) {\n        this.emit(\"targetcreated\" /* BrowserEmittedEvents.TargetCreated */, target);\n        target.browserContext().emit(\"targetcreated\" /* BrowserContextEmittedEvents.TargetCreated */, target);\n      }\n    });\n    _CDPBrowser_onDetachedFromTarget.set(this, async target => {\n      target._initializedCallback(false);\n      target._closedCallback();\n      if (await target._initializedPromise) {\n        this.emit(\"targetdestroyed\" /* BrowserEmittedEvents.TargetDestroyed */, target);\n        target.browserContext().emit(\"targetdestroyed\" /* BrowserContextEmittedEvents.TargetDestroyed */, target);\n      }\n    });\n    _CDPBrowser_onTargetChanged.set(this, ({\n      target,\n      targetInfo\n    }) => {\n      const previousURL = target.url();\n      const wasInitialized = target._isInitialized;\n      target._targetInfoChanged(targetInfo);\n      if (wasInitialized && previousURL !== target.url()) {\n        this.emit(\"targetchanged\" /* BrowserEmittedEvents.TargetChanged */, target);\n        target.browserContext().emit(\"targetchanged\" /* BrowserContextEmittedEvents.TargetChanged */, target);\n      }\n    });\n    _CDPBrowser_onTargetDiscovered.set(this, targetInfo => {\n      this.emit('targetdiscovered', targetInfo);\n    });\n    product = product || 'chrome';\n    __classPrivateFieldSet(this, _CDPBrowser_ignoreHTTPSErrors, ignoreHTTPSErrors, \"f\");\n    __classPrivateFieldSet(this, _CDPBrowser_defaultViewport, defaultViewport, \"f\");\n    __classPrivateFieldSet(this, _CDPBrowser_process, process, \"f\");\n    __classPrivateFieldSet(this, _CDPBrowser_screenshotTaskQueue, new TaskQueue(), \"f\");\n    __classPrivateFieldSet(this, _CDPBrowser_connection, connection, \"f\");\n    __classPrivateFieldSet(this, _CDPBrowser_closeCallback, closeCallback || function () {}, \"f\");\n    __classPrivateFieldSet(this, _CDPBrowser_targetFilterCallback, targetFilterCallback || (() => {\n      return true;\n    }), \"f\");\n    __classPrivateFieldGet(this, _CDPBrowser_instances, \"m\", _CDPBrowser_setIsPageTargetCallback).call(this, isPageTargetCallback);\n    if (product === 'firefox') {\n      __classPrivateFieldSet(this, _CDPBrowser_targetManager, new FirefoxTargetManager(connection, __classPrivateFieldGet(this, _CDPBrowser_createTarget, \"f\"), __classPrivateFieldGet(this, _CDPBrowser_targetFilterCallback, \"f\")), \"f\");\n    } else {\n      __classPrivateFieldSet(this, _CDPBrowser_targetManager, new ChromeTargetManager(connection, __classPrivateFieldGet(this, _CDPBrowser_createTarget, \"f\"), __classPrivateFieldGet(this, _CDPBrowser_targetFilterCallback, \"f\")), \"f\");\n    }\n    __classPrivateFieldSet(this, _CDPBrowser_defaultContext, new CDPBrowserContext(__classPrivateFieldGet(this, _CDPBrowser_connection, \"f\"), this), \"f\");\n    __classPrivateFieldSet(this, _CDPBrowser_contexts, new Map(), \"f\");\n    for (const contextId of contextIds) {\n      __classPrivateFieldGet(this, _CDPBrowser_contexts, \"f\").set(contextId, new CDPBrowserContext(__classPrivateFieldGet(this, _CDPBrowser_connection, \"f\"), this, contextId));\n    }\n  }\n  /**\n   * @internal\n   */\n  async _attach() {\n    __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\").on(ConnectionEmittedEvents.Disconnected, __classPrivateFieldGet(this, _CDPBrowser_emitDisconnected, \"f\"));\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").on(\"targetAvailable\" /* TargetManagerEmittedEvents.TargetAvailable */, __classPrivateFieldGet(this, _CDPBrowser_onAttachedToTarget, \"f\"));\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").on(\"targetGone\" /* TargetManagerEmittedEvents.TargetGone */, __classPrivateFieldGet(this, _CDPBrowser_onDetachedFromTarget, \"f\"));\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").on(\"targetChanged\" /* TargetManagerEmittedEvents.TargetChanged */, __classPrivateFieldGet(this, _CDPBrowser_onTargetChanged, \"f\"));\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").on(\"targetDiscovered\" /* TargetManagerEmittedEvents.TargetDiscovered */, __classPrivateFieldGet(this, _CDPBrowser_onTargetDiscovered, \"f\"));\n    await __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").initialize();\n  }\n  /**\n   * @internal\n   */\n  _detach() {\n    __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\").off(ConnectionEmittedEvents.Disconnected, __classPrivateFieldGet(this, _CDPBrowser_emitDisconnected, \"f\"));\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").off(\"targetAvailable\" /* TargetManagerEmittedEvents.TargetAvailable */, __classPrivateFieldGet(this, _CDPBrowser_onAttachedToTarget, \"f\"));\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").off(\"targetGone\" /* TargetManagerEmittedEvents.TargetGone */, __classPrivateFieldGet(this, _CDPBrowser_onDetachedFromTarget, \"f\"));\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").off(\"targetChanged\" /* TargetManagerEmittedEvents.TargetChanged */, __classPrivateFieldGet(this, _CDPBrowser_onTargetChanged, \"f\"));\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").off(\"targetDiscovered\" /* TargetManagerEmittedEvents.TargetDiscovered */, __classPrivateFieldGet(this, _CDPBrowser_onTargetDiscovered, \"f\"));\n  }\n  /**\n   * The spawned browser process. Returns `null` if the browser instance was created with\n   * {@link Puppeteer.connect}.\n   */\n  process() {\n    var _a;\n    return (_a = __classPrivateFieldGet(this, _CDPBrowser_process, \"f\")) !== null && _a !== void 0 ? _a : null;\n  }\n  /**\n   * @internal\n   */\n  _targetManager() {\n    return __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\");\n  }\n  /**\n   * @internal\n   */\n  _getIsPageTargetCallback() {\n    return __classPrivateFieldGet(this, _CDPBrowser_isPageTargetCallback, \"f\");\n  }\n  /**\n   * Creates a new incognito browser context. This won't share cookies/cache with other\n   * browser contexts.\n   *\n   * @example\n   *\n   * ```ts\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   // Create a new incognito browser context.\n   *   const context = await browser.createIncognitoBrowserContext();\n   *   // Create a new page in a pristine context.\n   *   const page = await context.newPage();\n   *   // Do stuff\n   *   await page.goto('https://example.com');\n   * })();\n   * ```\n   */\n  async createIncognitoBrowserContext(options = {}) {\n    const {\n      proxyServer,\n      proxyBypassList\n    } = options;\n    const {\n      browserContextId\n    } = await __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\").send('Target.createBrowserContext', {\n      proxyServer,\n      proxyBypassList: proxyBypassList && proxyBypassList.join(',')\n    });\n    const context = new CDPBrowserContext(__classPrivateFieldGet(this, _CDPBrowser_connection, \"f\"), this, browserContextId);\n    __classPrivateFieldGet(this, _CDPBrowser_contexts, \"f\").set(browserContextId, context);\n    return context;\n  }\n  /**\n   * Returns an array of all open browser contexts. In a newly created browser, this will\n   * return a single instance of {@link BrowserContext}.\n   */\n  browserContexts() {\n    return [__classPrivateFieldGet(this, _CDPBrowser_defaultContext, \"f\"), ...Array.from(__classPrivateFieldGet(this, _CDPBrowser_contexts, \"f\").values())];\n  }\n  /**\n   * Returns the default browser context. The default browser context cannot be closed.\n   */\n  defaultBrowserContext() {\n    return __classPrivateFieldGet(this, _CDPBrowser_defaultContext, \"f\");\n  }\n  /**\n   * @internal\n   */\n  async _disposeContext(contextId) {\n    if (!contextId) {\n      return;\n    }\n    await __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\").send('Target.disposeBrowserContext', {\n      browserContextId: contextId\n    });\n    __classPrivateFieldGet(this, _CDPBrowser_contexts, \"f\").delete(contextId);\n  }\n  /**\n   * The browser websocket endpoint which can be used as an argument to\n   * {@link Puppeteer.connect}.\n   *\n   * @returns The Browser websocket url.\n   *\n   * @remarks\n   *\n   * The format is `ws://${host}:${port}/devtools/browser/<id>`.\n   *\n   * You can find the `webSocketDebuggerUrl` from `http://${host}:${port}/json/version`.\n   * Learn more about the\n   * {@link https://chromedevtools.github.io/devtools-protocol | devtools protocol} and\n   * the {@link\n   * https://chromedevtools.github.io/devtools-protocol/#how-do-i-access-the-browser-target\n   * | browser endpoint}.\n   */\n  wsEndpoint() {\n    return __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\").url();\n  }\n  /**\n   * Promise which resolves to a new {@link Page} object. The Page is created in\n   * a default browser context.\n   */\n  async newPage() {\n    return __classPrivateFieldGet(this, _CDPBrowser_defaultContext, \"f\").newPage();\n  }\n  /**\n   * @internal\n   */\n  async _createPageInContext(contextId) {\n    const {\n      targetId\n    } = await __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\").send('Target.createTarget', {\n      url: 'about:blank',\n      browserContextId: contextId || undefined\n    });\n    const target = __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").getAvailableTargets().get(targetId);\n    if (!target) {\n      throw new Error(`Missing target for page (id = ${targetId})`);\n    }\n    const initialized = await target._initializedPromise;\n    if (!initialized) {\n      throw new Error(`Failed to create target for page (id = ${targetId})`);\n    }\n    const page = await target.page();\n    if (!page) {\n      throw new Error(`Failed to create a page for context (id = ${contextId})`);\n    }\n    return page;\n  }\n  /**\n   * All active targets inside the Browser. In case of multiple browser contexts, returns\n   * an array with all the targets in all browser contexts.\n   */\n  targets() {\n    return Array.from(__classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").getAvailableTargets().values()).filter(target => {\n      return target._isInitialized;\n    });\n  }\n  /**\n   * The target associated with the browser.\n   */\n  target() {\n    const browserTarget = this.targets().find(target => {\n      return target.type() === 'browser';\n    });\n    if (!browserTarget) {\n      throw new Error('Browser target is not found');\n    }\n    return browserTarget;\n  }\n  /**\n   * Searches for a target in all browser contexts.\n   *\n   * @param predicate - A function to be run for every target.\n   * @returns The first target found that matches the `predicate` function.\n   *\n   * @example\n   *\n   * An example of finding a target for a page opened via `window.open`:\n   *\n   * ```ts\n   * await page.evaluate(() => window.open('https://www.example.com/'));\n   * const newWindowTarget = await browser.waitForTarget(\n   *   target => target.url() === 'https://www.example.com/'\n   * );\n   * ```\n   */\n  async waitForTarget(predicate, options = {}) {\n    const {\n      timeout = 30000\n    } = options;\n    const targetPromise = createDeferredPromise();\n    this.on(\"targetcreated\" /* BrowserEmittedEvents.TargetCreated */, check);\n    this.on(\"targetchanged\" /* BrowserEmittedEvents.TargetChanged */, check);\n    try {\n      this.targets().forEach(check);\n      if (!timeout) {\n        return await targetPromise;\n      }\n      return await waitWithTimeout(targetPromise, 'target', timeout);\n    } finally {\n      this.off(\"targetcreated\" /* BrowserEmittedEvents.TargetCreated */, check);\n      this.off(\"targetchanged\" /* BrowserEmittedEvents.TargetChanged */, check);\n    }\n    async function check(target) {\n      if ((await predicate(target)) && !targetPromise.resolved()) {\n        targetPromise.resolve(target);\n      }\n    }\n  }\n  /**\n   * An array of all open pages inside the Browser.\n   *\n   * @remarks\n   *\n   * In case of multiple browser contexts, returns an array with all the pages in all\n   * browser contexts. Non-visible pages, such as `\"background_page\"`, will not be listed\n   * here. You can find them using {@link Target.page}.\n   */\n  async pages() {\n    const contextPages = await Promise.all(this.browserContexts().map(context => {\n      return context.pages();\n    }));\n    // Flatten array.\n    return contextPages.reduce((acc, x) => {\n      return acc.concat(x);\n    }, []);\n  }\n  /**\n   * A string representing the browser name and version.\n   *\n   * @remarks\n   *\n   * For headless Chromium, this is similar to `HeadlessChrome/61.0.3153.0`. For\n   * non-headless, this is similar to `Chrome/61.0.3153.0`.\n   *\n   * The format of browser.version() might change with future releases of Chromium.\n   */\n  async version() {\n    const version = await __classPrivateFieldGet(this, _CDPBrowser_instances, \"m\", _CDPBrowser_getVersion).call(this);\n    return version.product;\n  }\n  /**\n   * The browser's original user agent. Pages can override the browser user agent with\n   * {@link Page.setUserAgent}.\n   */\n  async userAgent() {\n    const version = await __classPrivateFieldGet(this, _CDPBrowser_instances, \"m\", _CDPBrowser_getVersion).call(this);\n    return version.userAgent;\n  }\n  /**\n   * Closes Chromium and all of its pages (if any were opened). The\n   * {@link CDPBrowser} object itself is considered to be disposed and cannot be\n   * used anymore.\n   */\n  async close() {\n    await __classPrivateFieldGet(this, _CDPBrowser_closeCallback, \"f\").call(null);\n    this.disconnect();\n  }\n  /**\n   * Disconnects Puppeteer from the browser, but leaves the Chromium process running.\n   * After calling `disconnect`, the {@link CDPBrowser} object is considered disposed and\n   * cannot be used anymore.\n   */\n  disconnect() {\n    __classPrivateFieldGet(this, _CDPBrowser_targetManager, \"f\").dispose();\n    __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\").dispose();\n    this._detach();\n  }\n  /**\n   * Indicates that the browser is connected.\n   */\n  isConnected() {\n    return !__classPrivateFieldGet(this, _CDPBrowser_connection, \"f\")._closed;\n  }\n}\n_CDPBrowser_ignoreHTTPSErrors = new WeakMap(), _CDPBrowser_defaultViewport = new WeakMap(), _CDPBrowser_process = new WeakMap(), _CDPBrowser_connection = new WeakMap(), _CDPBrowser_closeCallback = new WeakMap(), _CDPBrowser_targetFilterCallback = new WeakMap(), _CDPBrowser_isPageTargetCallback = new WeakMap(), _CDPBrowser_defaultContext = new WeakMap(), _CDPBrowser_contexts = new WeakMap(), _CDPBrowser_screenshotTaskQueue = new WeakMap(), _CDPBrowser_targetManager = new WeakMap(), _CDPBrowser_emitDisconnected = new WeakMap(), _CDPBrowser_createTarget = new WeakMap(), _CDPBrowser_onAttachedToTarget = new WeakMap(), _CDPBrowser_onDetachedFromTarget = new WeakMap(), _CDPBrowser_onTargetChanged = new WeakMap(), _CDPBrowser_onTargetDiscovered = new WeakMap(), _CDPBrowser_instances = new WeakSet(), _CDPBrowser_setIsPageTargetCallback = function _CDPBrowser_setIsPageTargetCallback(isPageTargetCallback) {\n  __classPrivateFieldSet(this, _CDPBrowser_isPageTargetCallback, isPageTargetCallback || (target => {\n    return target.type === 'page' || target.type === 'background_page' || target.type === 'webview';\n  }), \"f\");\n}, _CDPBrowser_getVersion = function _CDPBrowser_getVersion() {\n  return __classPrivateFieldGet(this, _CDPBrowser_connection, \"f\").send('Browser.getVersion');\n};\n/**\n * @internal\n */\nexport class CDPBrowserContext extends BrowserContext {\n  /**\n   * @internal\n   */\n  constructor(connection, browser, contextId) {\n    super();\n    _CDPBrowserContext_connection.set(this, void 0);\n    _CDPBrowserContext_browser.set(this, void 0);\n    _CDPBrowserContext_id.set(this, void 0);\n    __classPrivateFieldSet(this, _CDPBrowserContext_connection, connection, \"f\");\n    __classPrivateFieldSet(this, _CDPBrowserContext_browser, browser, \"f\");\n    __classPrivateFieldSet(this, _CDPBrowserContext_id, contextId, \"f\");\n  }\n  get id() {\n    return __classPrivateFieldGet(this, _CDPBrowserContext_id, \"f\");\n  }\n  /**\n   * An array of all active targets inside the browser context.\n   */\n  targets() {\n    return __classPrivateFieldGet(this, _CDPBrowserContext_browser, \"f\").targets().filter(target => {\n      return target.browserContext() === this;\n    });\n  }\n  /**\n   * This searches for a target in this specific browser context.\n   *\n   * @example\n   * An example of finding a target for a page opened via `window.open`:\n   *\n   * ```ts\n   * await page.evaluate(() => window.open('https://www.example.com/'));\n   * const newWindowTarget = await browserContext.waitForTarget(\n   *   target => target.url() === 'https://www.example.com/'\n   * );\n   * ```\n   *\n   * @param predicate - A function to be run for every target\n   * @param options - An object of options. Accepts a timeout,\n   * which is the maximum wait time in milliseconds.\n   * Pass `0` to disable the timeout. Defaults to 30 seconds.\n   * @returns Promise which resolves to the first target found\n   * that matches the `predicate` function.\n   */\n  waitForTarget(predicate, options = {}) {\n    return __classPrivateFieldGet(this, _CDPBrowserContext_browser, \"f\").waitForTarget(target => {\n      return target.browserContext() === this && predicate(target);\n    }, options);\n  }\n  /**\n   * An array of all pages inside the browser context.\n   *\n   * @returns Promise which resolves to an array of all open pages.\n   * Non visible pages, such as `\"background_page\"`, will not be listed here.\n   * You can find them using {@link Target.page | the target page}.\n   */\n  async pages() {\n    const pages = await Promise.all(this.targets().filter(target => {\n      var _a;\n      return target.type() === 'page' || target.type() === 'other' && ((_a = __classPrivateFieldGet(this, _CDPBrowserContext_browser, \"f\")._getIsPageTargetCallback()) === null || _a === void 0 ? void 0 : _a(target._getTargetInfo()));\n    }).map(target => {\n      return target.page();\n    }));\n    return pages.filter(page => {\n      return !!page;\n    });\n  }\n  /**\n   * Returns whether BrowserContext is incognito.\n   * The default browser context is the only non-incognito browser context.\n   *\n   * @remarks\n   * The default browser context cannot be closed.\n   */\n  isIncognito() {\n    return !!__classPrivateFieldGet(this, _CDPBrowserContext_id, \"f\");\n  }\n  /**\n   * @example\n   *\n   * ```ts\n   * const context = browser.defaultBrowserContext();\n   * await context.overridePermissions('https://html5demos.com', [\n   *   'geolocation',\n   * ]);\n   * ```\n   *\n   * @param origin - The origin to grant permissions to, e.g. \"https://example.com\".\n   * @param permissions - An array of permissions to grant.\n   * All permissions that are not listed here will be automatically denied.\n   */\n  async overridePermissions(origin, permissions) {\n    const protocolPermissions = permissions.map(permission => {\n      const protocolPermission = WEB_PERMISSION_TO_PROTOCOL_PERMISSION.get(permission);\n      if (!protocolPermission) {\n        throw new Error('Unknown permission: ' + permission);\n      }\n      return protocolPermission;\n    });\n    await __classPrivateFieldGet(this, _CDPBrowserContext_connection, \"f\").send('Browser.grantPermissions', {\n      origin,\n      browserContextId: __classPrivateFieldGet(this, _CDPBrowserContext_id, \"f\") || undefined,\n      permissions: protocolPermissions\n    });\n  }\n  /**\n   * Clears all permission overrides for the browser context.\n   *\n   * @example\n   *\n   * ```ts\n   * const context = browser.defaultBrowserContext();\n   * context.overridePermissions('https://example.com', ['clipboard-read']);\n   * // do stuff ..\n   * context.clearPermissionOverrides();\n   * ```\n   */\n  async clearPermissionOverrides() {\n    await __classPrivateFieldGet(this, _CDPBrowserContext_connection, \"f\").send('Browser.resetPermissions', {\n      browserContextId: __classPrivateFieldGet(this, _CDPBrowserContext_id, \"f\") || undefined\n    });\n  }\n  /**\n   * Creates a new page in the browser context.\n   */\n  newPage() {\n    return __classPrivateFieldGet(this, _CDPBrowserContext_browser, \"f\")._createPageInContext(__classPrivateFieldGet(this, _CDPBrowserContext_id, \"f\"));\n  }\n  /**\n   * The browser this browser context belongs to.\n   */\n  browser() {\n    return __classPrivateFieldGet(this, _CDPBrowserContext_browser, \"f\");\n  }\n  /**\n   * Closes the browser context. All the targets that belong to the browser context\n   * will be closed.\n   *\n   * @remarks\n   * Only incognito browser contexts can be closed.\n   */\n  async close() {\n    assert(__classPrivateFieldGet(this, _CDPBrowserContext_id, \"f\"), 'Non-incognito profiles cannot be closed!');\n    await __classPrivateFieldGet(this, _CDPBrowserContext_browser, \"f\")._disposeContext(__classPrivateFieldGet(this, _CDPBrowserContext_id, \"f\"));\n  }\n}\n_CDPBrowserContext_connection = new WeakMap(), _CDPBrowserContext_browser = new WeakMap(), _CDPBrowserContext_id = new WeakMap();","map":{"version":3,"names":["Browser","BrowserBase","WEB_PERMISSION_TO_PROTOCOL_PERMISSION","BrowserContext","assert","createDeferredPromise","ChromeTargetManager","ConnectionEmittedEvents","FirefoxTargetManager","Target","TaskQueue","waitWithTimeout","CDPBrowser","_create","product","connection","contextIds","ignoreHTTPSErrors","defaultViewport","process","closeCallback","targetFilterCallback","isPageTargetCallback","browser","_attach","_targets","__classPrivateFieldGet","_CDPBrowser_targetManager","getAvailableTargets","constructor","_CDPBrowser_ignoreHTTPSErrors","set","_CDPBrowser_defaultViewport","_CDPBrowser_process","_CDPBrowser_connection","_CDPBrowser_closeCallback","_CDPBrowser_targetFilterCallback","_CDPBrowser_isPageTargetCallback","_CDPBrowser_defaultContext","_CDPBrowser_contexts","_CDPBrowser_screenshotTaskQueue","_CDPBrowser_emitDisconnected","emit","_CDPBrowser_createTarget","targetInfo","session","browserContextId","context","has","get","Error","isAutoAttachEmulated","_createSession","_a","_CDPBrowser_onAttachedToTarget","target","_initializedPromise","browserContext","_CDPBrowser_onDetachedFromTarget","_initializedCallback","_closedCallback","_CDPBrowser_onTargetChanged","previousURL","url","wasInitialized","_isInitialized","_targetInfoChanged","_CDPBrowser_onTargetDiscovered","__classPrivateFieldSet","_CDPBrowser_instances","_CDPBrowser_setIsPageTargetCallback","call","CDPBrowserContext","Map","contextId","on","Disconnected","initialize","_detach","off","_targetManager","_getIsPageTargetCallback","createIncognitoBrowserContext","options","proxyServer","proxyBypassList","send","join","browserContexts","Array","from","values","defaultBrowserContext","_disposeContext","delete","wsEndpoint","newPage","_createPageInContext","targetId","undefined","initialized","page","targets","filter","browserTarget","find","type","waitForTarget","predicate","timeout","targetPromise","check","forEach","resolved","resolve","pages","contextPages","Promise","all","map","reduce","acc","x","concat","version","_CDPBrowser_getVersion","userAgent","close","disconnect","dispose","isConnected","_closed","_CDPBrowserContext_connection","_CDPBrowserContext_browser","_CDPBrowserContext_id","id","_getTargetInfo","isIncognito","overridePermissions","origin","permissions","protocolPermissions","permission","protocolPermission","clearPermissionOverrides"],"sources":["../../../../src/common/Browser.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}