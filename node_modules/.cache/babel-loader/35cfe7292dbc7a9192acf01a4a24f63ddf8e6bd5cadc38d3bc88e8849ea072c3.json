{"ast":null,"code":"/**\n * Copyright 2019 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _LifecycleWatcher_instances, _LifecycleWatcher_expectedLifecycle, _LifecycleWatcher_frameManager, _LifecycleWatcher_frame, _LifecycleWatcher_timeout, _LifecycleWatcher_navigationRequest, _LifecycleWatcher_eventListeners, _LifecycleWatcher_initialLoaderId, _LifecycleWatcher_sameDocumentNavigationPromise, _LifecycleWatcher_lifecyclePromise, _LifecycleWatcher_newDocumentNavigationPromise, _LifecycleWatcher_terminationPromise, _LifecycleWatcher_timeoutPromise, _LifecycleWatcher_maximumTimer, _LifecycleWatcher_hasSameDocumentNavigation, _LifecycleWatcher_swapped, _LifecycleWatcher_navigationResponseReceived, _LifecycleWatcher_onRequest, _LifecycleWatcher_onRequestFailed, _LifecycleWatcher_onResponse, _LifecycleWatcher_onFrameDetached, _LifecycleWatcher_terminate, _LifecycleWatcher_createTimeoutPromise, _LifecycleWatcher_navigatedWithinDocument, _LifecycleWatcher_navigated, _LifecycleWatcher_frameSwapped, _LifecycleWatcher_checkLifecycleComplete;\nimport { assert } from '../util/assert.js';\nimport { createDeferredPromise } from '../util/DeferredPromise.js';\nimport { CDPSessionEmittedEvents } from './Connection.js';\nimport { TimeoutError } from './Errors.js';\nimport { FrameManagerEmittedEvents } from './FrameManager.js';\nimport { NetworkManagerEmittedEvents } from './NetworkManager.js';\nimport { addEventListener, removeEventListeners } from './util.js';\nconst puppeteerToProtocolLifecycle = new Map([['load', 'load'], ['domcontentloaded', 'DOMContentLoaded'], ['networkidle0', 'networkIdle'], ['networkidle2', 'networkAlmostIdle']]);\nconst noop = () => {};\n/**\n * @internal\n */\nexport class LifecycleWatcher {\n  constructor(frameManager, frame, waitUntil, timeout) {\n    _LifecycleWatcher_instances.add(this);\n    _LifecycleWatcher_expectedLifecycle.set(this, void 0);\n    _LifecycleWatcher_frameManager.set(this, void 0);\n    _LifecycleWatcher_frame.set(this, void 0);\n    _LifecycleWatcher_timeout.set(this, void 0);\n    _LifecycleWatcher_navigationRequest.set(this, null);\n    _LifecycleWatcher_eventListeners.set(this, void 0);\n    _LifecycleWatcher_initialLoaderId.set(this, void 0);\n    _LifecycleWatcher_sameDocumentNavigationPromise.set(this, createDeferredPromise());\n    _LifecycleWatcher_lifecyclePromise.set(this, createDeferredPromise());\n    _LifecycleWatcher_newDocumentNavigationPromise.set(this, createDeferredPromise());\n    _LifecycleWatcher_terminationPromise.set(this, createDeferredPromise());\n    _LifecycleWatcher_timeoutPromise.set(this, void 0);\n    _LifecycleWatcher_maximumTimer.set(this, void 0);\n    _LifecycleWatcher_hasSameDocumentNavigation.set(this, void 0);\n    _LifecycleWatcher_swapped.set(this, void 0);\n    _LifecycleWatcher_navigationResponseReceived.set(this, void 0);\n    if (Array.isArray(waitUntil)) {\n      waitUntil = waitUntil.slice();\n    } else if (typeof waitUntil === 'string') {\n      waitUntil = [waitUntil];\n    }\n    __classPrivateFieldSet(this, _LifecycleWatcher_initialLoaderId, frame._loaderId, \"f\");\n    __classPrivateFieldSet(this, _LifecycleWatcher_expectedLifecycle, waitUntil.map(value => {\n      const protocolEvent = puppeteerToProtocolLifecycle.get(value);\n      assert(protocolEvent, 'Unknown value for options.waitUntil: ' + value);\n      return protocolEvent;\n    }), \"f\");\n    __classPrivateFieldSet(this, _LifecycleWatcher_frameManager, frameManager, \"f\");\n    __classPrivateFieldSet(this, _LifecycleWatcher_frame, frame, \"f\");\n    __classPrivateFieldSet(this, _LifecycleWatcher_timeout, timeout, \"f\");\n    __classPrivateFieldSet(this, _LifecycleWatcher_eventListeners, [addEventListener(frameManager.client, CDPSessionEmittedEvents.Disconnected, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_terminate).bind(this, new Error('Navigation failed because browser has disconnected!'))), addEventListener(__classPrivateFieldGet(this, _LifecycleWatcher_frameManager, \"f\"), FrameManagerEmittedEvents.LifecycleEvent, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_checkLifecycleComplete).bind(this)), addEventListener(__classPrivateFieldGet(this, _LifecycleWatcher_frameManager, \"f\"), FrameManagerEmittedEvents.FrameNavigatedWithinDocument, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_navigatedWithinDocument).bind(this)), addEventListener(__classPrivateFieldGet(this, _LifecycleWatcher_frameManager, \"f\"), FrameManagerEmittedEvents.FrameNavigated, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_navigated).bind(this)), addEventListener(__classPrivateFieldGet(this, _LifecycleWatcher_frameManager, \"f\"), FrameManagerEmittedEvents.FrameSwapped, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_frameSwapped).bind(this)), addEventListener(__classPrivateFieldGet(this, _LifecycleWatcher_frameManager, \"f\"), FrameManagerEmittedEvents.FrameDetached, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_onFrameDetached).bind(this)), addEventListener(__classPrivateFieldGet(this, _LifecycleWatcher_frameManager, \"f\").networkManager, NetworkManagerEmittedEvents.Request, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_onRequest).bind(this)), addEventListener(__classPrivateFieldGet(this, _LifecycleWatcher_frameManager, \"f\").networkManager, NetworkManagerEmittedEvents.Response, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_onResponse).bind(this)), addEventListener(__classPrivateFieldGet(this, _LifecycleWatcher_frameManager, \"f\").networkManager, NetworkManagerEmittedEvents.RequestFailed, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_onRequestFailed).bind(this))], \"f\");\n    __classPrivateFieldSet(this, _LifecycleWatcher_timeoutPromise, __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_createTimeoutPromise).call(this), \"f\");\n    __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_checkLifecycleComplete).call(this);\n  }\n  async navigationResponse() {\n    var _a;\n    // Continue with a possibly null response.\n    await ((_a = __classPrivateFieldGet(this, _LifecycleWatcher_navigationResponseReceived, \"f\")) === null || _a === void 0 ? void 0 : _a.catch(() => {}));\n    return __classPrivateFieldGet(this, _LifecycleWatcher_navigationRequest, \"f\") ? __classPrivateFieldGet(this, _LifecycleWatcher_navigationRequest, \"f\").response() : null;\n  }\n  sameDocumentNavigationPromise() {\n    return __classPrivateFieldGet(this, _LifecycleWatcher_sameDocumentNavigationPromise, \"f\");\n  }\n  newDocumentNavigationPromise() {\n    return __classPrivateFieldGet(this, _LifecycleWatcher_newDocumentNavigationPromise, \"f\");\n  }\n  lifecyclePromise() {\n    return __classPrivateFieldGet(this, _LifecycleWatcher_lifecyclePromise, \"f\");\n  }\n  timeoutOrTerminationPromise() {\n    return Promise.race([__classPrivateFieldGet(this, _LifecycleWatcher_timeoutPromise, \"f\"), __classPrivateFieldGet(this, _LifecycleWatcher_terminationPromise, \"f\")]);\n  }\n  dispose() {\n    removeEventListeners(__classPrivateFieldGet(this, _LifecycleWatcher_eventListeners, \"f\"));\n    __classPrivateFieldGet(this, _LifecycleWatcher_maximumTimer, \"f\") !== undefined && clearTimeout(__classPrivateFieldGet(this, _LifecycleWatcher_maximumTimer, \"f\"));\n  }\n}\n_LifecycleWatcher_expectedLifecycle = new WeakMap(), _LifecycleWatcher_frameManager = new WeakMap(), _LifecycleWatcher_frame = new WeakMap(), _LifecycleWatcher_timeout = new WeakMap(), _LifecycleWatcher_navigationRequest = new WeakMap(), _LifecycleWatcher_eventListeners = new WeakMap(), _LifecycleWatcher_initialLoaderId = new WeakMap(), _LifecycleWatcher_sameDocumentNavigationPromise = new WeakMap(), _LifecycleWatcher_lifecyclePromise = new WeakMap(), _LifecycleWatcher_newDocumentNavigationPromise = new WeakMap(), _LifecycleWatcher_terminationPromise = new WeakMap(), _LifecycleWatcher_timeoutPromise = new WeakMap(), _LifecycleWatcher_maximumTimer = new WeakMap(), _LifecycleWatcher_hasSameDocumentNavigation = new WeakMap(), _LifecycleWatcher_swapped = new WeakMap(), _LifecycleWatcher_navigationResponseReceived = new WeakMap(), _LifecycleWatcher_instances = new WeakSet(), _LifecycleWatcher_onRequest = function _LifecycleWatcher_onRequest(request) {\n  var _a, _b;\n  if (request.frame() !== __classPrivateFieldGet(this, _LifecycleWatcher_frame, \"f\") || !request.isNavigationRequest()) {\n    return;\n  }\n  __classPrivateFieldSet(this, _LifecycleWatcher_navigationRequest, request, \"f\");\n  // Resolve previous navigation response in case there are multiple\n  // navigation requests reported by the backend. This generally should not\n  // happen by it looks like it's possible.\n  (_a = __classPrivateFieldGet(this, _LifecycleWatcher_navigationResponseReceived, \"f\")) === null || _a === void 0 ? void 0 : _a.resolve();\n  __classPrivateFieldSet(this, _LifecycleWatcher_navigationResponseReceived, createDeferredPromise(), \"f\");\n  if (request.response() !== null) {\n    (_b = __classPrivateFieldGet(this, _LifecycleWatcher_navigationResponseReceived, \"f\")) === null || _b === void 0 ? void 0 : _b.resolve();\n  }\n}, _LifecycleWatcher_onRequestFailed = function _LifecycleWatcher_onRequestFailed(request) {\n  var _a, _b;\n  if (((_a = __classPrivateFieldGet(this, _LifecycleWatcher_navigationRequest, \"f\")) === null || _a === void 0 ? void 0 : _a._requestId) !== request._requestId) {\n    return;\n  }\n  (_b = __classPrivateFieldGet(this, _LifecycleWatcher_navigationResponseReceived, \"f\")) === null || _b === void 0 ? void 0 : _b.resolve();\n}, _LifecycleWatcher_onResponse = function _LifecycleWatcher_onResponse(response) {\n  var _a, _b;\n  if (((_a = __classPrivateFieldGet(this, _LifecycleWatcher_navigationRequest, \"f\")) === null || _a === void 0 ? void 0 : _a._requestId) !== response.request()._requestId) {\n    return;\n  }\n  (_b = __classPrivateFieldGet(this, _LifecycleWatcher_navigationResponseReceived, \"f\")) === null || _b === void 0 ? void 0 : _b.resolve();\n}, _LifecycleWatcher_onFrameDetached = function _LifecycleWatcher_onFrameDetached(frame) {\n  if (__classPrivateFieldGet(this, _LifecycleWatcher_frame, \"f\") === frame) {\n    __classPrivateFieldGet(this, _LifecycleWatcher_terminationPromise, \"f\").resolve(new Error('Navigating frame was detached'));\n    return;\n  }\n  __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_checkLifecycleComplete).call(this);\n}, _LifecycleWatcher_terminate = function _LifecycleWatcher_terminate(error) {\n  __classPrivateFieldGet(this, _LifecycleWatcher_terminationPromise, \"f\").resolve(error);\n}, _LifecycleWatcher_createTimeoutPromise = async function _LifecycleWatcher_createTimeoutPromise() {\n  if (!__classPrivateFieldGet(this, _LifecycleWatcher_timeout, \"f\")) {\n    return new Promise(noop);\n  }\n  const errorMessage = 'Navigation timeout of ' + __classPrivateFieldGet(this, _LifecycleWatcher_timeout, \"f\") + ' ms exceeded';\n  await new Promise(fulfill => {\n    return __classPrivateFieldSet(this, _LifecycleWatcher_maximumTimer, setTimeout(fulfill, __classPrivateFieldGet(this, _LifecycleWatcher_timeout, \"f\")), \"f\");\n  });\n  return new TimeoutError(errorMessage);\n}, _LifecycleWatcher_navigatedWithinDocument = function _LifecycleWatcher_navigatedWithinDocument(frame) {\n  if (frame !== __classPrivateFieldGet(this, _LifecycleWatcher_frame, \"f\")) {\n    return;\n  }\n  __classPrivateFieldSet(this, _LifecycleWatcher_hasSameDocumentNavigation, true, \"f\");\n  __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_checkLifecycleComplete).call(this);\n}, _LifecycleWatcher_navigated = function _LifecycleWatcher_navigated(frame) {\n  if (frame !== __classPrivateFieldGet(this, _LifecycleWatcher_frame, \"f\")) {\n    return;\n  }\n  __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_checkLifecycleComplete).call(this);\n}, _LifecycleWatcher_frameSwapped = function _LifecycleWatcher_frameSwapped(frame) {\n  if (frame !== __classPrivateFieldGet(this, _LifecycleWatcher_frame, \"f\")) {\n    return;\n  }\n  __classPrivateFieldSet(this, _LifecycleWatcher_swapped, true, \"f\");\n  __classPrivateFieldGet(this, _LifecycleWatcher_instances, \"m\", _LifecycleWatcher_checkLifecycleComplete).call(this);\n}, _LifecycleWatcher_checkLifecycleComplete = function _LifecycleWatcher_checkLifecycleComplete() {\n  // We expect navigation to commit.\n  if (!checkLifecycle(__classPrivateFieldGet(this, _LifecycleWatcher_frame, \"f\"), __classPrivateFieldGet(this, _LifecycleWatcher_expectedLifecycle, \"f\"))) {\n    return;\n  }\n  __classPrivateFieldGet(this, _LifecycleWatcher_lifecyclePromise, \"f\").resolve();\n  if (__classPrivateFieldGet(this, _LifecycleWatcher_hasSameDocumentNavigation, \"f\")) {\n    __classPrivateFieldGet(this, _LifecycleWatcher_sameDocumentNavigationPromise, \"f\").resolve(undefined);\n  }\n  if (__classPrivateFieldGet(this, _LifecycleWatcher_swapped, \"f\") || __classPrivateFieldGet(this, _LifecycleWatcher_frame, \"f\")._loaderId !== __classPrivateFieldGet(this, _LifecycleWatcher_initialLoaderId, \"f\")) {\n    __classPrivateFieldGet(this, _LifecycleWatcher_newDocumentNavigationPromise, \"f\").resolve(undefined);\n  }\n  function checkLifecycle(frame, expectedLifecycle) {\n    for (const event of expectedLifecycle) {\n      if (!frame._lifecycleEvents.has(event)) {\n        return false;\n      }\n    }\n    for (const child of frame.childFrames()) {\n      if (child._hasStartedLoading && !checkLifecycle(child, expectedLifecycle)) {\n        return false;\n      }\n    }\n    return true;\n  }\n};","map":{"version":3,"names":["assert","createDeferredPromise","CDPSessionEmittedEvents","TimeoutError","FrameManagerEmittedEvents","NetworkManagerEmittedEvents","addEventListener","removeEventListeners","puppeteerToProtocolLifecycle","Map","noop","LifecycleWatcher","constructor","frameManager","frame","waitUntil","timeout","_LifecycleWatcher_expectedLifecycle","set","_LifecycleWatcher_frameManager","_LifecycleWatcher_frame","_LifecycleWatcher_timeout","_LifecycleWatcher_navigationRequest","_LifecycleWatcher_eventListeners","_LifecycleWatcher_initialLoaderId","_LifecycleWatcher_sameDocumentNavigationPromise","_LifecycleWatcher_lifecyclePromise","_LifecycleWatcher_newDocumentNavigationPromise","_LifecycleWatcher_terminationPromise","_LifecycleWatcher_timeoutPromise","_LifecycleWatcher_maximumTimer","_LifecycleWatcher_hasSameDocumentNavigation","_LifecycleWatcher_swapped","_LifecycleWatcher_navigationResponseReceived","Array","isArray","slice","__classPrivateFieldSet","_loaderId","map","value","protocolEvent","get","client","Disconnected","__classPrivateFieldGet","_LifecycleWatcher_instances","_LifecycleWatcher_terminate","bind","Error","LifecycleEvent","_LifecycleWatcher_checkLifecycleComplete","FrameNavigatedWithinDocument","_LifecycleWatcher_navigatedWithinDocument","FrameNavigated","_LifecycleWatcher_navigated","FrameSwapped","_LifecycleWatcher_frameSwapped","FrameDetached","_LifecycleWatcher_onFrameDetached","networkManager","Request","_LifecycleWatcher_onRequest","Response","_LifecycleWatcher_onResponse","RequestFailed","_LifecycleWatcher_onRequestFailed","_LifecycleWatcher_createTimeoutPromise","call","navigationResponse","_a","catch","response","sameDocumentNavigationPromise","newDocumentNavigationPromise","lifecyclePromise","timeoutOrTerminationPromise","Promise","race","dispose","undefined","clearTimeout","request","isNavigationRequest","resolve","_b","_requestId","error","errorMessage","fulfill","setTimeout","checkLifecycle","expectedLifecycle","event","_lifecycleEvents","has","child","childFrames","_hasStartedLoading"],"sources":["../../../../src/common/LifecycleWatcher.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}