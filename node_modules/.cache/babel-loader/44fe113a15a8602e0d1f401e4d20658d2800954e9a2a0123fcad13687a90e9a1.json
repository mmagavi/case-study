{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Deferred = void 0;\nclass Deferred {\n  #isFinished = false;\n  #promise;\n  #resolve = () => {};\n  #reject = () => {};\n  get isFinished() {\n    return this.#isFinished;\n  }\n  constructor() {\n    this.#promise = new Promise((resolve, reject) => {\n      this.#resolve = resolve;\n      this.#reject = reject;\n    });\n    // Needed to avoid `Uncaught (in promise)`. The promises returned by `then`\n    // and `catch` will be rejected anyway.\n    this.#promise.catch(() => {});\n  }\n  then(onFulfilled, onRejected) {\n    return this.#promise.then(onFulfilled, onRejected);\n  }\n  catch(onRejected) {\n    return this.#promise.catch(onRejected);\n  }\n  resolve(value) {\n    this.#isFinished = true;\n    this.#resolve(value);\n  }\n  reject(reason) {\n    this.#isFinished = true;\n    this.#reject(reason);\n  }\n  finally(onFinally) {\n    return this.#promise.finally(onFinally);\n  }\n  [Symbol.toStringTag] = 'Promise';\n}\nexports.Deferred = Deferred;","map":{"version":3,"names":["Deferred","isFinished","promise","resolve","#resolve","reject","#reject","constructor","Promise","catch","then","onFulfilled","onRejected","value","reason","finally","onFinally","Symbol","toStringTag","exports"],"sources":["../../../src/utils/deferred.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;AAiBA,MAAaA,QAAQ;EACnB,CAAAC,UAAW,GAAG,KAAK;EACnB,CAAAC,OAAQ;EAER,CAAAC,OAAQ,GAAuBC,CAAA,KAAK,CAAE,CAAC;EACvC,CAAAC,MAAO,GAA6BC,CAAA,KAAK,CAAE,CAAC;EAE5C,IAAIL,UAAUA,CAAA;IACZ,OAAO,IAAI,CAAC,CAAAA,UAAW;EACzB;EAEAM,YAAA;IACE,IAAI,CAAC,CAAAL,OAAQ,GAAG,IAAIM,OAAO,CAAC,CAACL,OAAO,EAAEE,MAAM,KAAI;MAC9C,IAAI,CAAC,CAAAF,OAAQ,GAAGA,OAAO;MACvB,IAAI,CAAC,CAAAE,MAAO,GAAGA,MAAM;IACvB,CAAC,CAAC;IACF;IACA;IACA,IAAI,CAAC,CAAAH,OAAQ,CAACO,KAAK,CAAC,MAAK,CAAE,CAAC,CAAC;EAC/B;EAEAC,IAAIA,CACFC,WAAqE,EACrEC,UAA2E;IAE3E,OAAO,IAAI,CAAC,CAAAV,OAAQ,CAACQ,IAAI,CAACC,WAAW,EAAEC,UAAU,CAAC;EACpD;EAEAH,KAAKA,CACHG,UAAyE;IAEzE,OAAO,IAAI,CAAC,CAAAV,OAAQ,CAACO,KAAK,CAACG,UAAU,CAAC;EACxC;EAEAT,OAAOA,CAACU,KAAQ;IACd,IAAI,CAAC,CAAAZ,UAAW,GAAG,IAAI;IACvB,IAAI,CAAC,CAAAE,OAAQ,CAACU,KAAK,CAAC;EACtB;EAEAR,MAAMA,CAACS,MAAe;IACpB,IAAI,CAAC,CAAAb,UAAW,GAAG,IAAI;IACvB,IAAI,CAAC,CAAAI,MAAO,CAACS,MAAM,CAAC;EACtB;EAEAC,OAAOA,CAACC,SAA6B;IACnC,OAAO,IAAI,CAAC,CAAAd,OAAQ,CAACa,OAAO,CAACC,SAAS,CAAC;EACzC;EAEA,CAACC,MAAM,CAACC,WAAW,IAAI,SAAS;;AAhDlCC,OAAA,CAAAnB,QAAA,GAAAA,QAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}