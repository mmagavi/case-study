{"ast":null,"code":"import { LLMChain } from \"../llm_chain.js\";\nimport { StuffDocumentsChain, MapReduceDocumentsChain, RefineDocumentsChain } from \"../combine_docs_chain.js\";\nimport { DEFAULT_PROMPT } from \"./stuff_prompts.js\";\nimport { REFINE_PROMPT } from \"./refine_prompts.js\";\nexport const loadSummarizationChain = (llm, params = {\n  type: \"map_reduce\"\n}) => {\n  const {\n    verbose\n  } = params;\n  if (params.type === \"stuff\") {\n    const {\n      prompt = DEFAULT_PROMPT\n    } = params;\n    const llmChain = new LLMChain({\n      prompt,\n      llm,\n      verbose\n    });\n    const chain = new StuffDocumentsChain({\n      llmChain,\n      documentVariableName: \"text\",\n      verbose\n    });\n    return chain;\n  }\n  if (params.type === \"map_reduce\") {\n    const {\n      combineMapPrompt = DEFAULT_PROMPT,\n      combinePrompt = DEFAULT_PROMPT,\n      returnIntermediateSteps\n    } = params;\n    const llmChain = new LLMChain({\n      prompt: combineMapPrompt,\n      llm,\n      verbose\n    });\n    const combineLLMChain = new LLMChain({\n      prompt: combinePrompt,\n      llm,\n      verbose\n    });\n    const combineDocumentChain = new StuffDocumentsChain({\n      llmChain: combineLLMChain,\n      documentVariableName: \"text\",\n      verbose\n    });\n    const chain = new MapReduceDocumentsChain({\n      llmChain,\n      combineDocumentChain,\n      documentVariableName: \"text\",\n      returnIntermediateSteps,\n      verbose\n    });\n    return chain;\n  }\n  if (params.type === \"refine\") {\n    const {\n      refinePrompt = REFINE_PROMPT,\n      questionPrompt = DEFAULT_PROMPT\n    } = params;\n    const llmChain = new LLMChain({\n      prompt: questionPrompt,\n      llm,\n      verbose\n    });\n    const refineLLMChain = new LLMChain({\n      prompt: refinePrompt,\n      llm,\n      verbose\n    });\n    const chain = new RefineDocumentsChain({\n      llmChain,\n      refineLLMChain,\n      documentVariableName: \"text\",\n      verbose\n    });\n    return chain;\n  }\n  throw new Error(`Invalid _type: ${params.type}`);\n};","map":{"version":3,"names":["LLMChain","StuffDocumentsChain","MapReduceDocumentsChain","RefineDocumentsChain","DEFAULT_PROMPT","REFINE_PROMPT","loadSummarizationChain","llm","params","type","verbose","prompt","llmChain","chain","documentVariableName","combineMapPrompt","combinePrompt","returnIntermediateSteps","combineLLMChain","combineDocumentChain","refinePrompt","questionPrompt","refineLLMChain","Error"],"sources":["/Users/mayamagavi/instalily/case-study/node_modules/langchain/dist/chains/summarization/load.js"],"sourcesContent":["import { LLMChain } from \"../llm_chain.js\";\nimport { StuffDocumentsChain, MapReduceDocumentsChain, RefineDocumentsChain, } from \"../combine_docs_chain.js\";\nimport { DEFAULT_PROMPT } from \"./stuff_prompts.js\";\nimport { REFINE_PROMPT } from \"./refine_prompts.js\";\nexport const loadSummarizationChain = (llm, params = { type: \"map_reduce\" }) => {\n    const { verbose } = params;\n    if (params.type === \"stuff\") {\n        const { prompt = DEFAULT_PROMPT } = params;\n        const llmChain = new LLMChain({ prompt, llm, verbose });\n        const chain = new StuffDocumentsChain({\n            llmChain,\n            documentVariableName: \"text\",\n            verbose,\n        });\n        return chain;\n    }\n    if (params.type === \"map_reduce\") {\n        const { combineMapPrompt = DEFAULT_PROMPT, combinePrompt = DEFAULT_PROMPT, returnIntermediateSteps, } = params;\n        const llmChain = new LLMChain({ prompt: combineMapPrompt, llm, verbose });\n        const combineLLMChain = new LLMChain({\n            prompt: combinePrompt,\n            llm,\n            verbose,\n        });\n        const combineDocumentChain = new StuffDocumentsChain({\n            llmChain: combineLLMChain,\n            documentVariableName: \"text\",\n            verbose,\n        });\n        const chain = new MapReduceDocumentsChain({\n            llmChain,\n            combineDocumentChain,\n            documentVariableName: \"text\",\n            returnIntermediateSteps,\n            verbose,\n        });\n        return chain;\n    }\n    if (params.type === \"refine\") {\n        const { refinePrompt = REFINE_PROMPT, questionPrompt = DEFAULT_PROMPT } = params;\n        const llmChain = new LLMChain({ prompt: questionPrompt, llm, verbose });\n        const refineLLMChain = new LLMChain({ prompt: refinePrompt, llm, verbose });\n        const chain = new RefineDocumentsChain({\n            llmChain,\n            refineLLMChain,\n            documentVariableName: \"text\",\n            verbose,\n        });\n        return chain;\n    }\n    throw new Error(`Invalid _type: ${params.type}`);\n};\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,mBAAmB,EAAEC,uBAAuB,EAAEC,oBAAoB,QAAS,0BAA0B;AAC9G,SAASC,cAAc,QAAQ,oBAAoB;AACnD,SAASC,aAAa,QAAQ,qBAAqB;AACnD,OAAO,MAAMC,sBAAsB,GAAGA,CAACC,GAAG,EAAEC,MAAM,GAAG;EAAEC,IAAI,EAAE;AAAa,CAAC,KAAK;EAC5E,MAAM;IAAEC;EAAQ,CAAC,GAAGF,MAAM;EAC1B,IAAIA,MAAM,CAACC,IAAI,KAAK,OAAO,EAAE;IACzB,MAAM;MAAEE,MAAM,GAAGP;IAAe,CAAC,GAAGI,MAAM;IAC1C,MAAMI,QAAQ,GAAG,IAAIZ,QAAQ,CAAC;MAAEW,MAAM;MAAEJ,GAAG;MAAEG;IAAQ,CAAC,CAAC;IACvD,MAAMG,KAAK,GAAG,IAAIZ,mBAAmB,CAAC;MAClCW,QAAQ;MACRE,oBAAoB,EAAE,MAAM;MAC5BJ;IACJ,CAAC,CAAC;IACF,OAAOG,KAAK;EAChB;EACA,IAAIL,MAAM,CAACC,IAAI,KAAK,YAAY,EAAE;IAC9B,MAAM;MAAEM,gBAAgB,GAAGX,cAAc;MAAEY,aAAa,GAAGZ,cAAc;MAAEa;IAAyB,CAAC,GAAGT,MAAM;IAC9G,MAAMI,QAAQ,GAAG,IAAIZ,QAAQ,CAAC;MAAEW,MAAM,EAAEI,gBAAgB;MAAER,GAAG;MAAEG;IAAQ,CAAC,CAAC;IACzE,MAAMQ,eAAe,GAAG,IAAIlB,QAAQ,CAAC;MACjCW,MAAM,EAAEK,aAAa;MACrBT,GAAG;MACHG;IACJ,CAAC,CAAC;IACF,MAAMS,oBAAoB,GAAG,IAAIlB,mBAAmB,CAAC;MACjDW,QAAQ,EAAEM,eAAe;MACzBJ,oBAAoB,EAAE,MAAM;MAC5BJ;IACJ,CAAC,CAAC;IACF,MAAMG,KAAK,GAAG,IAAIX,uBAAuB,CAAC;MACtCU,QAAQ;MACRO,oBAAoB;MACpBL,oBAAoB,EAAE,MAAM;MAC5BG,uBAAuB;MACvBP;IACJ,CAAC,CAAC;IACF,OAAOG,KAAK;EAChB;EACA,IAAIL,MAAM,CAACC,IAAI,KAAK,QAAQ,EAAE;IAC1B,MAAM;MAAEW,YAAY,GAAGf,aAAa;MAAEgB,cAAc,GAAGjB;IAAe,CAAC,GAAGI,MAAM;IAChF,MAAMI,QAAQ,GAAG,IAAIZ,QAAQ,CAAC;MAAEW,MAAM,EAAEU,cAAc;MAAEd,GAAG;MAAEG;IAAQ,CAAC,CAAC;IACvE,MAAMY,cAAc,GAAG,IAAItB,QAAQ,CAAC;MAAEW,MAAM,EAAES,YAAY;MAAEb,GAAG;MAAEG;IAAQ,CAAC,CAAC;IAC3E,MAAMG,KAAK,GAAG,IAAIV,oBAAoB,CAAC;MACnCS,QAAQ;MACRU,cAAc;MACdR,oBAAoB,EAAE,MAAM;MAC5BJ;IACJ,CAAC,CAAC;IACF,OAAOG,KAAK;EAChB;EACA,MAAM,IAAIU,KAAK,CAAE,kBAAiBf,MAAM,CAACC,IAAK,EAAC,CAAC;AACpD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}