{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Page_instances, _Page_context, _Page_subscribedEvents, _Page_onLogEntryAdded, _Page_onLoad, _Page_onDOMLoad;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Page = void 0;\nconst Page_js_1 = require(\"../../api/Page.js\");\nconst ErrorLike_js_1 = require(\"../../util/ErrorLike.js\");\nconst ConsoleMessage_js_1 = require(\"../ConsoleMessage.js\");\nconst util_js_1 = require(\"../util.js\");\nconst Context_js_1 = require(\"./Context.js\");\nconst Serializer_js_1 = require(\"./Serializer.js\");\n/**\n * @internal\n */\nclass Page extends Page_js_1.Page {\n  constructor(context) {\n    super();\n    _Page_instances.add(this);\n    _Page_context.set(this, void 0);\n    _Page_subscribedEvents.set(this, new Map([['log.entryAdded', __classPrivateFieldGet(this, _Page_instances, \"m\", _Page_onLogEntryAdded).bind(this)], ['browsingContext.load', __classPrivateFieldGet(this, _Page_instances, \"m\", _Page_onLoad).bind(this)], ['browsingContext.domContentLoaded', __classPrivateFieldGet(this, _Page_instances, \"m\", _Page_onDOMLoad).bind(this)]]));\n    __classPrivateFieldSet(this, _Page_context, context, \"f\");\n    __classPrivateFieldGet(this, _Page_context, \"f\").connection.send('session.subscribe', {\n      events: [...__classPrivateFieldGet(this, _Page_subscribedEvents, \"f\").keys()],\n      contexts: [__classPrivateFieldGet(this, _Page_context, \"f\").id]\n    }).catch(error => {\n      if ((0, ErrorLike_js_1.isErrorLike)(error) && !error.message.includes('Target closed')) {\n        throw error;\n      }\n    });\n    for (const [event, subscriber] of __classPrivateFieldGet(this, _Page_subscribedEvents, \"f\")) {\n      __classPrivateFieldGet(this, _Page_context, \"f\").on(event, subscriber);\n    }\n  }\n  async close() {\n    await __classPrivateFieldGet(this, _Page_context, \"f\").connection.send('session.unsubscribe', {\n      events: [...__classPrivateFieldGet(this, _Page_subscribedEvents, \"f\").keys()],\n      contexts: [__classPrivateFieldGet(this, _Page_context, \"f\").id]\n    });\n    await __classPrivateFieldGet(this, _Page_context, \"f\").connection.send('browsingContext.close', {\n      context: __classPrivateFieldGet(this, _Page_context, \"f\").id\n    });\n    for (const [event, subscriber] of __classPrivateFieldGet(this, _Page_subscribedEvents, \"f\")) {\n      __classPrivateFieldGet(this, _Page_context, \"f\").off(event, subscriber);\n    }\n  }\n  async evaluateHandle(pageFunction, ...args) {\n    return __classPrivateFieldGet(this, _Page_context, \"f\").evaluateHandle(pageFunction, ...args);\n  }\n  async evaluate(pageFunction, ...args) {\n    return __classPrivateFieldGet(this, _Page_context, \"f\").evaluate(pageFunction, ...args);\n  }\n  async goto(url, options) {\n    return __classPrivateFieldGet(this, _Page_context, \"f\").goto(url, options);\n  }\n  url() {\n    return __classPrivateFieldGet(this, _Page_context, \"f\").url();\n  }\n  setDefaultNavigationTimeout(timeout) {\n    __classPrivateFieldGet(this, _Page_context, \"f\")._timeoutSettings.setDefaultNavigationTimeout(timeout);\n  }\n  setDefaultTimeout(timeout) {\n    __classPrivateFieldGet(this, _Page_context, \"f\")._timeoutSettings.setDefaultTimeout(timeout);\n  }\n  async setContent(html, options = {}) {\n    await __classPrivateFieldGet(this, _Page_context, \"f\").setContent(html, options);\n  }\n  async content() {\n    return await this.evaluate(() => {\n      let retVal = '';\n      if (document.doctype) {\n        retVal = new XMLSerializer().serializeToString(document.doctype);\n      }\n      if (document.documentElement) {\n        retVal += document.documentElement.outerHTML;\n      }\n      return retVal;\n    });\n  }\n  async pdf(options = {}) {\n    const {\n      path = undefined\n    } = options;\n    const {\n      printBackground: background,\n      margin,\n      landscape,\n      width,\n      height,\n      pageRanges,\n      scale,\n      preferCSSPageSize,\n      timeout\n    } = this._getPDFOptions(options, 'cm');\n    const {\n      result\n    } = await (0, util_js_1.waitWithTimeout)(__classPrivateFieldGet(this, _Page_context, \"f\").connection.send('browsingContext.print', {\n      context: __classPrivateFieldGet(this, _Page_context, \"f\")._contextId,\n      background,\n      margin,\n      orientation: landscape ? 'landscape' : 'portrait',\n      page: {\n        width,\n        height\n      },\n      pageRanges: pageRanges.split(', '),\n      scale,\n      shrinkToFit: !preferCSSPageSize\n    }), 'browsingContext.print', timeout);\n    const buffer = Buffer.from(result.data, 'base64');\n    await this._maybeWriteBufferToFile(path, buffer);\n    return buffer;\n  }\n  async createPDFStream(options) {\n    const buffer = await this.pdf(options);\n    try {\n      const {\n        Readable\n      } = await Promise.resolve().then(() => __importStar(require('stream')));\n      return Readable.from(buffer);\n    } catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error('Can only pass a file path in a Node-like environment.');\n      }\n      throw error;\n    }\n  }\n  async screenshot(options = {}) {\n    const {\n      path = undefined,\n      encoding,\n      ...args\n    } = options;\n    if (Object.keys(args).length >= 1) {\n      throw new Error('BiDi only supports \"encoding\" and \"path\" options');\n    }\n    const {\n      result\n    } = await __classPrivateFieldGet(this, _Page_context, \"f\").connection.send('browsingContext.captureScreenshot', {\n      context: __classPrivateFieldGet(this, _Page_context, \"f\")._contextId\n    });\n    if (encoding === 'base64') {\n      return result.data;\n    }\n    const buffer = Buffer.from(result.data, 'base64');\n    await this._maybeWriteBufferToFile(path, buffer);\n    return buffer;\n  }\n}\nexports.Page = Page;\n_Page_context = new WeakMap(), _Page_subscribedEvents = new WeakMap(), _Page_instances = new WeakSet(), _Page_onLogEntryAdded = function _Page_onLogEntryAdded(event) {\n  var _a;\n  if (isConsoleLogEntry(event)) {\n    const args = event.args.map(arg => {\n      return (0, Context_js_1.getBidiHandle)(__classPrivateFieldGet(this, _Page_context, \"f\"), arg);\n    });\n    const text = args.reduce((value, arg) => {\n      const parsedValue = arg.isPrimitiveValue ? Serializer_js_1.BidiSerializer.deserialize(arg.remoteValue()) : arg.toString();\n      return `${value} ${parsedValue}`;\n    }, '').slice(1);\n    this.emit(\"console\" /* PageEmittedEvents.Console */, new ConsoleMessage_js_1.ConsoleMessage(event.method, text, args, getStackTraceLocations(event.stackTrace)));\n  } else if (isJavaScriptLogEntry(event)) {\n    let message = (_a = event.text) !== null && _a !== void 0 ? _a : '';\n    if (event.stackTrace) {\n      for (const callFrame of event.stackTrace.callFrames) {\n        const location = callFrame.url + ':' + callFrame.lineNumber + ':' + callFrame.columnNumber;\n        const functionName = callFrame.functionName || '<anonymous>';\n        message += `\\n    at ${functionName} (${location})`;\n      }\n    }\n    const error = new Error(message);\n    error.stack = ''; // Don't capture Puppeteer stacktrace.\n    this.emit(\"pageerror\" /* PageEmittedEvents.PageError */, error);\n  } else {\n    (0, util_js_1.debugError)(`Unhandled LogEntry with type \"${event.type}\", text \"${event.text}\" and level \"${event.level}\"`);\n  }\n}, _Page_onLoad = function _Page_onLoad(_event) {\n  this.emit(\"load\" /* PageEmittedEvents.Load */);\n}, _Page_onDOMLoad = function _Page_onDOMLoad(_event) {\n  this.emit(\"domcontentloaded\" /* PageEmittedEvents.DOMContentLoaded */);\n};\n\nfunction isConsoleLogEntry(event) {\n  return event.type === 'console';\n}\nfunction isJavaScriptLogEntry(event) {\n  return event.type === 'javascript';\n}\nfunction getStackTraceLocations(stackTrace) {\n  const stackTraceLocations = [];\n  if (stackTrace) {\n    for (const callFrame of stackTrace.callFrames) {\n      stackTraceLocations.push({\n        url: callFrame.url,\n        lineNumber: callFrame.lineNumber,\n        columnNumber: callFrame.columnNumber\n      });\n    }\n  }\n  return stackTraceLocations;\n}","map":{"version":3,"names":["Page_js_1","require","ErrorLike_js_1","ConsoleMessage_js_1","util_js_1","Context_js_1","Serializer_js_1","Page","constructor","context","_Page_context","set","_Page_subscribedEvents","Map","__classPrivateFieldGet","_Page_instances","_Page_onLogEntryAdded","bind","_Page_onLoad","_Page_onDOMLoad","__classPrivateFieldSet","connection","send","events","keys","contexts","id","catch","error","isErrorLike","message","includes","event","subscriber","on","close","off","evaluateHandle","pageFunction","args","evaluate","goto","url","options","setDefaultNavigationTimeout","timeout","_timeoutSettings","setDefaultTimeout","setContent","html","content","retVal","document","doctype","XMLSerializer","serializeToString","documentElement","outerHTML","pdf","path","undefined","printBackground","background","margin","landscape","width","height","pageRanges","scale","preferCSSPageSize","_getPDFOptions","result","waitWithTimeout","_contextId","orientation","page","split","shrinkToFit","buffer","Buffer","from","data","_maybeWriteBufferToFile","createPDFStream","Readable","Promise","resolve","then","__importStar","TypeError","Error","screenshot","encoding","Object","length","exports","isConsoleLogEntry","map","arg","getBidiHandle","text","reduce","value","parsedValue","isPrimitiveValue","BidiSerializer","deserialize","remoteValue","toString","slice","emit","ConsoleMessage","method","getStackTraceLocations","stackTrace","isJavaScriptLogEntry","_a","callFrame","callFrames","location","lineNumber","columnNumber","functionName","stack","debugError","type","level","_event","stackTraceLocations","push"],"sources":["../../../../../src/common/bidi/Page.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}