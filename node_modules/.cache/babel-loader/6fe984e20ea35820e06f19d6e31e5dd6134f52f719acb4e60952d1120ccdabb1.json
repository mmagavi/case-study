{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Coverage_jsCoverage, _Coverage_cssCoverage, _JSCoverage_instances, _JSCoverage_client, _JSCoverage_enabled, _JSCoverage_scriptURLs, _JSCoverage_scriptSources, _JSCoverage_eventListeners, _JSCoverage_resetOnNavigation, _JSCoverage_reportAnonymousScripts, _JSCoverage_includeRawScriptCoverage, _JSCoverage_onExecutionContextsCleared, _JSCoverage_onScriptParsed, _CSSCoverage_instances, _CSSCoverage_client, _CSSCoverage_enabled, _CSSCoverage_stylesheetURLs, _CSSCoverage_stylesheetSources, _CSSCoverage_eventListeners, _CSSCoverage_resetOnNavigation, _CSSCoverage_onExecutionContextsCleared, _CSSCoverage_onStyleSheet;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CSSCoverage = exports.JSCoverage = exports.Coverage = void 0;\nconst assert_js_1 = require(\"../util/assert.js\");\nconst ExecutionContext_js_1 = require(\"./ExecutionContext.js\");\nconst util_js_1 = require(\"./util.js\");\nconst util_js_2 = require(\"./util.js\");\n/**\n * The Coverage class provides methods to gather information about parts of\n * JavaScript and CSS that were used by the page.\n *\n * @remarks\n * To output coverage in a form consumable by {@link https://github.com/istanbuljs | Istanbul},\n * see {@link https://github.com/istanbuljs/puppeteer-to-istanbul | puppeteer-to-istanbul}.\n *\n * @example\n * An example of using JavaScript and CSS coverage to get percentage of initially\n * executed code:\n *\n * ```ts\n * // Enable both JavaScript and CSS coverage\n * await Promise.all([\n *   page.coverage.startJSCoverage(),\n *   page.coverage.startCSSCoverage(),\n * ]);\n * // Navigate to page\n * await page.goto('https://example.com');\n * // Disable both JavaScript and CSS coverage\n * const [jsCoverage, cssCoverage] = await Promise.all([\n *   page.coverage.stopJSCoverage(),\n *   page.coverage.stopCSSCoverage(),\n * ]);\n * let totalBytes = 0;\n * let usedBytes = 0;\n * const coverage = [...jsCoverage, ...cssCoverage];\n * for (const entry of coverage) {\n *   totalBytes += entry.text.length;\n *   for (const range of entry.ranges) usedBytes += range.end - range.start - 1;\n * }\n * console.log(`Bytes used: ${(usedBytes / totalBytes) * 100}%`);\n * ```\n *\n * @public\n */\nclass Coverage {\n  constructor(client) {\n    _Coverage_jsCoverage.set(this, void 0);\n    _Coverage_cssCoverage.set(this, void 0);\n    __classPrivateFieldSet(this, _Coverage_jsCoverage, new JSCoverage(client), \"f\");\n    __classPrivateFieldSet(this, _Coverage_cssCoverage, new CSSCoverage(client), \"f\");\n  }\n  /**\n   * @param options - Set of configurable options for coverage defaults to\n   * `resetOnNavigation : true, reportAnonymousScripts : false,`\n   * `includeRawScriptCoverage : false, useBlockCoverage : true`\n   * @returns Promise that resolves when coverage is started.\n   *\n   * @remarks\n   * Anonymous scripts are ones that don't have an associated url. These are\n   * scripts that are dynamically created on the page using `eval` or\n   * `new Function`. If `reportAnonymousScripts` is set to `true`, anonymous\n   * scripts URL will start with `debugger://VM` (unless a magic //# sourceURL\n   * comment is present, in which case that will the be URL).\n   */\n  async startJSCoverage(options = {}) {\n    return await __classPrivateFieldGet(this, _Coverage_jsCoverage, \"f\").start(options);\n  }\n  /**\n   * Promise that resolves to the array of coverage reports for\n   * all scripts.\n   *\n   * @remarks\n   * JavaScript Coverage doesn't include anonymous scripts by default.\n   * However, scripts with sourceURLs are reported.\n   */\n  async stopJSCoverage() {\n    return await __classPrivateFieldGet(this, _Coverage_jsCoverage, \"f\").stop();\n  }\n  /**\n   * @param options - Set of configurable options for coverage, defaults to\n   * `resetOnNavigation : true`\n   * @returns Promise that resolves when coverage is started.\n   */\n  async startCSSCoverage(options = {}) {\n    return await __classPrivateFieldGet(this, _Coverage_cssCoverage, \"f\").start(options);\n  }\n  /**\n   * Promise that resolves to the array of coverage reports\n   * for all stylesheets.\n   *\n   * @remarks\n   * CSS Coverage doesn't include dynamically injected style tags\n   * without sourceURLs.\n   */\n  async stopCSSCoverage() {\n    return await __classPrivateFieldGet(this, _Coverage_cssCoverage, \"f\").stop();\n  }\n}\nexports.Coverage = Coverage;\n_Coverage_jsCoverage = new WeakMap(), _Coverage_cssCoverage = new WeakMap();\n/**\n * @public\n */\nclass JSCoverage {\n  constructor(client) {\n    _JSCoverage_instances.add(this);\n    _JSCoverage_client.set(this, void 0);\n    _JSCoverage_enabled.set(this, false);\n    _JSCoverage_scriptURLs.set(this, new Map());\n    _JSCoverage_scriptSources.set(this, new Map());\n    _JSCoverage_eventListeners.set(this, []);\n    _JSCoverage_resetOnNavigation.set(this, false);\n    _JSCoverage_reportAnonymousScripts.set(this, false);\n    _JSCoverage_includeRawScriptCoverage.set(this, false);\n    __classPrivateFieldSet(this, _JSCoverage_client, client, \"f\");\n  }\n  async start(options = {}) {\n    (0, assert_js_1.assert)(!__classPrivateFieldGet(this, _JSCoverage_enabled, \"f\"), 'JSCoverage is already enabled');\n    const {\n      resetOnNavigation = true,\n      reportAnonymousScripts = false,\n      includeRawScriptCoverage = false,\n      useBlockCoverage = true\n    } = options;\n    __classPrivateFieldSet(this, _JSCoverage_resetOnNavigation, resetOnNavigation, \"f\");\n    __classPrivateFieldSet(this, _JSCoverage_reportAnonymousScripts, reportAnonymousScripts, \"f\");\n    __classPrivateFieldSet(this, _JSCoverage_includeRawScriptCoverage, includeRawScriptCoverage, \"f\");\n    __classPrivateFieldSet(this, _JSCoverage_enabled, true, \"f\");\n    __classPrivateFieldGet(this, _JSCoverage_scriptURLs, \"f\").clear();\n    __classPrivateFieldGet(this, _JSCoverage_scriptSources, \"f\").clear();\n    __classPrivateFieldSet(this, _JSCoverage_eventListeners, [(0, util_js_1.addEventListener)(__classPrivateFieldGet(this, _JSCoverage_client, \"f\"), 'Debugger.scriptParsed', __classPrivateFieldGet(this, _JSCoverage_instances, \"m\", _JSCoverage_onScriptParsed).bind(this)), (0, util_js_1.addEventListener)(__classPrivateFieldGet(this, _JSCoverage_client, \"f\"), 'Runtime.executionContextsCleared', __classPrivateFieldGet(this, _JSCoverage_instances, \"m\", _JSCoverage_onExecutionContextsCleared).bind(this))], \"f\");\n    await Promise.all([__classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Profiler.enable'), __classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Profiler.startPreciseCoverage', {\n      callCount: __classPrivateFieldGet(this, _JSCoverage_includeRawScriptCoverage, \"f\"),\n      detailed: useBlockCoverage\n    }), __classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Debugger.enable'), __classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Debugger.setSkipAllPauses', {\n      skip: true\n    })]);\n  }\n  async stop() {\n    (0, assert_js_1.assert)(__classPrivateFieldGet(this, _JSCoverage_enabled, \"f\"), 'JSCoverage is not enabled');\n    __classPrivateFieldSet(this, _JSCoverage_enabled, false, \"f\");\n    const result = await Promise.all([__classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Profiler.takePreciseCoverage'), __classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Profiler.stopPreciseCoverage'), __classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Profiler.disable'), __classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Debugger.disable')]);\n    (0, util_js_2.removeEventListeners)(__classPrivateFieldGet(this, _JSCoverage_eventListeners, \"f\"));\n    const coverage = [];\n    const profileResponse = result[0];\n    for (const entry of profileResponse.result) {\n      let url = __classPrivateFieldGet(this, _JSCoverage_scriptURLs, \"f\").get(entry.scriptId);\n      if (!url && __classPrivateFieldGet(this, _JSCoverage_reportAnonymousScripts, \"f\")) {\n        url = 'debugger://VM' + entry.scriptId;\n      }\n      const text = __classPrivateFieldGet(this, _JSCoverage_scriptSources, \"f\").get(entry.scriptId);\n      if (text === undefined || url === undefined) {\n        continue;\n      }\n      const flattenRanges = [];\n      for (const func of entry.functions) {\n        flattenRanges.push(...func.ranges);\n      }\n      const ranges = convertToDisjointRanges(flattenRanges);\n      if (!__classPrivateFieldGet(this, _JSCoverage_includeRawScriptCoverage, \"f\")) {\n        coverage.push({\n          url,\n          ranges,\n          text\n        });\n      } else {\n        coverage.push({\n          url,\n          ranges,\n          text,\n          rawScriptCoverage: entry\n        });\n      }\n    }\n    return coverage;\n  }\n}\nexports.JSCoverage = JSCoverage;\n_JSCoverage_client = new WeakMap(), _JSCoverage_enabled = new WeakMap(), _JSCoverage_scriptURLs = new WeakMap(), _JSCoverage_scriptSources = new WeakMap(), _JSCoverage_eventListeners = new WeakMap(), _JSCoverage_resetOnNavigation = new WeakMap(), _JSCoverage_reportAnonymousScripts = new WeakMap(), _JSCoverage_includeRawScriptCoverage = new WeakMap(), _JSCoverage_instances = new WeakSet(), _JSCoverage_onExecutionContextsCleared = function _JSCoverage_onExecutionContextsCleared() {\n  if (!__classPrivateFieldGet(this, _JSCoverage_resetOnNavigation, \"f\")) {\n    return;\n  }\n  __classPrivateFieldGet(this, _JSCoverage_scriptURLs, \"f\").clear();\n  __classPrivateFieldGet(this, _JSCoverage_scriptSources, \"f\").clear();\n}, _JSCoverage_onScriptParsed = async function _JSCoverage_onScriptParsed(event) {\n  // Ignore puppeteer-injected scripts\n  if (event.url === ExecutionContext_js_1.EVALUATION_SCRIPT_URL) {\n    return;\n  }\n  // Ignore other anonymous scripts unless the reportAnonymousScripts option is true.\n  if (!event.url && !__classPrivateFieldGet(this, _JSCoverage_reportAnonymousScripts, \"f\")) {\n    return;\n  }\n  try {\n    const response = await __classPrivateFieldGet(this, _JSCoverage_client, \"f\").send('Debugger.getScriptSource', {\n      scriptId: event.scriptId\n    });\n    __classPrivateFieldGet(this, _JSCoverage_scriptURLs, \"f\").set(event.scriptId, event.url);\n    __classPrivateFieldGet(this, _JSCoverage_scriptSources, \"f\").set(event.scriptId, response.scriptSource);\n  } catch (error) {\n    // This might happen if the page has already navigated away.\n    (0, util_js_1.debugError)(error);\n  }\n};\n/**\n * @public\n */\nclass CSSCoverage {\n  constructor(client) {\n    _CSSCoverage_instances.add(this);\n    _CSSCoverage_client.set(this, void 0);\n    _CSSCoverage_enabled.set(this, false);\n    _CSSCoverage_stylesheetURLs.set(this, new Map());\n    _CSSCoverage_stylesheetSources.set(this, new Map());\n    _CSSCoverage_eventListeners.set(this, []);\n    _CSSCoverage_resetOnNavigation.set(this, false);\n    __classPrivateFieldSet(this, _CSSCoverage_client, client, \"f\");\n  }\n  async start(options = {}) {\n    (0, assert_js_1.assert)(!__classPrivateFieldGet(this, _CSSCoverage_enabled, \"f\"), 'CSSCoverage is already enabled');\n    const {\n      resetOnNavigation = true\n    } = options;\n    __classPrivateFieldSet(this, _CSSCoverage_resetOnNavigation, resetOnNavigation, \"f\");\n    __classPrivateFieldSet(this, _CSSCoverage_enabled, true, \"f\");\n    __classPrivateFieldGet(this, _CSSCoverage_stylesheetURLs, \"f\").clear();\n    __classPrivateFieldGet(this, _CSSCoverage_stylesheetSources, \"f\").clear();\n    __classPrivateFieldSet(this, _CSSCoverage_eventListeners, [(0, util_js_1.addEventListener)(__classPrivateFieldGet(this, _CSSCoverage_client, \"f\"), 'CSS.styleSheetAdded', __classPrivateFieldGet(this, _CSSCoverage_instances, \"m\", _CSSCoverage_onStyleSheet).bind(this)), (0, util_js_1.addEventListener)(__classPrivateFieldGet(this, _CSSCoverage_client, \"f\"), 'Runtime.executionContextsCleared', __classPrivateFieldGet(this, _CSSCoverage_instances, \"m\", _CSSCoverage_onExecutionContextsCleared).bind(this))], \"f\");\n    await Promise.all([__classPrivateFieldGet(this, _CSSCoverage_client, \"f\").send('DOM.enable'), __classPrivateFieldGet(this, _CSSCoverage_client, \"f\").send('CSS.enable'), __classPrivateFieldGet(this, _CSSCoverage_client, \"f\").send('CSS.startRuleUsageTracking')]);\n  }\n  async stop() {\n    (0, assert_js_1.assert)(__classPrivateFieldGet(this, _CSSCoverage_enabled, \"f\"), 'CSSCoverage is not enabled');\n    __classPrivateFieldSet(this, _CSSCoverage_enabled, false, \"f\");\n    const ruleTrackingResponse = await __classPrivateFieldGet(this, _CSSCoverage_client, \"f\").send('CSS.stopRuleUsageTracking');\n    await Promise.all([__classPrivateFieldGet(this, _CSSCoverage_client, \"f\").send('CSS.disable'), __classPrivateFieldGet(this, _CSSCoverage_client, \"f\").send('DOM.disable')]);\n    (0, util_js_2.removeEventListeners)(__classPrivateFieldGet(this, _CSSCoverage_eventListeners, \"f\"));\n    // aggregate by styleSheetId\n    const styleSheetIdToCoverage = new Map();\n    for (const entry of ruleTrackingResponse.ruleUsage) {\n      let ranges = styleSheetIdToCoverage.get(entry.styleSheetId);\n      if (!ranges) {\n        ranges = [];\n        styleSheetIdToCoverage.set(entry.styleSheetId, ranges);\n      }\n      ranges.push({\n        startOffset: entry.startOffset,\n        endOffset: entry.endOffset,\n        count: entry.used ? 1 : 0\n      });\n    }\n    const coverage = [];\n    for (const styleSheetId of __classPrivateFieldGet(this, _CSSCoverage_stylesheetURLs, \"f\").keys()) {\n      const url = __classPrivateFieldGet(this, _CSSCoverage_stylesheetURLs, \"f\").get(styleSheetId);\n      (0, assert_js_1.assert)(typeof url !== 'undefined', `Stylesheet URL is undefined (styleSheetId=${styleSheetId})`);\n      const text = __classPrivateFieldGet(this, _CSSCoverage_stylesheetSources, \"f\").get(styleSheetId);\n      (0, assert_js_1.assert)(typeof text !== 'undefined', `Stylesheet text is undefined (styleSheetId=${styleSheetId})`);\n      const ranges = convertToDisjointRanges(styleSheetIdToCoverage.get(styleSheetId) || []);\n      coverage.push({\n        url,\n        ranges,\n        text\n      });\n    }\n    return coverage;\n  }\n}\nexports.CSSCoverage = CSSCoverage;\n_CSSCoverage_client = new WeakMap(), _CSSCoverage_enabled = new WeakMap(), _CSSCoverage_stylesheetURLs = new WeakMap(), _CSSCoverage_stylesheetSources = new WeakMap(), _CSSCoverage_eventListeners = new WeakMap(), _CSSCoverage_resetOnNavigation = new WeakMap(), _CSSCoverage_instances = new WeakSet(), _CSSCoverage_onExecutionContextsCleared = function _CSSCoverage_onExecutionContextsCleared() {\n  if (!__classPrivateFieldGet(this, _CSSCoverage_resetOnNavigation, \"f\")) {\n    return;\n  }\n  __classPrivateFieldGet(this, _CSSCoverage_stylesheetURLs, \"f\").clear();\n  __classPrivateFieldGet(this, _CSSCoverage_stylesheetSources, \"f\").clear();\n}, _CSSCoverage_onStyleSheet = async function _CSSCoverage_onStyleSheet(event) {\n  const header = event.header;\n  // Ignore anonymous scripts\n  if (!header.sourceURL) {\n    return;\n  }\n  try {\n    const response = await __classPrivateFieldGet(this, _CSSCoverage_client, \"f\").send('CSS.getStyleSheetText', {\n      styleSheetId: header.styleSheetId\n    });\n    __classPrivateFieldGet(this, _CSSCoverage_stylesheetURLs, \"f\").set(header.styleSheetId, header.sourceURL);\n    __classPrivateFieldGet(this, _CSSCoverage_stylesheetSources, \"f\").set(header.styleSheetId, response.text);\n  } catch (error) {\n    // This might happen if the page has already navigated away.\n    (0, util_js_1.debugError)(error);\n  }\n};\nfunction convertToDisjointRanges(nestedRanges) {\n  const points = [];\n  for (const range of nestedRanges) {\n    points.push({\n      offset: range.startOffset,\n      type: 0,\n      range\n    });\n    points.push({\n      offset: range.endOffset,\n      type: 1,\n      range\n    });\n  }\n  // Sort points to form a valid parenthesis sequence.\n  points.sort((a, b) => {\n    // Sort with increasing offsets.\n    if (a.offset !== b.offset) {\n      return a.offset - b.offset;\n    }\n    // All \"end\" points should go before \"start\" points.\n    if (a.type !== b.type) {\n      return b.type - a.type;\n    }\n    const aLength = a.range.endOffset - a.range.startOffset;\n    const bLength = b.range.endOffset - b.range.startOffset;\n    // For two \"start\" points, the one with longer range goes first.\n    if (a.type === 0) {\n      return bLength - aLength;\n    }\n    // For two \"end\" points, the one with shorter range goes first.\n    return aLength - bLength;\n  });\n  const hitCountStack = [];\n  const results = [];\n  let lastOffset = 0;\n  // Run scanning line to intersect all ranges.\n  for (const point of points) {\n    if (hitCountStack.length && lastOffset < point.offset && hitCountStack[hitCountStack.length - 1] > 0) {\n      const lastResult = results[results.length - 1];\n      if (lastResult && lastResult.end === lastOffset) {\n        lastResult.end = point.offset;\n      } else {\n        results.push({\n          start: lastOffset,\n          end: point.offset\n        });\n      }\n    }\n    lastOffset = point.offset;\n    if (point.type === 0) {\n      hitCountStack.push(point.range.count);\n    } else {\n      hitCountStack.pop();\n    }\n  }\n  // Filter out empty ranges.\n  return results.filter(range => {\n    return range.end - range.start > 0;\n  });\n}","map":{"version":3,"names":["assert_js_1","require","ExecutionContext_js_1","util_js_1","util_js_2","Coverage","constructor","client","_Coverage_jsCoverage","set","_Coverage_cssCoverage","__classPrivateFieldSet","JSCoverage","CSSCoverage","startJSCoverage","options","__classPrivateFieldGet","start","stopJSCoverage","stop","startCSSCoverage","stopCSSCoverage","exports","_JSCoverage_client","_JSCoverage_enabled","_JSCoverage_scriptURLs","Map","_JSCoverage_scriptSources","_JSCoverage_eventListeners","_JSCoverage_resetOnNavigation","_JSCoverage_reportAnonymousScripts","_JSCoverage_includeRawScriptCoverage","assert","resetOnNavigation","reportAnonymousScripts","includeRawScriptCoverage","useBlockCoverage","clear","addEventListener","_JSCoverage_instances","_JSCoverage_onScriptParsed","bind","_JSCoverage_onExecutionContextsCleared","Promise","all","send","callCount","detailed","skip","result","removeEventListeners","coverage","profileResponse","entry","url","get","scriptId","text","undefined","flattenRanges","func","functions","push","ranges","convertToDisjointRanges","rawScriptCoverage","event","EVALUATION_SCRIPT_URL","response","scriptSource","error","debugError","_CSSCoverage_client","_CSSCoverage_enabled","_CSSCoverage_stylesheetURLs","_CSSCoverage_stylesheetSources","_CSSCoverage_eventListeners","_CSSCoverage_resetOnNavigation","_CSSCoverage_instances","_CSSCoverage_onStyleSheet","_CSSCoverage_onExecutionContextsCleared","ruleTrackingResponse","styleSheetIdToCoverage","ruleUsage","styleSheetId","startOffset","endOffset","count","used","keys","header","sourceURL","nestedRanges","points","range","offset","type","sort","a","b","aLength","bLength","hitCountStack","results","lastOffset","point","length","lastResult","end","pop","filter"],"sources":["../../../../src/common/Coverage.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}