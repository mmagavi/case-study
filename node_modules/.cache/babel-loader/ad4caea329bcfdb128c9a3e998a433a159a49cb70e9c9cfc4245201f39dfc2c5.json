{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2022 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Browser_process, _Browser_closeCallback, _Browser_connection;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Browser = void 0;\nconst Browser_js_1 = require(\"../../api/Browser.js\");\nconst BrowserContext_js_1 = require(\"./BrowserContext.js\");\n/**\n * @internal\n */\nclass Browser extends Browser_js_1.Browser {\n  static async create(opts) {\n    // TODO: await until the connection is established.\n    try {\n      await opts.connection.send('session.new', {});\n    } catch {}\n    await opts.connection.send('session.subscribe', {\n      events: ['browsingContext.contextCreated']\n    });\n    return new Browser(opts);\n  }\n  constructor(opts) {\n    super();\n    _Browser_process.set(this, void 0);\n    _Browser_closeCallback.set(this, void 0);\n    _Browser_connection.set(this, void 0);\n    __classPrivateFieldSet(this, _Browser_process, opts.process, \"f\");\n    __classPrivateFieldSet(this, _Browser_closeCallback, opts.closeCallback, \"f\");\n    __classPrivateFieldSet(this, _Browser_connection, opts.connection, \"f\");\n  }\n  async close() {\n    var _a;\n    __classPrivateFieldGet(this, _Browser_connection, \"f\").dispose();\n    await ((_a = __classPrivateFieldGet(this, _Browser_closeCallback, \"f\")) === null || _a === void 0 ? void 0 : _a.call(null));\n  }\n  isConnected() {\n    return !__classPrivateFieldGet(this, _Browser_connection, \"f\").closed;\n  }\n  process() {\n    var _a;\n    return (_a = __classPrivateFieldGet(this, _Browser_process, \"f\")) !== null && _a !== void 0 ? _a : null;\n  }\n  async createIncognitoBrowserContext(_options) {\n    return new BrowserContext_js_1.BrowserContext(__classPrivateFieldGet(this, _Browser_connection, \"f\"));\n  }\n}\nexports.Browser = Browser;\n_Browser_process = new WeakMap(), _Browser_closeCallback = new WeakMap(), _Browser_connection = new WeakMap();","map":{"version":3,"names":["Browser_js_1","require","BrowserContext_js_1","Browser","create","opts","connection","send","events","constructor","_Browser_process","set","_Browser_closeCallback","_Browser_connection","__classPrivateFieldSet","process","closeCallback","close","__classPrivateFieldGet","dispose","_a","call","isConnected","closed","createIncognitoBrowserContext","_options","BrowserContext","exports"],"sources":["../../../../../src/common/bidi/Browser.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoBA,MAAAA,YAAA,GAAAC,OAAA;AAOA,MAAAC,mBAAA,GAAAD,OAAA;AAGA;;;AAGA,MAAaE,OAAQ,SAAQH,YAAA,CAAAG,OAAW;EACtC,aAAaC,MAAMA,CAACC,IAAa;IAC/B;IACA,IAAI;MACF,MAAMA,IAAI,CAACC,UAAU,CAACC,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC;KAC9C,CAAC,MAAM;IACR,MAAMF,IAAI,CAACC,UAAU,CAACC,IAAI,CAAC,mBAAmB,EAAE;MAC9CC,MAAM,EAAE,CACN,gCAAgC;KAEnC,CAAC;IACF,OAAO,IAAIL,OAAO,CAACE,IAAI,CAAC;EAC1B;EAMAI,YAAYJ,IAAa;IACvB,KAAK,EAAE;IALTK,gBAAA,CAAAC,GAAA;IACAC,sBAAA,CAAAD,GAAA;IACAE,mBAAA,CAAAF,GAAA;IAIEG,sBAAA,KAAI,EAAAJ,gBAAA,EAAYL,IAAI,CAACU,OAAO;IAC5BD,sBAAA,KAAI,EAAAF,sBAAA,EAAkBP,IAAI,CAACW,aAAa;IACxCF,sBAAA,KAAI,EAAAD,mBAAA,EAAeR,IAAI,CAACC,UAAU;EACpC;EAES,MAAMW,KAAKA,CAAA;;IAClBC,sBAAA,KAAI,EAAAL,mBAAA,MAAY,CAACM,OAAO,EAAE;IAC1B,OAAM,CAAAC,EAAA,GAAAF,sBAAA,KAAI,EAAAN,sBAAA,MAAe,cAAAQ,EAAA,uBAAAA,EAAA,CAAEC,IAAI,CAAC,IAAI,CAAC;EACvC;EAESC,WAAWA,CAAA;IAClB,OAAO,CAACJ,sBAAA,KAAI,EAAAL,mBAAA,MAAY,CAACU,MAAM;EACjC;EAESR,OAAOA,CAAA;;IACd,OAAO,CAAAK,EAAA,GAAAF,sBAAA,KAAI,EAAAR,gBAAA,MAAS,cAAAU,EAAA,cAAAA,EAAA,GAAI,IAAI;EAC9B;EAES,MAAMI,6BAA6BA,CAC1CC,QAAgC;IAEhC,OAAO,IAAIvB,mBAAA,CAAAwB,cAAc,CAACR,sBAAA,KAAI,EAAAL,mBAAA,MAAY,CAAC;EAC7C;;AA1CFc,OAAA,CAAAxB,OAAA,GAAAA,OAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}