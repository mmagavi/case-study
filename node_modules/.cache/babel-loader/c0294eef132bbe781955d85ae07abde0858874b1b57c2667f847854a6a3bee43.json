{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getQueryHandlerAndSelector = exports.getQueryHandlerByName = exports.BUILTIN_QUERY_HANDLERS = void 0;\nconst AriaQueryHandler_js_1 = require(\"./AriaQueryHandler.js\");\nconst CustomQueryHandler_js_1 = require(\"./CustomQueryHandler.js\");\nconst PierceQueryHandler_js_1 = require(\"./PierceQueryHandler.js\");\nconst PQueryHandler_js_1 = require(\"./PQueryHandler.js\");\nconst TextQueryHandler_js_1 = require(\"./TextQueryHandler.js\");\nconst XPathQueryHandler_js_1 = require(\"./XPathQueryHandler.js\");\nexports.BUILTIN_QUERY_HANDLERS = Object.freeze({\n  aria: AriaQueryHandler_js_1.ARIAQueryHandler,\n  pierce: PierceQueryHandler_js_1.PierceQueryHandler,\n  xpath: XPathQueryHandler_js_1.XPathQueryHandler,\n  text: TextQueryHandler_js_1.TextQueryHandler\n});\nconst QUERY_SEPARATORS = ['=', '/'];\n/**\n * @internal\n */\nfunction getQueryHandlerByName(name) {\n  if (name in exports.BUILTIN_QUERY_HANDLERS) {\n    return exports.BUILTIN_QUERY_HANDLERS[name];\n  }\n  return CustomQueryHandler_js_1.customQueryHandlers.get(name);\n}\nexports.getQueryHandlerByName = getQueryHandlerByName;\n/**\n * @internal\n */\nfunction getQueryHandlerAndSelector(selector) {\n  for (const handlerMap of [CustomQueryHandler_js_1.customQueryHandlers.names().map(name => {\n    return [name, CustomQueryHandler_js_1.customQueryHandlers.get(name)];\n  }), Object.entries(exports.BUILTIN_QUERY_HANDLERS)]) {\n    for (const [name, QueryHandler] of handlerMap) {\n      for (const separator of QUERY_SEPARATORS) {\n        const prefix = `${name}${separator}`;\n        if (selector.startsWith(prefix)) {\n          selector = selector.slice(prefix.length);\n          return {\n            updatedSelector: selector,\n            QueryHandler\n          };\n        }\n      }\n    }\n  }\n  return {\n    updatedSelector: selector,\n    QueryHandler: PQueryHandler_js_1.PQueryHandler\n  };\n}\nexports.getQueryHandlerAndSelector = getQueryHandlerAndSelector;","map":{"version":3,"names":["AriaQueryHandler_js_1","require","CustomQueryHandler_js_1","PierceQueryHandler_js_1","PQueryHandler_js_1","TextQueryHandler_js_1","XPathQueryHandler_js_1","exports","BUILTIN_QUERY_HANDLERS","Object","freeze","aria","ARIAQueryHandler","pierce","PierceQueryHandler","xpath","XPathQueryHandler","text","TextQueryHandler","QUERY_SEPARATORS","getQueryHandlerByName","name","customQueryHandlers","get","getQueryHandlerAndSelector","selector","handlerMap","names","map","entries","QueryHandler","separator","prefix","startsWith","slice","length","updatedSelector","PQueryHandler"],"sources":["../../../../src/common/GetQueryHandler.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;AAgBA,MAAAA,qBAAA,GAAAC,OAAA;AACA,MAAAC,uBAAA,GAAAD,OAAA;AACA,MAAAE,uBAAA,GAAAF,OAAA;AACA,MAAAG,kBAAA,GAAAH,OAAA;AAEA,MAAAI,qBAAA,GAAAJ,OAAA;AACA,MAAAK,sBAAA,GAAAL,OAAA;AAEaM,OAAA,CAAAC,sBAAsB,GAAGC,MAAM,CAACC,MAAM,CAAC;EAClDC,IAAI,EAAEX,qBAAA,CAAAY,gBAAgB;EACtBC,MAAM,EAAEV,uBAAA,CAAAW,kBAAkB;EAC1BC,KAAK,EAAET,sBAAA,CAAAU,iBAAiB;EACxBC,IAAI,EAAEZ,qBAAA,CAAAa;CACP,CAAC;AAEF,MAAMC,gBAAgB,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC;AAEnC;;;AAGA,SAAgBC,qBAAqBA,CACnCC,IAAY;EAEZ,IAAIA,IAAI,IAAId,OAAA,CAAAC,sBAAsB,EAAE;IAClC,OAAOD,OAAA,CAAAC,sBAAsB,CAACa,IAAc,CAAC;;EAE/C,OAAOnB,uBAAA,CAAAoB,mBAAmB,CAACC,GAAG,CAACF,IAAI,CAAC;AACtC;AAPAd,OAAA,CAAAa,qBAAA,GAAAA,qBAAA;AASA;;;AAGA,SAAgBI,0BAA0BA,CAACC,QAAgB;EAIzD,KAAK,MAAMC,UAAU,IAAI,CACvBxB,uBAAA,CAAAoB,mBAAmB,CAACK,KAAK,EAAE,CAACC,GAAG,CAACP,IAAI,IAAG;IACrC,OAAO,CAACA,IAAI,EAAEnB,uBAAA,CAAAoB,mBAAmB,CAACC,GAAG,CAACF,IAAI,CAAE,CAAU;EACxD,CAAC,CAAC,EACFZ,MAAM,CAACoB,OAAO,CAACtB,OAAA,CAAAC,sBAAsB,CAAC,CACvC,EAAE;IACD,KAAK,MAAM,CAACa,IAAI,EAAES,YAAY,CAAC,IAAIJ,UAAU,EAAE;MAC7C,KAAK,MAAMK,SAAS,IAAIZ,gBAAgB,EAAE;QACxC,MAAMa,MAAM,GAAG,GAAGX,IAAI,GAAGU,SAAS,EAAE;QACpC,IAAIN,QAAQ,CAACQ,UAAU,CAACD,MAAM,CAAC,EAAE;UAC/BP,QAAQ,GAAGA,QAAQ,CAACS,KAAK,CAACF,MAAM,CAACG,MAAM,CAAC;UACxC,OAAO;YAACC,eAAe,EAAEX,QAAQ;YAAEK;UAAY,CAAC;;;;;EAKxD,OAAO;IAACM,eAAe,EAAEX,QAAQ;IAAEK,YAAY,EAAE1B,kBAAA,CAAAiC;EAAa,CAAC;AACjE;AArBA9B,OAAA,CAAAiB,0BAAA,GAAAA,0BAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}