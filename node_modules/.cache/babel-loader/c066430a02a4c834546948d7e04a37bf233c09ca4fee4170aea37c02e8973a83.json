{"ast":null,"code":"import { homedir } from 'os';\nimport { join } from 'path';\nimport { cosmiconfigSync } from 'cosmiconfig';\n/**\n * @internal\n */\nfunction isSupportedProduct(product) {\n  switch (product) {\n    case 'chrome':\n    case 'firefox':\n      return true;\n    default:\n      return false;\n  }\n}\n/**\n * @internal\n */\nexport const getConfiguration = () => {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12;\n  const result = cosmiconfigSync('puppeteer').search();\n  const configuration = result ? result.config : {};\n  // Merging environment variables.\n  configuration.defaultProduct = (_d = (_c = (_b = (_a = process.env['PUPPETEER_PRODUCT']) !== null && _a !== void 0 ? _a : process.env['npm_config_puppeteer_product']) !== null && _b !== void 0 ? _b : process.env['npm_package_config_puppeteer_product']) !== null && _c !== void 0 ? _c : configuration.defaultProduct) !== null && _d !== void 0 ? _d : 'chrome';\n  configuration.executablePath = (_g = (_f = (_e = process.env['PUPPETEER_EXECUTABLE_PATH']) !== null && _e !== void 0 ? _e : process.env['npm_config_puppeteer_executable_path']) !== null && _f !== void 0 ? _f : process.env['npm_package_config_puppeteer_executable_path']) !== null && _g !== void 0 ? _g : configuration.executablePath;\n  // Default to skipDownload if executablePath is set\n  if (configuration.executablePath) {\n    configuration.skipDownload = true;\n  }\n  // Set skipDownload explicitly or from default\n  configuration.skipDownload = Boolean((_o = (_m = (_l = (_k = (_j = (_h = process.env['PUPPETEER_SKIP_DOWNLOAD']) !== null && _h !== void 0 ? _h : process.env['npm_config_puppeteer_skip_download']) !== null && _j !== void 0 ? _j : process.env['npm_package_config_puppeteer_skip_download']) !== null && _k !== void 0 ? _k : process.env['PUPPETEER_SKIP_CHROMIUM_DOWNLOAD']) !== null && _l !== void 0 ? _l : process.env['npm_config_puppeteer_skip_chromium_download']) !== null && _m !== void 0 ? _m : process.env['npm_package_config_puppeteer_skip_chromium_download']) !== null && _o !== void 0 ? _o : configuration.skipDownload);\n  // Prepare variables used in browser downloading\n  if (!configuration.skipDownload) {\n    configuration.browserRevision = (_s = (_r = (_q = (_p = process.env['PUPPETEER_CHROMIUM_REVISION']) !== null && _p !== void 0 ? _p : process.env['PUPPETEER_BROWSER_REVISION']) !== null && _q !== void 0 ? _q : process.env['npm_config_puppeteer_browser_revision']) !== null && _r !== void 0 ? _r : process.env['npm_package_config_puppeteer_browser_revision']) !== null && _s !== void 0 ? _s : configuration.browserRevision;\n    configuration.downloadHost = (_v = (_u = (_t = process.env['PUPPETEER_DOWNLOAD_HOST']) !== null && _t !== void 0 ? _t : process.env['npm_config_puppeteer_download_host']) !== null && _u !== void 0 ? _u : process.env['npm_package_config_puppeteer_download_host']) !== null && _v !== void 0 ? _v : configuration.downloadHost;\n    configuration.downloadPath = (_y = (_x = (_w = process.env['PUPPETEER_DOWNLOAD_PATH']) !== null && _w !== void 0 ? _w : process.env['npm_config_puppeteer_download_path']) !== null && _x !== void 0 ? _x : process.env['npm_package_config_puppeteer_download_path']) !== null && _y !== void 0 ? _y : configuration.downloadPath;\n  }\n  configuration.cacheDirectory = (_2 = (_1 = (_0 = (_z = process.env['PUPPETEER_CACHE_DIR']) !== null && _z !== void 0 ? _z : process.env['npm_config_puppeteer_cache_dir']) !== null && _0 !== void 0 ? _0 : process.env['npm_package_config_puppeteer_cache_dir']) !== null && _1 !== void 0 ? _1 : configuration.cacheDirectory) !== null && _2 !== void 0 ? _2 : join(homedir(), '.cache', 'puppeteer');\n  configuration.temporaryDirectory = (_5 = (_4 = (_3 = process.env['PUPPETEER_TMP_DIR']) !== null && _3 !== void 0 ? _3 : process.env['npm_config_puppeteer_tmp_dir']) !== null && _4 !== void 0 ? _4 : process.env['npm_package_config_puppeteer_tmp_dir']) !== null && _5 !== void 0 ? _5 : configuration.temporaryDirectory;\n  (_6 = configuration.experiments) !== null && _6 !== void 0 ? _6 : configuration.experiments = {};\n  configuration.experiments.macArmChromiumEnabled = Boolean((_9 = (_8 = (_7 = process.env['PUPPETEER_EXPERIMENTAL_CHROMIUM_MAC_ARM']) !== null && _7 !== void 0 ? _7 : process.env['npm_config_puppeteer_experimental_chromium_mac_arm']) !== null && _8 !== void 0 ? _8 : process.env['npm_package_config_puppeteer_experimental_chromium_mac_arm']) !== null && _9 !== void 0 ? _9 : configuration.experiments.macArmChromiumEnabled);\n  configuration.logLevel = (_12 = (_11 = (_10 = process.env['PUPPETEER_LOGLEVEL']) !== null && _10 !== void 0 ? _10 : process.env['npm_config_LOGLEVEL']) !== null && _11 !== void 0 ? _11 : process.env['npm_package_config_LOGLEVEL']) !== null && _12 !== void 0 ? _12 : configuration.logLevel;\n  // Validate configuration.\n  if (!isSupportedProduct(configuration.defaultProduct)) {\n    throw new Error(`Unsupported product ${configuration.defaultProduct}`);\n  }\n  return configuration;\n};","map":{"version":3,"names":["homedir","join","cosmiconfigSync","isSupportedProduct","product","getConfiguration","result","search","configuration","config","defaultProduct","_d","_c","_b","_a","process","env","executablePath","_g","_f","_e","skipDownload","Boolean","_o","_m","_l","_k","_j","_h","browserRevision","_s","_r","_q","_p","downloadHost","_v","_u","_t","downloadPath","_y","_x","_w","cacheDirectory","_2","_1","_0","_z","temporaryDirectory","_5","_4","_3","_6","experiments","macArmChromiumEnabled","_9","_8","_7","logLevel","_12","_11","_10","Error"],"sources":["../../../src/getConfiguration.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}