{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2022 Google LLC.\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Buffer = void 0;\n/**\n * Implements a FIFO buffer with a fixed size.\n */\nclass Buffer {\n  #capacity;\n  #entries = [];\n  #onItemRemoved;\n  /**\n   * @param capacity\n   * @param onItemRemoved optional delegate called for each removed element.\n   */\n  constructor(capacity, onItemRemoved = () => {}) {\n    this.#capacity = capacity;\n    this.#onItemRemoved = onItemRemoved;\n  }\n  get() {\n    return this.#entries;\n  }\n  add(value) {\n    this.#entries.push(value);\n    while (this.#entries.length > this.#capacity) {\n      const item = this.#entries.shift();\n      if (item !== undefined) {\n        this.#onItemRemoved(item);\n      }\n    }\n  }\n}\nexports.Buffer = Buffer;","map":{"version":3,"names":["Buffer","capacity","entries","onItemRemoved","constructor","get","add","value","push","length","item","shift","undefined","exports"],"sources":["../../../src/utils/buffer.ts"],"sourcesContent":[null],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;AAiBA;;;AAGA,MAAaA,MAAM;EACR,CAAAC,QAAS;EACT,CAAAC,OAAQ,GAAQ,EAAE;EAClB,CAAAC,aAAc;EAEvB;;;;EAIAC,YAAYH,QAAgB,EAAEE,aAAA,GAAoCA,CAAA,KAAK,CAAE,CAAC;IACxE,IAAI,CAAC,CAAAF,QAAS,GAAGA,QAAQ;IACzB,IAAI,CAAC,CAAAE,aAAc,GAAGA,aAAa;EACrC;EAEAE,GAAGA,CAAA;IACD,OAAO,IAAI,CAAC,CAAAH,OAAQ;EACtB;EAEAI,GAAGA,CAACC,KAAQ;IACV,IAAI,CAAC,CAAAL,OAAQ,CAACM,IAAI,CAACD,KAAK,CAAC;IACzB,OAAO,IAAI,CAAC,CAAAL,OAAQ,CAACO,MAAM,GAAG,IAAI,CAAC,CAAAR,QAAS,EAAE;MAC5C,MAAMS,IAAI,GAAG,IAAI,CAAC,CAAAR,OAAQ,CAACS,KAAK,EAAE;MAClC,IAAID,IAAI,KAAKE,SAAS,EAAE;QACtB,IAAI,CAAC,CAAAT,aAAc,CAACO,IAAI,CAAC;;;EAG/B;;AA1BFG,OAAA,CAAAb,MAAA,GAAAA,MAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}