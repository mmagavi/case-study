{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Frame_url, _Frame_detached, _Frame_client;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Frame = void 0;\nconst assert_js_1 = require(\"../util/assert.js\");\nconst ErrorLike_js_1 = require(\"../util/ErrorLike.js\");\nconst GetQueryHandler_js_1 = require(\"./GetQueryHandler.js\");\nconst IsolatedWorld_js_1 = require(\"./IsolatedWorld.js\");\nconst IsolatedWorlds_js_1 = require(\"./IsolatedWorlds.js\");\nconst LazyArg_js_1 = require(\"./LazyArg.js\");\nconst LifecycleWatcher_js_1 = require(\"./LifecycleWatcher.js\");\nconst util_js_1 = require(\"./util.js\");\n/**\n * Represents a DOM frame.\n *\n * To understand frames, you can think of frames as `<iframe>` elements. Just\n * like iframes, frames can be nested, and when JavaScript is executed in a\n * frame, the JavaScript does not effect frames inside the ambient frame the\n * JavaScript executes in.\n *\n * @example\n * At any point in time, {@link Page | pages} expose their current frame\n * tree via the {@link Page.mainFrame} and {@link Frame.childFrames} methods.\n *\n * @example\n * An example of dumping frame tree:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://www.google.com/chrome/browser/canary.html');\n *   dumpFrameTree(page.mainFrame(), '');\n *   await browser.close();\n *\n *   function dumpFrameTree(frame, indent) {\n *     console.log(indent + frame.url());\n *     for (const child of frame.childFrames()) {\n *       dumpFrameTree(child, indent + '  ');\n *     }\n *   }\n * })();\n * ```\n *\n * @example\n * An example of getting text from an iframe element:\n *\n * ```ts\n * const frame = page.frames().find(frame => frame.name() === 'myframe');\n * const text = await frame.$eval('.selector', element => element.textContent);\n * console.log(text);\n * ```\n *\n * @remarks\n * Frame lifecycles are controlled by three events that are all dispatched on\n * the parent {@link Frame.page | page}:\n *\n * - {@link PageEmittedEvents.FrameAttached}\n * - {@link PageEmittedEvents.FrameNavigated}\n * - {@link PageEmittedEvents.FrameDetached}\n *\n * @public\n */\nclass Frame {\n  /**\n   * @internal\n   */\n  constructor(frameManager, frameId, parentFrameId, client) {\n    _Frame_url.set(this, '');\n    _Frame_detached.set(this, false);\n    _Frame_client.set(this, void 0);\n    /**\n     * @internal\n     */\n    this._loaderId = '';\n    /**\n     * @internal\n     */\n    this._hasStartedLoading = false;\n    /**\n     * @internal\n     */\n    this._lifecycleEvents = new Set();\n    this._frameManager = frameManager;\n    __classPrivateFieldSet(this, _Frame_url, '', \"f\");\n    this._id = frameId;\n    this._parentId = parentFrameId;\n    __classPrivateFieldSet(this, _Frame_detached, false, \"f\");\n    this._loaderId = '';\n    this.updateClient(client);\n  }\n  /**\n   * @internal\n   */\n  updateClient(client) {\n    __classPrivateFieldSet(this, _Frame_client, client, \"f\");\n    this.worlds = {\n      [IsolatedWorlds_js_1.MAIN_WORLD]: new IsolatedWorld_js_1.IsolatedWorld(this),\n      [IsolatedWorlds_js_1.PUPPETEER_WORLD]: new IsolatedWorld_js_1.IsolatedWorld(this)\n    };\n  }\n  /**\n   * The page associated with the frame.\n   */\n  page() {\n    return this._frameManager.page();\n  }\n  /**\n   * Is `true` if the frame is an out-of-process (OOP) frame. Otherwise,\n   * `false`.\n   */\n  isOOPFrame() {\n    return __classPrivateFieldGet(this, _Frame_client, \"f\") !== this._frameManager.client;\n  }\n  /**\n   * Navigates a frame to the given url.\n   *\n   * @remarks\n   * Navigation to `about:blank` or navigation to the same URL with a different\n   * hash will succeed and return `null`.\n   *\n   * :::warning\n   *\n   * Headless mode doesn't support navigation to a PDF document. See the {@link\n   * https://bugs.chromium.org/p/chromium/issues/detail?id=761295 | upstream\n   * issue}.\n   *\n   * :::\n   *\n   * @param url - the URL to navigate the frame to. This should include the\n   * scheme, e.g. `https://`.\n   * @param options - navigation options. `waitUntil` is useful to define when\n   * the navigation should be considered successful - see the docs for\n   * {@link PuppeteerLifeCycleEvent} for more details.\n   *\n   * @returns A promise which resolves to the main resource response. In case of\n   * multiple redirects, the navigation will resolve with the response of the\n   * last redirect.\n   * @throws This method will throw an error if:\n   *\n   * - there's an SSL error (e.g. in case of self-signed certificates).\n   * - target URL is invalid.\n   * - the `timeout` is exceeded during navigation.\n   * - the remote server does not respond or is unreachable.\n   * - the main resource failed to load.\n   *\n   * This method will not throw an error when any valid HTTP status code is\n   * returned by the remote server, including 404 \"Not Found\" and 500 \"Internal\n   * Server Error\". The status code for such responses can be retrieved by\n   * calling {@link HTTPResponse.status}.\n   */\n  async goto(url, options = {}) {\n    const {\n      referer = this._frameManager.networkManager.extraHTTPHeaders()['referer'],\n      referrerPolicy = this._frameManager.networkManager.extraHTTPHeaders()['referer-policy'],\n      waitUntil = ['load'],\n      timeout = this._frameManager.timeoutSettings.navigationTimeout()\n    } = options;\n    let ensureNewDocumentNavigation = false;\n    const watcher = new LifecycleWatcher_js_1.LifecycleWatcher(this._frameManager, this, waitUntil, timeout);\n    let error = await Promise.race([navigate(__classPrivateFieldGet(this, _Frame_client, \"f\"), url, referer, referrerPolicy, this._id), watcher.timeoutOrTerminationPromise()]);\n    if (!error) {\n      error = await Promise.race([watcher.timeoutOrTerminationPromise(), ensureNewDocumentNavigation ? watcher.newDocumentNavigationPromise() : watcher.sameDocumentNavigationPromise()]);\n    }\n    try {\n      if (error) {\n        throw error;\n      }\n      return await watcher.navigationResponse();\n    } finally {\n      watcher.dispose();\n    }\n    async function navigate(client, url, referrer, referrerPolicy, frameId) {\n      try {\n        const response = await client.send('Page.navigate', {\n          url,\n          referrer,\n          frameId,\n          referrerPolicy\n        });\n        ensureNewDocumentNavigation = !!response.loaderId;\n        if (response.errorText === 'net::ERR_HTTP_RESPONSE_CODE_FAILURE') {\n          return null;\n        }\n        return response.errorText ? new Error(`${response.errorText} at ${url}`) : null;\n      } catch (error) {\n        if ((0, ErrorLike_js_1.isErrorLike)(error)) {\n          return error;\n        }\n        throw error;\n      }\n    }\n  }\n  /**\n   * Waits for the frame to navigate. It is useful for when you run code which\n   * will indirectly cause the frame to navigate.\n   *\n   * Usage of the\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/History_API | History API}\n   * to change the URL is considered a navigation.\n   *\n   * @example\n   *\n   * ```ts\n   * const [response] = await Promise.all([\n   *   // The navigation promise resolves after navigation has finished\n   *   frame.waitForNavigation(),\n   *   // Clicking the link will indirectly cause a navigation\n   *   frame.click('a.my-link'),\n   * ]);\n   * ```\n   *\n   * @param options - options to configure when the navigation is consided\n   * finished.\n   * @returns a promise that resolves when the frame navigates to a new URL.\n   */\n  async waitForNavigation(options = {}) {\n    const {\n      waitUntil = ['load'],\n      timeout = this._frameManager.timeoutSettings.navigationTimeout()\n    } = options;\n    const watcher = new LifecycleWatcher_js_1.LifecycleWatcher(this._frameManager, this, waitUntil, timeout);\n    const error = await Promise.race([watcher.timeoutOrTerminationPromise(), watcher.sameDocumentNavigationPromise(), watcher.newDocumentNavigationPromise()]);\n    try {\n      if (error) {\n        throw error;\n      }\n      return await watcher.navigationResponse();\n    } finally {\n      watcher.dispose();\n    }\n  }\n  /**\n   * @internal\n   */\n  _client() {\n    return __classPrivateFieldGet(this, _Frame_client, \"f\");\n  }\n  /**\n   * @internal\n   */\n  executionContext() {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].executionContext();\n  }\n  /**\n   * Behaves identically to {@link Page.evaluateHandle} except it's run within\n   * the context of this frame.\n   *\n   * @see {@link Page.evaluateHandle} for details.\n   */\n  async evaluateHandle(pageFunction, ...args) {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].evaluateHandle(pageFunction, ...args);\n  }\n  /**\n   * Behaves identically to {@link Page.evaluate} except it's run within the\n   * the context of this frame.\n   *\n   * @see {@link Page.evaluate} for details.\n   */\n  async evaluate(pageFunction, ...args) {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].evaluate(pageFunction, ...args);\n  }\n  /**\n   * Queries the frame for an element matching the given selector.\n   *\n   * @param selector - The selector to query for.\n   * @returns A {@link ElementHandle | element handle} to the first element\n   * matching the given selector. Otherwise, `null`.\n   */\n  async $(selector) {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].$(selector);\n  }\n  /**\n   * Queries the frame for all elements matching the given selector.\n   *\n   * @param selector - The selector to query for.\n   * @returns An array of {@link ElementHandle | element handles} that point to\n   * elements matching the given selector.\n   */\n  async $$(selector) {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].$$(selector);\n  }\n  /**\n   * Runs the given function on the first element matching the given selector in\n   * the frame.\n   *\n   * If the given function returns a promise, then this method will wait till\n   * the promise resolves.\n   *\n   * @example\n   *\n   * ```ts\n   * const searchValue = await frame.$eval('#search', el => el.value);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param pageFunction - The function to be evaluated in the frame's context.\n   * The first element matching the selector will be passed to the function as\n   * its first argument.\n   * @param args - Additional arguments to pass to `pageFunction`.\n   * @returns A promise to the result of the function.\n   */\n  async $eval(selector, pageFunction, ...args) {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].$eval(selector, pageFunction, ...args);\n  }\n  /**\n   * Runs the given function on an array of elements matching the given selector\n   * in the frame.\n   *\n   * If the given function returns a promise, then this method will wait till\n   * the promise resolves.\n   *\n   * @example\n   *\n   * ```js\n   * const divsCounts = await frame.$$eval('div', divs => divs.length);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param pageFunction - The function to be evaluated in the frame's context.\n   * An array of elements matching the given selector will be passed to the\n   * function as its first argument.\n   * @param args - Additional arguments to pass to `pageFunction`.\n   * @returns A promise to the result of the function.\n   */\n  async $$eval(selector, pageFunction, ...args) {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].$$eval(selector, pageFunction, ...args);\n  }\n  /**\n   * @deprecated Use {@link Frame.$$} with the `xpath` prefix.\n   *\n   * Example: `await frame.$$('xpath/' + xpathExpression)`\n   *\n   * This method evaluates the given XPath expression and returns the results.\n   * If `xpath` starts with `//` instead of `.//`, the dot will be appended\n   * automatically.\n   * @param expression - the XPath expression to evaluate.\n   */\n  async $x(expression) {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].$x(expression);\n  }\n  /**\n   * Waits for an element matching the given selector to appear in the frame.\n   *\n   * This method works across navigations.\n   *\n   * @example\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   *\n   * (async () => {\n   *   const browser = await puppeteer.launch();\n   *   const page = await browser.newPage();\n   *   let currentURL;\n   *   page\n   *     .mainFrame()\n   *     .waitForSelector('img')\n   *     .then(() => console.log('First URL with image: ' + currentURL));\n   *\n   *   for (currentURL of [\n   *     'https://example.com',\n   *     'https://google.com',\n   *     'https://bbc.com',\n   *   ]) {\n   *     await page.goto(currentURL);\n   *   }\n   *   await browser.close();\n   * })();\n   * ```\n   *\n   * @param selector - The selector to query and wait for.\n   * @param options - Options for customizing waiting behavior.\n   * @returns An element matching the given selector.\n   * @throws Throws if an element matching the given selector doesn't appear.\n   */\n  async waitForSelector(selector, options = {}) {\n    const {\n      updatedSelector,\n      QueryHandler\n    } = (0, GetQueryHandler_js_1.getQueryHandlerAndSelector)(selector);\n    return await QueryHandler.waitFor(this, updatedSelector, options);\n  }\n  /**\n   * @deprecated Use {@link Frame.waitForSelector} with the `xpath` prefix.\n   *\n   * Example: `await frame.waitForSelector('xpath/' + xpathExpression)`\n   *\n   * The method evaluates the XPath expression relative to the Frame.\n   * If `xpath` starts with `//` instead of `.//`, the dot will be appended\n   * automatically.\n   *\n   * Wait for the `xpath` to appear in page. If at the moment of calling the\n   * method the `xpath` already exists, the method will return immediately. If\n   * the xpath doesn't appear after the `timeout` milliseconds of waiting, the\n   * function will throw.\n   *\n   * For a code example, see the example for {@link Frame.waitForSelector}. That\n   * function behaves identically other than taking a CSS selector rather than\n   * an XPath.\n   *\n   * @param xpath - the XPath expression to wait for.\n   * @param options - options to configure the visibility of the element and how\n   * long to wait before timing out.\n   */\n  async waitForXPath(xpath, options = {}) {\n    if (xpath.startsWith('//')) {\n      xpath = `.${xpath}`;\n    }\n    return this.waitForSelector(`xpath/${xpath}`, options);\n  }\n  /**\n   * @example\n   * The `waitForFunction` can be used to observe viewport size change:\n   *\n   * ```ts\n   * import puppeteer from 'puppeteer';\n   *\n   * (async () => {\n   * .  const browser = await puppeteer.launch();\n   * .  const page = await browser.newPage();\n   * .  const watchDog = page.mainFrame().waitForFunction('window.innerWidth < 100');\n   * .  page.setViewport({width: 50, height: 50});\n   * .  await watchDog;\n   * .  await browser.close();\n   * })();\n   * ```\n   *\n   * To pass arguments from Node.js to the predicate of `page.waitForFunction` function:\n   *\n   * ```ts\n   * const selector = '.foo';\n   * await frame.waitForFunction(\n   *   selector => !!document.querySelector(selector),\n   *   {}, // empty options object\n   *   selector\n   * );\n   * ```\n   *\n   * @param pageFunction - the function to evaluate in the frame context.\n   * @param options - options to configure the polling method and timeout.\n   * @param args - arguments to pass to the `pageFunction`.\n   * @returns the promise which resolve when the `pageFunction` returns a truthy value.\n   */\n  waitForFunction(pageFunction, options = {}, ...args) {\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].waitForFunction(pageFunction, options, ...args);\n  }\n  /**\n   * The full HTML contents of the frame, including the DOCTYPE.\n   */\n  async content() {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].content();\n  }\n  /**\n   * Set the content of the frame.\n   *\n   * @param html - HTML markup to assign to the page.\n   * @param options - Options to configure how long before timing out and at\n   * what point to consider the content setting successful.\n   */\n  async setContent(html, options = {}) {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].setContent(html, options);\n  }\n  /**\n   * The frame's `name` attribute as specified in the tag.\n   *\n   * @remarks\n   * If the name is empty, it returns the `id` attribute instead.\n   *\n   * @remarks\n   * This value is calculated once when the frame is created, and will not\n   * update if the attribute is changed later.\n   */\n  name() {\n    return this._name || '';\n  }\n  /**\n   * The frame's URL.\n   */\n  url() {\n    return __classPrivateFieldGet(this, _Frame_url, \"f\");\n  }\n  /**\n   * The parent frame, if any. Detached and main frames return `null`.\n   */\n  parentFrame() {\n    return this._frameManager._frameTree.parentFrame(this._id) || null;\n  }\n  /**\n   * An array of child frames.\n   */\n  childFrames() {\n    return this._frameManager._frameTree.childFrames(this._id);\n  }\n  /**\n   * Is`true` if the frame has been detached. Otherwise, `false`.\n   */\n  isDetached() {\n    return __classPrivateFieldGet(this, _Frame_detached, \"f\");\n  }\n  /**\n   * Adds a `<script>` tag into the page with the desired url or content.\n   *\n   * @param options - Options for the script.\n   * @returns An {@link ElementHandle | element handle} to the injected\n   * `<script>` element.\n   */\n  async addScriptTag(options) {\n    let {\n      content = '',\n      type\n    } = options;\n    const {\n      path\n    } = options;\n    if (+!!options.url + +!!path + +!!content !== 1) {\n      throw new Error('Exactly one of `url`, `path`, or `content` must be specified.');\n    }\n    if (path) {\n      const fs = await (0, util_js_1.importFSPromises)();\n      content = await fs.readFile(path, 'utf8');\n      content += `//# sourceURL=${path.replace(/\\n/g, '')}`;\n    }\n    type = type !== null && type !== void 0 ? type : 'text/javascript';\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].transferHandle(await this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].evaluateHandle(async ({\n      createDeferredPromise\n    }, {\n      url,\n      id,\n      type,\n      content\n    }) => {\n      const promise = createDeferredPromise();\n      const script = document.createElement('script');\n      script.type = type;\n      script.text = content;\n      if (url) {\n        script.src = url;\n        script.addEventListener('load', () => {\n          return promise.resolve();\n        }, {\n          once: true\n        });\n        script.addEventListener('error', event => {\n          var _a;\n          promise.reject(new Error((_a = event.message) !== null && _a !== void 0 ? _a : 'Could not load script'));\n        }, {\n          once: true\n        });\n      } else {\n        promise.resolve();\n      }\n      if (id) {\n        script.id = id;\n      }\n      document.head.appendChild(script);\n      await promise;\n      return script;\n    }, LazyArg_js_1.LazyArg.create(context => {\n      return context.puppeteerUtil;\n    }), {\n      ...options,\n      type,\n      content\n    }));\n  }\n  async addStyleTag(options) {\n    let {\n      content = ''\n    } = options;\n    const {\n      path\n    } = options;\n    if (+!!options.url + +!!path + +!!content !== 1) {\n      throw new Error('Exactly one of `url`, `path`, or `content` must be specified.');\n    }\n    if (path) {\n      const fs = await (0, util_js_1.importFSPromises)();\n      content = await fs.readFile(path, 'utf8');\n      content += '/*# sourceURL=' + path.replace(/\\n/g, '') + '*/';\n      options.content = content;\n    }\n    return this.worlds[IsolatedWorlds_js_1.MAIN_WORLD].transferHandle(await this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].evaluateHandle(async ({\n      createDeferredPromise\n    }, {\n      url,\n      content\n    }) => {\n      const promise = createDeferredPromise();\n      let element;\n      if (!url) {\n        element = document.createElement('style');\n        element.appendChild(document.createTextNode(content));\n      } else {\n        const link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = url;\n        element = link;\n      }\n      element.addEventListener('load', () => {\n        promise.resolve();\n      }, {\n        once: true\n      });\n      element.addEventListener('error', event => {\n        var _a;\n        promise.reject(new Error((_a = event.message) !== null && _a !== void 0 ? _a : 'Could not load style'));\n      }, {\n        once: true\n      });\n      document.head.appendChild(element);\n      await promise;\n      return element;\n    }, LazyArg_js_1.LazyArg.create(context => {\n      return context.puppeteerUtil;\n    }), options));\n  }\n  /**\n   * Clicks the first element found that matches `selector`.\n   *\n   * @remarks\n   * If `click()` triggers a navigation event and there's a separate\n   * `page.waitForNavigation()` promise to be resolved, you may end up with a\n   * race condition that yields unexpected results. The correct pattern for\n   * click and wait for navigation is the following:\n   *\n   * ```ts\n   * const [response] = await Promise.all([\n   *   page.waitForNavigation(waitOptions),\n   *   frame.click(selector, clickOptions),\n   * ]);\n   * ```\n   *\n   * @param selector - The selector to query for.\n   */\n  async click(selector, options = {}) {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].click(selector, options);\n  }\n  /**\n   * Focuses the first element that matches the `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  async focus(selector) {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].focus(selector);\n  }\n  /**\n   * Hovers the pointer over the center of the first element that matches the\n   * `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  async hover(selector) {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].hover(selector);\n  }\n  /**\n   * Selects a set of value on the first `<select>` element that matches the\n   * `selector`.\n   *\n   * @example\n   *\n   * ```ts\n   * frame.select('select#colors', 'blue'); // single selection\n   * frame.select('select#colors', 'red', 'green', 'blue'); // multiple selections\n   * ```\n   *\n   * @param selector - The selector to query for.\n   * @param values - The array of values to select. If the `<select>` has the\n   * `multiple` attribute, all values are considered, otherwise only the first\n   * one is taken into account.\n   * @returns the list of values that were successfully selected.\n   * @throws Throws if there's no `<select>` matching `selector`.\n   */\n  select(selector, ...values) {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].select(selector, ...values);\n  }\n  /**\n   * Taps the first element that matches the `selector`.\n   *\n   * @param selector - The selector to query for.\n   * @throws Throws if there's no element matching `selector`.\n   */\n  async tap(selector) {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].tap(selector);\n  }\n  /**\n   * Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character\n   * in the text.\n   *\n   * @remarks\n   * To press a special key, like `Control` or `ArrowDown`, use\n   * {@link Keyboard.press}.\n   *\n   * @example\n   *\n   * ```ts\n   * await frame.type('#mytextarea', 'Hello'); // Types instantly\n   * await frame.type('#mytextarea', 'World', {delay: 100}); // Types slower, like a user\n   * ```\n   *\n   * @param selector - the selector for the element to type into. If there are\n   * multiple the first will be used.\n   * @param text - text to type into the element\n   * @param options - takes one option, `delay`, which sets the time to wait\n   * between key presses in milliseconds. Defaults to `0`.\n   */\n  async type(selector, text, options) {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].type(selector, text, options);\n  }\n  /**\n   * @deprecated Replace with `new Promise(r => setTimeout(r, milliseconds));`.\n   *\n   * Causes your script to wait for the given number of milliseconds.\n   *\n   * @remarks\n   * It's generally recommended to not wait for a number of seconds, but instead\n   * use {@link Frame.waitForSelector}, {@link Frame.waitForXPath} or\n   * {@link Frame.waitForFunction} to wait for exactly the conditions you want.\n   *\n   * @example\n   *\n   * Wait for 1 second:\n   *\n   * ```ts\n   * await frame.waitForTimeout(1000);\n   * ```\n   *\n   * @param milliseconds - the number of milliseconds to wait.\n   */\n  waitForTimeout(milliseconds) {\n    return new Promise(resolve => {\n      setTimeout(resolve, milliseconds);\n    });\n  }\n  /**\n   * The frame's title.\n   */\n  async title() {\n    return this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD].title();\n  }\n  /**\n   * @internal\n   */\n  _deviceRequestPromptManager() {\n    if (this.isOOPFrame()) {\n      return this._frameManager._deviceRequestPromptManager(__classPrivateFieldGet(this, _Frame_client, \"f\"));\n    }\n    const parentFrame = this.parentFrame();\n    (0, assert_js_1.assert)(parentFrame !== null);\n    return parentFrame._deviceRequestPromptManager();\n  }\n  /**\n   * This method is typically coupled with an action that triggers a device\n   * request from an api such as WebBluetooth.\n   *\n   * :::caution\n   *\n   * This must be called before the device request is made. It will not return a\n   * currently active device prompt.\n   *\n   * :::\n   *\n   * @example\n   *\n   * ```ts\n   * const [devicePrompt] = Promise.all([\n   *   frame.waitForDevicePrompt(),\n   *   frame.click('#connect-bluetooth'),\n   * ]);\n   * await devicePrompt.select(\n   *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n   * );\n   * ```\n   */\n  waitForDevicePrompt(options = {}) {\n    return this._deviceRequestPromptManager().waitForDevicePrompt(options);\n  }\n  /**\n   * @internal\n   */\n  _navigated(framePayload) {\n    this._name = framePayload.name;\n    __classPrivateFieldSet(this, _Frame_url, `${framePayload.url}${framePayload.urlFragment || ''}`, \"f\");\n  }\n  /**\n   * @internal\n   */\n  _navigatedWithinDocument(url) {\n    __classPrivateFieldSet(this, _Frame_url, url, \"f\");\n  }\n  /**\n   * @internal\n   */\n  _onLifecycleEvent(loaderId, name) {\n    if (name === 'init') {\n      this._loaderId = loaderId;\n      this._lifecycleEvents.clear();\n    }\n    this._lifecycleEvents.add(name);\n  }\n  /**\n   * @internal\n   */\n  _onLoadingStopped() {\n    this._lifecycleEvents.add('DOMContentLoaded');\n    this._lifecycleEvents.add('load');\n  }\n  /**\n   * @internal\n   */\n  _onLoadingStarted() {\n    this._hasStartedLoading = true;\n  }\n  /**\n   * @internal\n   */\n  _detach() {\n    __classPrivateFieldSet(this, _Frame_detached, true, \"f\");\n    this.worlds[IsolatedWorlds_js_1.MAIN_WORLD]._detach();\n    this.worlds[IsolatedWorlds_js_1.PUPPETEER_WORLD]._detach();\n  }\n}\nexports.Frame = Frame;\n_Frame_url = new WeakMap(), _Frame_detached = new WeakMap(), _Frame_client = new WeakMap();","map":{"version":3,"names":["assert_js_1","require","ErrorLike_js_1","GetQueryHandler_js_1","IsolatedWorld_js_1","IsolatedWorlds_js_1","LazyArg_js_1","LifecycleWatcher_js_1","util_js_1","Frame","constructor","frameManager","frameId","parentFrameId","client","_Frame_url","set","_Frame_detached","_Frame_client","_loaderId","_hasStartedLoading","_lifecycleEvents","Set","_frameManager","__classPrivateFieldSet","_id","_parentId","updateClient","worlds","MAIN_WORLD","IsolatedWorld","PUPPETEER_WORLD","page","isOOPFrame","__classPrivateFieldGet","goto","url","options","referer","networkManager","extraHTTPHeaders","referrerPolicy","waitUntil","timeout","timeoutSettings","navigationTimeout","ensureNewDocumentNavigation","watcher","LifecycleWatcher","error","Promise","race","navigate","timeoutOrTerminationPromise","newDocumentNavigationPromise","sameDocumentNavigationPromise","navigationResponse","dispose","referrer","response","send","loaderId","errorText","Error","isErrorLike","waitForNavigation","_client","executionContext","evaluateHandle","pageFunction","args","evaluate","$","selector","$$","$eval","$$eval","$x","expression","waitForSelector","updatedSelector","QueryHandler","getQueryHandlerAndSelector","waitFor","waitForXPath","xpath","startsWith","waitForFunction","content","setContent","html","name","_name","parentFrame","_frameTree","childFrames","isDetached","addScriptTag","type","path","fs","importFSPromises","readFile","replace","transferHandle","createDeferredPromise","id","promise","script","document","createElement","text","src","addEventListener","resolve","once","event","reject","_a","message","head","appendChild","LazyArg","create","context","puppeteerUtil","addStyleTag","element","createTextNode","link","rel","href","click","focus","hover","select","values","tap","waitForTimeout","milliseconds","setTimeout","title","_deviceRequestPromptManager","assert","waitForDevicePrompt","_navigated","framePayload","urlFragment","_navigatedWithinDocument","_onLifecycleEvent","clear","add","_onLoadingStopped","_onLoadingStarted","_detach","exports"],"sources":["../../../../src/common/Frame.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}