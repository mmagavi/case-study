{"ast":null,"code":"// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\nimport { BasePromptValue, HumanMessage } from \"../schema/index.js\";\nimport { Serializable } from \"../load/serializable.js\";\nimport { Runnable } from \"../schema/runnable.js\";\n/**\n * Represents a prompt value as a string. It extends the BasePromptValue\n * class and overrides the toString and toChatMessages methods.\n */\nexport class StringPromptValue extends BasePromptValue {\n  constructor(value) {\n    super(...arguments);\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain\", \"prompts\", \"base\"]\n    });\n    Object.defineProperty(this, \"value\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.value = value;\n  }\n  toString() {\n    return this.value;\n  }\n  toChatMessages() {\n    return [new HumanMessage(this.value)];\n  }\n}\n/**\n * Base class for prompt templates. Exposes a format method that returns a\n * string prompt given a set of input values.\n */\nexport class BasePromptTemplate extends Runnable {\n  get lc_attributes() {\n    return {\n      partialVariables: undefined // python doesn't support this yet\n    };\n  }\n\n  constructor(input) {\n    super(input);\n    Object.defineProperty(this, \"lc_serializable\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: true\n    });\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain\", \"prompts\", this._getPromptType()]\n    });\n    Object.defineProperty(this, \"inputVariables\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"outputParser\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"partialVariables\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    const {\n      inputVariables\n    } = input;\n    if (inputVariables.includes(\"stop\")) {\n      throw new Error(\"Cannot have an input variable named 'stop', as it is used internally, please rename.\");\n    }\n    Object.assign(this, input);\n  }\n  /**\n   * Merges partial variables and user variables.\n   * @param userVariables The user variables to merge with the partial variables.\n   * @returns A Promise that resolves to an object containing the merged variables.\n   */\n  async mergePartialAndUserVariables(userVariables) {\n    const partialVariables = this.partialVariables ?? {};\n    const partialValues = {};\n    for (const [key, value] of Object.entries(partialVariables)) {\n      if (typeof value === \"string\") {\n        partialValues[key] = value;\n      } else {\n        partialValues[key] = await value();\n      }\n    }\n    const allKwargs = {\n      ...partialValues,\n      ...userVariables\n    };\n    return allKwargs;\n  }\n  /**\n   * Invokes the prompt template with the given input and options.\n   * @param input The input to invoke the prompt template with.\n   * @param options Optional configuration for the callback.\n   * @returns A Promise that resolves to the output of the prompt template.\n   */\n  async invoke(input, options) {\n    return this._callWithConfig(input => this.formatPromptValue(input), input, {\n      ...options,\n      runType: \"prompt\"\n    });\n  }\n  /**\n   * Return a json-like object representing this prompt template.\n   * @deprecated\n   */\n  serialize() {\n    throw new Error(\"Use .toJSON() instead\");\n  }\n  /**\n   * @deprecated\n   * Load a prompt template from a json-like object describing it.\n   *\n   * @remarks\n   * Deserializing needs to be async because templates (e.g. {@link FewShotPromptTemplate}) can\n   * reference remote resources that we read asynchronously with a web\n   * request.\n   */\n  static async deserialize(data) {\n    switch (data._type) {\n      case \"prompt\":\n        {\n          const {\n            PromptTemplate\n          } = await import(\"./prompt.js\");\n          return PromptTemplate.deserialize(data);\n        }\n      case undefined:\n        {\n          const {\n            PromptTemplate\n          } = await import(\"./prompt.js\");\n          return PromptTemplate.deserialize({\n            ...data,\n            _type: \"prompt\"\n          });\n        }\n      case \"few_shot\":\n        {\n          const {\n            FewShotPromptTemplate\n          } = await import(\"./few_shot.js\");\n          return FewShotPromptTemplate.deserialize(data);\n        }\n      default:\n        throw new Error(`Invalid prompt type in config: ${data._type}`);\n    }\n  }\n}\n/**\n * Base class for string prompt templates. It extends the\n * BasePromptTemplate class and overrides the formatPromptValue method to\n * return a StringPromptValue.\n */\nexport class BaseStringPromptTemplate extends BasePromptTemplate {\n  /**\n   * Formats the prompt given the input values and returns a formatted\n   * prompt value.\n   * @param values The input values to format the prompt.\n   * @returns A Promise that resolves to a formatted prompt value.\n   */\n  async formatPromptValue(values) {\n    const formattedPrompt = await this.format(values);\n    return new StringPromptValue(formattedPrompt);\n  }\n}\n/**\n * Base class for example selectors.\n */\nexport class BaseExampleSelector extends Serializable {\n  constructor() {\n    super(...arguments);\n    Object.defineProperty(this, \"lc_namespace\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"langchain\", \"prompts\", \"selectors\"]\n    });\n  }\n}","map":{"version":3,"names":["BasePromptValue","HumanMessage","Serializable","Runnable","StringPromptValue","constructor","value","arguments","Object","defineProperty","enumerable","configurable","writable","toString","toChatMessages","BasePromptTemplate","lc_attributes","partialVariables","undefined","input","_getPromptType","inputVariables","includes","Error","assign","mergePartialAndUserVariables","userVariables","partialValues","key","entries","allKwargs","invoke","options","_callWithConfig","formatPromptValue","runType","serialize","deserialize","data","_type","PromptTemplate","FewShotPromptTemplate","BaseStringPromptTemplate","values","formattedPrompt","format","BaseExampleSelector"],"sources":["/Users/mayamagavi/instalily/case-study/node_modules/langchain/dist/prompts/base.js"],"sourcesContent":["// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\nimport { BasePromptValue, HumanMessage, } from \"../schema/index.js\";\nimport { Serializable } from \"../load/serializable.js\";\nimport { Runnable } from \"../schema/runnable.js\";\n/**\n * Represents a prompt value as a string. It extends the BasePromptValue\n * class and overrides the toString and toChatMessages methods.\n */\nexport class StringPromptValue extends BasePromptValue {\n    constructor(value) {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"prompts\", \"base\"]\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    toChatMessages() {\n        return [new HumanMessage(this.value)];\n    }\n}\n/**\n * Base class for prompt templates. Exposes a format method that returns a\n * string prompt given a set of input values.\n */\nexport class BasePromptTemplate extends Runnable {\n    get lc_attributes() {\n        return {\n            partialVariables: undefined, // python doesn't support this yet\n        };\n    }\n    constructor(input) {\n        super(input);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"prompts\", this._getPromptType()]\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"partialVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { inputVariables } = input;\n        if (inputVariables.includes(\"stop\")) {\n            throw new Error(\"Cannot have an input variable named 'stop', as it is used internally, please rename.\");\n        }\n        Object.assign(this, input);\n    }\n    /**\n     * Merges partial variables and user variables.\n     * @param userVariables The user variables to merge with the partial variables.\n     * @returns A Promise that resolves to an object containing the merged variables.\n     */\n    async mergePartialAndUserVariables(userVariables) {\n        const partialVariables = this.partialVariables ?? {};\n        const partialValues = {};\n        for (const [key, value] of Object.entries(partialVariables)) {\n            if (typeof value === \"string\") {\n                partialValues[key] = value;\n            }\n            else {\n                partialValues[key] = await value();\n            }\n        }\n        const allKwargs = {\n            ...partialValues,\n            ...userVariables,\n        };\n        return allKwargs;\n    }\n    /**\n     * Invokes the prompt template with the given input and options.\n     * @param input The input to invoke the prompt template with.\n     * @param options Optional configuration for the callback.\n     * @returns A Promise that resolves to the output of the prompt template.\n     */\n    async invoke(input, options) {\n        return this._callWithConfig((input) => this.formatPromptValue(input), input, { ...options, runType: \"prompt\" });\n    }\n    /**\n     * Return a json-like object representing this prompt template.\n     * @deprecated\n     */\n    serialize() {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n    /**\n     * @deprecated\n     * Load a prompt template from a json-like object describing it.\n     *\n     * @remarks\n     * Deserializing needs to be async because templates (e.g. {@link FewShotPromptTemplate}) can\n     * reference remote resources that we read asynchronously with a web\n     * request.\n     */\n    static async deserialize(data) {\n        switch (data._type) {\n            case \"prompt\": {\n                const { PromptTemplate } = await import(\"./prompt.js\");\n                return PromptTemplate.deserialize(data);\n            }\n            case undefined: {\n                const { PromptTemplate } = await import(\"./prompt.js\");\n                return PromptTemplate.deserialize({ ...data, _type: \"prompt\" });\n            }\n            case \"few_shot\": {\n                const { FewShotPromptTemplate } = await import(\"./few_shot.js\");\n                return FewShotPromptTemplate.deserialize(data);\n            }\n            default:\n                throw new Error(`Invalid prompt type in config: ${data._type}`);\n        }\n    }\n}\n/**\n * Base class for string prompt templates. It extends the\n * BasePromptTemplate class and overrides the formatPromptValue method to\n * return a StringPromptValue.\n */\nexport class BaseStringPromptTemplate extends BasePromptTemplate {\n    /**\n     * Formats the prompt given the input values and returns a formatted\n     * prompt value.\n     * @param values The input values to format the prompt.\n     * @returns A Promise that resolves to a formatted prompt value.\n     */\n    async formatPromptValue(values) {\n        const formattedPrompt = await this.format(values);\n        return new StringPromptValue(formattedPrompt);\n    }\n}\n/**\n * Base class for example selectors.\n */\nexport class BaseExampleSelector extends Serializable {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"prompts\", \"selectors\"]\n        });\n    }\n}\n"],"mappings":"AAAA;AACA;AACA,SAASA,eAAe,EAAEC,YAAY,QAAS,oBAAoB;AACnE,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,QAAQ,QAAQ,uBAAuB;AAChD;AACA;AACA;AACA;AACA,OAAO,MAAMC,iBAAiB,SAASJ,eAAe,CAAC;EACnDK,WAAWA,CAACC,KAAK,EAAE;IACf,KAAK,CAAC,GAAGC,SAAS,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,cAAc,EAAE;MACxCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdN,KAAK,EAAE,CAAC,WAAW,EAAE,SAAS,EAAE,MAAM;IAC1C,CAAC,CAAC;IACFE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE;MACjCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdN,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACF,IAAI,CAACA,KAAK,GAAGA,KAAK;EACtB;EACAO,QAAQA,CAAA,EAAG;IACP,OAAO,IAAI,CAACP,KAAK;EACrB;EACAQ,cAAcA,CAAA,EAAG;IACb,OAAO,CAAC,IAAIb,YAAY,CAAC,IAAI,CAACK,KAAK,CAAC,CAAC;EACzC;AACJ;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMS,kBAAkB,SAASZ,QAAQ,CAAC;EAC7C,IAAIa,aAAaA,CAAA,EAAG;IAChB,OAAO;MACHC,gBAAgB,EAAEC,SAAS,CAAE;IACjC,CAAC;EACL;;EACAb,WAAWA,CAACc,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IACZX,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,iBAAiB,EAAE;MAC3CC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdN,KAAK,EAAE;IACX,CAAC,CAAC;IACFE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,cAAc,EAAE;MACxCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdN,KAAK,EAAE,CAAC,WAAW,EAAE,SAAS,EAAE,IAAI,CAACc,cAAc,CAAC,CAAC;IACzD,CAAC,CAAC;IACFZ,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,gBAAgB,EAAE;MAC1CC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdN,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACFE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,cAAc,EAAE;MACxCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdN,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACFE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,kBAAkB,EAAE;MAC5CC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdN,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACF,MAAM;MAAEe;IAAe,CAAC,GAAGF,KAAK;IAChC,IAAIE,cAAc,CAACC,QAAQ,CAAC,MAAM,CAAC,EAAE;MACjC,MAAM,IAAIC,KAAK,CAAC,sFAAsF,CAAC;IAC3G;IACAf,MAAM,CAACgB,MAAM,CAAC,IAAI,EAAEL,KAAK,CAAC;EAC9B;EACA;AACJ;AACA;AACA;AACA;EACI,MAAMM,4BAA4BA,CAACC,aAAa,EAAE;IAC9C,MAAMT,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,IAAI,CAAC,CAAC;IACpD,MAAMU,aAAa,GAAG,CAAC,CAAC;IACxB,KAAK,MAAM,CAACC,GAAG,EAAEtB,KAAK,CAAC,IAAIE,MAAM,CAACqB,OAAO,CAACZ,gBAAgB,CAAC,EAAE;MACzD,IAAI,OAAOX,KAAK,KAAK,QAAQ,EAAE;QAC3BqB,aAAa,CAACC,GAAG,CAAC,GAAGtB,KAAK;MAC9B,CAAC,MACI;QACDqB,aAAa,CAACC,GAAG,CAAC,GAAG,MAAMtB,KAAK,CAAC,CAAC;MACtC;IACJ;IACA,MAAMwB,SAAS,GAAG;MACd,GAAGH,aAAa;MAChB,GAAGD;IACP,CAAC;IACD,OAAOI,SAAS;EACpB;EACA;AACJ;AACA;AACA;AACA;AACA;EACI,MAAMC,MAAMA,CAACZ,KAAK,EAAEa,OAAO,EAAE;IACzB,OAAO,IAAI,CAACC,eAAe,CAAEd,KAAK,IAAK,IAAI,CAACe,iBAAiB,CAACf,KAAK,CAAC,EAAEA,KAAK,EAAE;MAAE,GAAGa,OAAO;MAAEG,OAAO,EAAE;IAAS,CAAC,CAAC;EACnH;EACA;AACJ;AACA;AACA;EACIC,SAASA,CAAA,EAAG;IACR,MAAM,IAAIb,KAAK,CAAC,uBAAuB,CAAC;EAC5C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,aAAac,WAAWA,CAACC,IAAI,EAAE;IAC3B,QAAQA,IAAI,CAACC,KAAK;MACd,KAAK,QAAQ;QAAE;UACX,MAAM;YAAEC;UAAe,CAAC,GAAG,MAAM,MAAM,CAAC,aAAa,CAAC;UACtD,OAAOA,cAAc,CAACH,WAAW,CAACC,IAAI,CAAC;QAC3C;MACA,KAAKpB,SAAS;QAAE;UACZ,MAAM;YAAEsB;UAAe,CAAC,GAAG,MAAM,MAAM,CAAC,aAAa,CAAC;UACtD,OAAOA,cAAc,CAACH,WAAW,CAAC;YAAE,GAAGC,IAAI;YAAEC,KAAK,EAAE;UAAS,CAAC,CAAC;QACnE;MACA,KAAK,UAAU;QAAE;UACb,MAAM;YAAEE;UAAsB,CAAC,GAAG,MAAM,MAAM,CAAC,eAAe,CAAC;UAC/D,OAAOA,qBAAqB,CAACJ,WAAW,CAACC,IAAI,CAAC;QAClD;MACA;QACI,MAAM,IAAIf,KAAK,CAAE,kCAAiCe,IAAI,CAACC,KAAM,EAAC,CAAC;IACvE;EACJ;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMG,wBAAwB,SAAS3B,kBAAkB,CAAC;EAC7D;AACJ;AACA;AACA;AACA;AACA;EACI,MAAMmB,iBAAiBA,CAACS,MAAM,EAAE;IAC5B,MAAMC,eAAe,GAAG,MAAM,IAAI,CAACC,MAAM,CAACF,MAAM,CAAC;IACjD,OAAO,IAAIvC,iBAAiB,CAACwC,eAAe,CAAC;EACjD;AACJ;AACA;AACA;AACA;AACA,OAAO,MAAME,mBAAmB,SAAS5C,YAAY,CAAC;EAClDG,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,GAAGE,SAAS,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,cAAc,EAAE;MACxCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdN,KAAK,EAAE,CAAC,WAAW,EAAE,SAAS,EAAE,WAAW;IAC/C,CAAC,CAAC;EACN;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}